<?php

use PHPUnit\Framework\TestCase;
use CleantalkSP\SpbctWP\DTO;

class MScanFilesDTOTest extends TestCase
{
    public function setUp()
    {
        global $correct_arrays;
        $correct_arrays = array(
            array(
                'path_to_sfile' => 'path',
                'attached_sfile' => 'attached_sfile',
                'md5sum_sfile' => 'md5sum_sfile',
                'dangerous_code' => array(),
                'version' => 'version',
                'source' => 'source',
                'source_type' => 'source_type',
                'source_status' => 'source_status',
                'real_hash' => 4,
            ),
            array(
                'path_to_sfile' => 'path',
                'attached_sfile' => 'attached_sfile',
                'md5sum_sfile' => 'md5sum_sfile',
                'dangerous_code' => 'stringtoarray',
            ),
        );
    }

    public function testSuccessCreateDTO(){
        global $correct_arrays;
        foreach ($correct_arrays as $array){
            $dto = new DTO\MScanFilesDTO($array);
            $this->assertIsObject($dto);
            $this->assertObjectHasAttribute('path_to_sfile',$dto);
            $this->assertObjectHasAttribute('attached_sfile',$dto);
            $this->assertObjectHasAttribute('md5sum_sfile',$dto);
            $this->assertIsString($dto->path_to_sfile);
            $this->assertIsString($dto->attached_sfile);
            $this->assertIsString($dto->md5sum_sfile);
            $this->assertObjectHasAttribute('dangerous_code',$dto);
            $this->assertIsArray($dto->dangerous_code);
        }
    }
}
