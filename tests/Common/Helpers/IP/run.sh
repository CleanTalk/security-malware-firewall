#!/usr/bin/env bash

# path for run this script from wp-content/plugins/security-malware-firewall/tests/Common/Helpers/IP/
# cd ../../../../
# pwd

path_base="tests/Common/Helpers/IP/"
tabs=(
    "HelperGetIPTest.php"
    "HelperGetIPRemoteAddrTest.php"
    "HelperGetIPForwardedForTest.php"
    "HelperGetIPRealIpTest.php"
    "HelperGetIPIncapTest.php"
    "HelperGetIPIcoForwardedForTest.php"
    "HelperGetIPStackpathTest.php"
    "HelperGetIPClientIpTest.php"
    "HelperGetIPSucuriTest.php"
    "HelperGetIPEzoicTest.php"
    "HelperGetIPGTranslateTest.php"
    "HelperGetIPCloudflareTest.php"
    "HelperGetIPOvhTest.php"
)

for t in "${tabs[@]}" ; do 
    path=$path_base$t
    echo $path
    if vendor/bin/phpunit --configuration tests/phpunit.xml --debug "$path"; then
        echo "OK"
    else
        echo "ERROR"
        break
    fi
done