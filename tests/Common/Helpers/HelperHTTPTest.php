<?php

namespace CleantalkSP\Common\Helpers;

use PHPUnit\Framework\TestCase;

class HelperHTTPTest extends TestCase
{
    public function test_getHeaders()
    {
        $this->assertIsArray(HelperHTTP::getHeaders());
    }
    
    public function test_append_parameters_to_URL()
    {
        # valid params as array
        $url = 'https://test.com';
        $paramsArray = [
            'param1' => 'value1',
            'param2' => 'value2'
        ];
        $expected = 'https://test.com?param1=value1&param2=value2';
        $this->assertEquals($expected, HelperHTTP::append_parameters_to_URL($url, $paramsArray));
    
        # valid params as string
        $paramsString = 'param1=value1&param2=value2';
        $expected = 'https://test.com?param1=value1&param2=value2';
        $this->assertEquals($expected, HelperHTTP::append_parameters_to_URL($url, $paramsString));
    
        # valid params as string, url with params
        $urlWithParams = 'https://test.com?paramurl=valueparamurl';
        $paramsString = 'param1=value1&param2=value2';
        $expected = 'https://test.com?paramurl=valueparamurl&param1=value1&param2=value2';
        $this->assertEquals($expected, HelperHTTP::append_parameters_to_URL($urlWithParams, $paramsString));
    }
}