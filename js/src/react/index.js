import React from 'react';
import ReactDOM from 'react-dom/client';
import {createI18n} from '@wordpress/i18n';
import {I18nProvider} from '@wordpress/react-i18n';
const i18n = createI18n();
import {SpbctPage} from './components/SpbctPage';
import {SpbctPageTabs} from './components/SpbctPageTabs';
import {SpbctAboutCT} from './components/SpbctAboutCT';
import SpbctPageNetworkDashboard from './components/SpbctPageNetworkDashboard';

addEventListener('spbctPage', (event) => {
    const targetElement = document.getElementById('spbct-page--react');
    const aboutCTElement = document.getElementById('spbct-page-mob-about-ct--react');

    const data = JSON.parse(targetElement.dataset.data);

    if (targetElement !== null) {
        const root = ReactDOM.createRoot(targetElement);

        if (data.isNetworkAdminDashboard) {
            root.render(<SpbctPageNetworkDashboard data={data} />);
            return;
        }

        root.render(
            <I18nProvider i18n={i18n}>
                <SpbctPage data={data} />
            </I18nProvider>
        );
    }
    if (aboutCTElement !== null) {
        
    }
});

addEventListener('spbctPageTabs', (event) => {
    const targetElement = document.getElementById('spbct-page-tabs--react');
    const data = JSON.parse(targetElement.dataset.data);

    if (targetElement !== null) {
        const root = ReactDOM.createRoot(targetElement);
        root.render(
            <I18nProvider i18n={i18n}>
                <SpbctPageTabs data={data} />
            </I18nProvider>
        );
    }
});

addEventListener('spbctMobAboutCT', (event) => {
    const targetElement = document.getElementById('spbct-page-mob-about-ct--react');
    const data = JSON.parse(targetElement.dataset.data);

    if (targetElement !== null) {
        const root = ReactDOM.createRoot(targetElement);
        root.render(
            <I18nProvider i18n={i18n}>
                <SpbctAboutCT data={data} />
            </I18nProvider>
        );
    }
});
