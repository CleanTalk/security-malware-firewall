import React from 'react';
import ReactDOM from 'react-dom/client';
import SettingsTabBackups from './components/SettingsTabBackups';
import SpbctPage from './components/SpbctPage';
import SpbctPageNetworkDashboard from './components/SpbctPageNetworkDashboard';

addEventListener('spbctTabLoaded', (event) => {
    console.log('Tab ' + event.detail.tab + ' loaded.');
    if ( event.detail.tab === 'backups' ) {
        const targetElement = document.getElementById('spbct-tab-backups--react');
        if ( targetElement !== null ) {
            const props = {
                title: 'WORLD'
            };
            const root = ReactDOM.createRoot(targetElement);
            root.render(<SettingsTabBackups />);
        }
    }
});

addEventListener('spbctPage', (event) => {
    console.log(event);
    const targetElement = document.getElementById('spbct-page--react');
    const data = JSON.parse(targetElement.dataset.data);
    console.log(data);
    if (targetElement !== null) {
        const root = ReactDOM.createRoot(targetElement);

        if (data.isNetworkAdminDashboard) {
            root.render(<SpbctPageNetworkDashboard data={data} />);
            return;
        }

        root.render(<SpbctPage data={data} />);
    }
});
