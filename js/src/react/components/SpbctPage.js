import React from 'react';

class SpbctPage extends React.Component{
    constructor(props) {
        super(props);
        this.state = {date: new Date()};
    }

    componentDidMount() {
        jQuery('#spbc_gdpr_open_modal').on('click', function(){
            jQuery('#gdpr_dialog').dialog({
                modal:true, 
                show: true,
                position: { my: "center", at: "center", of: window },
                width: +(jQuery('#wpbody').width() / 100 * 70), // 70% of #wpbody
                height: 'auto',
                title: 'GDPR compliance',
                draggable: false,
                resizable: false,
                closeText: "Close",
            });
        });
    }

    render() {
        console.log(this.props);
        const data = this.props.data;

        let feedback;
        if (data.feedback !== '') {
            feedback = <div style={{ marginTop: "1em" }} dangerouslySetInnerHTML={{__html: data.feedback }}></div>
        }

        let premium;
        if (data.premium !== '') {
            premium = <div style={{ marginTop: "1em" }} dangerouslySetInnerHTML={{__html: data.premium }}></div>
        }

        let goToCleanTalk;
        if (data.goToCleanTalkLink !== '') {
            goToCleanTalk = <div id="goToCleanTalk" className="spbc-div-2" 
                style={{ display: "inline-block", position: "relative", top: "-2px", marginRight: "7px" }}>

                <a id="goToCleanTalkLink" className="spbc_manual_link" 
                    target="_blank" href={data.goToCleanTalkLink}>
                    <i className="spbc-icon-link-ext"></i>&nbsp;&nbsp;
                    {data.goToCleanTalkText}
                </a>
            </div>;
        }

        let support;
        if (data.support2Link !== '') {
            support = <a target="_blank" href={data.support2Link}
                style={{ display: "inline-block", position: "relative", top: "-2px" }}>
                <button type="button" className="spbc_manual_link">
                    <i className="spbc-icon-link-ext"></i>&nbsp;&nbsp;
                    {data.support2Text}
                </button>
            </a>;
        }

        let sync;
        if (data.sync !== '') {
            sync = <button type="button" className="spbc_manual_link" id="spbc_button__sync" 
                style={{ display: "inline-block", position: "relative", top: "-2px", marginRight: "7px" }}>
                <i className="spbc-icon-upload-cloud"></i>&nbsp;&nbsp;
                <span id="spbc_button__sync_regular">{data.sync}</span>
                <span className="--hide" id="spbc_button__sync_action">{data.syncProgress}</span>
                <img style={{ marginLeft: "10px", marginTop: "1px" }} className="spbc_preloader_button"
                    src={data.syncUrl} /> 
                <img style={{ marginLeft: "10px" }} className="spbc_success --hide" src={data.syncUrlProgress} />
            </button>
        }

        return (
           <div className="wrap">
                <div style={{display: "flex", flexWrap: "wrap", justifyContent: "space-between"}}>
                    <div>
                        <div style={{display: "flex", alignItems: "center", height: "40px"}}>
                            <h2 style={{marginRight: "0.5em"}}>{data.brandname}</h2>
                            <div>(Admins online: {data.adminsOnlineCount})</div>
                        </div>
                        <p style={{fontSize: "16px", fontWeight: "400", marginTop: "0px"}}>{data.nextScanLaunchTime}</p>
                    </div>
                    <div style={{ margin: "10px 0 0 0", fontSize: "13px"}}>
                        <span>{data.supportOf}</span> &nbsp;
                        <span dangerouslySetInnerHTML={{__html: data.supportLink }}></span>
                        <div dangerouslySetInnerHTML={{__html: data.homepage }}></div>
                        <div dangerouslySetInnerHTML={{__html: data.gdprCompliance }}></div>
                        <div dangerouslySetInnerHTML={{__html: data.gdprDialog }}></div>
                        <div dangerouslySetInnerHTML={{__html: data.trademark }}></div>
                        {feedback}
                        {premium}
                    </div>
                </div>
                {goToCleanTalk}&nbsp;&nbsp;
                {support}&nbsp;&nbsp;
                {sync}
           </div> 
        );
    }
}

export default SpbctPage;