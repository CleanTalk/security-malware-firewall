function spbcGetGoogleQrCode(){var e={},s={};return e.security=spbcSettings.ajax_nonce,e.action="spbc_get_google_qr_code",jQuery.ajax({type:"POST",async:!1,url:spbcSettings.ajaxurl,data:e,success:function(e){s=e}}),s}function spbcCheckGoogleCode(){var e={};e.security=spbcSettings.ajax_nonce,e.action="spbc_check_google_code",e.code=jQuery("#spbct-google-qr-code input").val(),jQuery.ajax({type:"POST",async:!1,url:spbcSettings.ajaxurl,data:e,success:function(e){e.success?(jQuery("#spbct-google-qr-code").dialog("close"),document.location.reload()):alert(e.data)}})}function spbcDisableG2fa(e){var s={};s.security=spbcSettings.ajax_nonce,s.action="spbc_disable_google_2fa",s.user_id=jQuery(e).data("user-id"),jQuery.ajax({type:"POST",async:!1,url:spbcSettings.ajaxurl,data:s,success:function(e){e.success?document.location.reload():alert(e.data)}})}jQuery(document).ready(function(){jQuery(".spbc_update_notice").on("click","button",function(){spbc_setCookie("spbc_update_banner_closed",1,2592e3)}),jQuery(document).on("click","#spbc-g2fa-enable",function(e){e.preventDefault();e=spbcGetGoogleQrCode();e.success?(jQuery("#spbct-google-qr-code-img").html(e.data.img+"<p>"+e.data.code+"</p>"),jQuery("#spbct-google-qr-code input").val(""),jQuery("#spbct-google-qr-code").dialog({modal:!0,title:"Google authenticator activation",buttons:{Cancel:function(){jQuery(this).dialog("close")},Ok:function(){spbcCheckGoogleCode()}},draggable:!1,resizable:!1})):alert(spbcGetGoogleQrCode.data)}),jQuery(document).on("click","#spbc-g2fa-disable",function(e){e.preventDefault(),confirm("Are you sure?")&&spbcDisableG2fa(this)});function e(e,s,t){setTimeout(function(){null!==e&&(jQuery(".spbc-admin_bar--user_counter").html(e.count),e.count<=3?(jQuery("#wp-admin-bar-spbc_admin_bar__online_users").show(),jQuery(".spbc-admin_bar--online_users").html(e.users.join(", "))):jQuery("#wp-admin-bar-spbc_admin_bar__online_users").hide()),spbc_sendAJAXRequest(s,t)},15e3)}function t(){const e={searchString:jQuery("#spbcscan-results-log-filter-search").val(),searchStatus:jQuery("#spbcscan-results-log-filter-status").val(),searchType:jQuery("#spbcscan-results-log-filter-type").val(),searchOffset:jQuery("#spbcscan-results-log-pagination-prev").closest(".pagination").data("offset")};e.security=spbcSettings.ajax_nonce,e.action="spbc_get_scan_results_log_rows",jQuery.ajax({type:"POST",async:!1,url:spbcSettings.ajaxurl,data:e,success:function(e){jQuery("#spbcscan-results-log-module .panel-body").html(e)}})}1==+spbcSettings.admin_bar__users_online_counter&&e(null,{action:"spbc_get_authorized_users"},{callback:e}),jQuery("body").on("click",".notice .notice-dismiss",function(e){e=jQuery(e.target).parent(".notice").attr("id");e&&spbc_sendAJAXRequest({action:"spbc_dismiss_banner",banner_id:e},{callback:null})}),jQuery("body").on("keyup","#spbcscan-results-log-filter-search",function(){var e=this.value;3<e.length&&t(),0===e.length&&t()}),jQuery("body").on("change","#spbcscan-results-log-filter-status",function(){t()}),jQuery("body").on("change","#spbcscan-results-log-filter-type",function(){t()}),jQuery("body").on("click","#spbcscan-results-log-pagination-prev",function(){var e=Number(jQuery(this).closest(".pagination").data("offset")),s=Number(jQuery("#spbcscan-results-log-pagination-page").text());0<e&&(e=e-20,s=s-1,jQuery(this).closest(".pagination").data("offset",e),jQuery("#spbcscan-results-log-pagination-page").text(s),t())}),jQuery("body").on("click","#spbcscan-results-log-pagination-next",function(){var e=Number(jQuery(this).closest(".pagination").data("offset"))+20,s=Number(jQuery("#spbcscan-results-log-pagination-page").text())+1;jQuery(this).closest(".pagination").data("offset",e),jQuery("#spbcscan-results-log-pagination-page").text(s),t()})});
//# sourceMappingURL=spbc-admin.min.js.map
