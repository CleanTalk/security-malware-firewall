function spbcGetGoogleQrCode(){var e={},t={};return e.security=spbcSettings.ajax_nonce,e.action="spbc_get_google_qr_code",jQuery.ajax({type:"POST",async:!1,url:spbcSettings.ajaxurl,data:e,success:function(e){t=e}}),t}function spbcCheckGoogleCode(){var e={};e.security=spbcSettings.ajax_nonce,e.action="spbc_check_google_code",e.code=jQuery("#spbct-google-qr-code input").val(),jQuery.ajax({type:"POST",async:!1,url:spbcSettings.ajaxurl,data:e,success:function(e){e.success?(jQuery("#spbct-google-qr-code").dialog("close"),document.location.reload()):alert(e.data)}})}function spbcDisableG2fa(e){var t={};t.security=spbcSettings.ajax_nonce,t.action="spbc_disable_google_2fa",t.user_id=jQuery(e).data("user-id"),jQuery.ajax({type:"POST",async:!1,url:spbcSettings.ajaxurl,data:t,success:function(e){e.success?document.location.reload():alert(e.data)}})}function spbcCheckVulnerability(e,t="install"){var c={};c.security=spbcSettings.ajax_nonce,c.action="install"===t?"spbc_check_vulnerability_install":"spbc_check_vulnerability_list",c.list=e,jQuery.ajax({type:"POST",async:!1,url:spbcSettings.ajaxurl,data:c,success:function(e){e.success?("install"===t&&spbcCheckVulnerabilityInstallRender(e.list,e.msg),"list"===t&&spbcCheckVulnerabilityListRender(e.list,e.msg)):console.log(e)}})}function spbcCheckVulnerabilityListRender(e,t){let c,s;e.forEach(e=>{(s=document.createElement("div")).classList.add("notice","notice-error","error-message"),s.innerHTML="<p>"+t+"</p>",(c=document.querySelector(".themes .theme[data-slug="+e+"]"))&&c.appendChild(s)})}function spbcCheckVulnerabilityInstallRender(e,t){let c,s=document.createElement("div");s.classList.add("notice"),s.innerHTML="<p>"+t+"</p>",e.forEach(e=>{(c=document.querySelector(".theme-id-container .theme-actions a[data-slug="+e+"]"))&&c.parentNode.parentNode.parentNode.appendChild(s)})}function spbcSummaryShowCDNCheckerTable(){event.preventDefault();var e=document.getElementById("spbc_stats_cdn_checker_table");void 0!==e&&("block"===e.style.display?e.style.display="none":e.style.display="block")}jQuery(document).ready(function(){if(-1<window.location.href.indexOf("themes.php")&&spbcSettings.vulnerabilityShowList){let e=[],t=[],c,s;setInterval(function(){0<(c=document.querySelectorAll(".themes .theme[data-slug]")).length&&(t=[],c.forEach(function(e){s=e.querySelector("img").src?e.querySelector("img").src.match(/ver=([\d\.]+)/)[1]:null,t.push(e.dataset.slug,s)})),JSON.stringify(t)!=JSON.stringify(e)&&spbcCheckVulnerability(e=t,"list")},500)}if(-1<window.location.href.indexOf("theme-install.php")&&spbcSettings.vulnerabilityShowInstall){let e=[],t=[],c;setInterval(function(){0<(c=document.querySelectorAll(".theme-id-container .theme-actions a[data-slug]")).length&&(t=[],c.forEach(function(e){t.push(e.dataset.slug)})),JSON.stringify(t)!=JSON.stringify(e)&&spbcCheckVulnerability(e=t)},500)}jQuery(".spbc_update_notice").on("click","button",function(){spbc_setCookie("spbc_update_banner_closed",1,2592e3)}),jQuery(document).on("click","#spbc-g2fa-enable",function(e){e.preventDefault();e=spbcGetGoogleQrCode();e.success?(jQuery("#spbct-google-qr-code-img").html(e.data.img+"<p>"+e.data.code+"</p>"),jQuery("#spbct-google-qr-code input").val(""),jQuery("#spbct-google-qr-code").dialog({modal:!0,title:"Google authenticator activation",buttons:{Cancel:function(){jQuery(this).dialog("close")},Ok:function(){spbcCheckGoogleCode()}},draggable:!1,resizable:!1})):alert(spbcGetGoogleQrCode.data)}),jQuery(document).on("click","#spbc-g2fa-disable",function(e){e.preventDefault(),confirm("Are you sure?")&&spbcDisableG2fa(this)});function e(e,t,c){setTimeout(function(){null!==e&&(jQuery(".spbc-admin_bar--user_counter").html(e.count),e.count<=3?(jQuery("#wp-admin-bar-spbc_admin_bar__online_admins").show(),jQuery(".spbc-admin_bar--online_admins").html(e.users.join(", "))):jQuery("#wp-admin-bar-spbc_admin_bar__online_admins").hide()),spbc_sendAJAXRequest(t,c)},15e3)}1==+spbcSettings.admin_bar__admins_online_counter&&e(null,{action:"spbc_get_authorized_admins"},{callback:e}),jQuery("body").on("click",".spbct-notice-dismiss-link",function(e){jQuery(e.target).siblings(".notice-dismiss").click()}),jQuery("body").on("click",".spbc-notice .notice-dismiss",function(e){var t=jQuery(e.target).parent(".notice").attr("id");t&&(spbc_sendAJAXRequest({action:"spbc_dismiss_banner",banner_id:t},{}),jQuery(e.target).parent(".notice").after('<div id="spbct-notice-dismiss-success" class="notice notice-success is-dismissible"><p>'+spbcSettings.spbctNoticeDismissSuccess+"</p></div>"),setTimeout(function(){jQuery("#spbct-notice-dismiss-success").fadeOut()},2e3))}),1==+spbcSettings.needToWhitelist&&spbc_sendAJAXRequest({action:"spbc_private_list_add"},{callback:null})});
//# sourceMappingURL=spbc-admin.min.js.map
