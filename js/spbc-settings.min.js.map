{"version":3,"file":"spbc-settings.min.js","sources":["spbc-settings.js"],"sourcesContent":["// Printf for JS\r\nString.prototype.printf = function(){\r\n    var formatted = this;\r\n    for( var arg in arguments ) {\r\n        var before_formatted = formatted.substring(0, formatted.indexOf(\"%s\", 0));\r\n        var after_formatted  = formatted.substring(formatted.indexOf(\"%s\", 0)+2, formatted.length);\r\n        formatted = before_formatted + arguments[arg] + after_formatted;\r\n    }\r\n    return formatted;\r\n};\r\n\r\n// Switching tabs\r\nfunction spbc_switchTab(tab, params){\r\n\r\n\tvar tab_name = tab.classList[1].replace('spbc_tab_nav-', '');\r\n\r\n\t// update url \r\n\tvar searchParams = new URLSearchParams(window.location.search)\r\n    searchParams.set(\"spbc_tab\", tab_name);\r\n\tvar hashParam = window.location.hash;\r\n    var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString() + hashParam;\r\n\r\n    history.replaceState(null, '', newRelativePathQuery);\r\n\r\n\t// Hiding a tab 'Backups' if exist\r\n    if(searchParams.get('spbc_tab') !== 'backups') {\r\n    \tjQuery('.spbc_tab_nav-backups').hide();\r\n    }\r\n\r\n    // update active tab\r\n\tjQuery('.spbc_tab_nav').removeClass('spbc_tab_nav--active');\r\n\tjQuery('.spbc_tab').removeClass('spbc_tab--active');\r\n\tjQuery(tab).addClass('spbc_tab_nav--active');\r\n\tjQuery('.spbc_tab-'+tab_name).addClass('spbc_tab--active');\r\n\r\n\tif(!jQuery(tab).data('loaded')){\r\n\t\tvar data = {\r\n\t\t\taction: 'spbc_settings__draw_elements',\r\n\t\t\ttab_name: tab_name,\r\n\t\t\tsecurity: spbcSettings.ajax_nonce\r\n\t\t};\r\n\t\tvar params = {\r\n\t\t\tcallback: spbc_draw_settings_callback,\r\n\t\t\tnotJson: true,\r\n            additional: params || null,\r\n\t\t};\r\n\t\tspbc_sendAJAXRequest( data, params, tab );\r\n\t}else if(params && params.action){\r\n        switch (params.action){\r\n            case 'highlight':\r\n                spbcHighlightElement(params.target, params.times);\r\n                break;\r\n            case 'click':\r\n                setTimeout(function(){\r\n                    jQuery('#'+params.additional.target).click();\r\n                }, 500);\r\n                break;\r\n        }\r\n\t}\r\n}\r\n\r\nfunction spbc_draw_settings_callback(result, data, params, obj){\r\n\r\n\tjQuery(obj).data('loaded', true);\r\n\tjQuery('.spbc_tab-'+data.tab_name).replaceWith(result);\r\n\tvar tab = jQuery('.spbc_tab-'+data.tab_name);\r\n\ttab.addClass('spbc_tab--active');\r\n\r\n\tjQuery(document).off( 'click', '.spbc_long_description__show');\r\n\tjQuery(document).on('click', '.spbc_long_description__show', function(){\r\n\t\tself = jQuery(this);\r\n\t\tspbc_settings__show_description(self, self.attr('setting'));\r\n\t});\r\n\r\n\tjQuery(document).off( 'click', '.spbc_long_recommendation__show');\r\n\tjQuery(document).on('click', '.spbc_long_recommendation__show', function(){\r\n\t\tself = jQuery(this);\r\n\t\tspbc_settings__show_recommendation(self, self.attr('setting'));\r\n\t});\r\n\r\n\tif(params.additional){\r\n\t    switch (params.additional.action) {\r\n            case 'highlight':\r\n\t\t        spbcHighlightElement(params.additional.target, params.additional.times);\r\n                break;\r\n            case 'click':\r\n                setTimeout(function(){\r\n\t\t            jQuery('#'+params.additional.target).click();\r\n                }, 500);\r\n                break;\r\n        }\r\n    }\r\n\r\n\tjQuery(tab).on('click', '.spbc_hint-send_'+data.tab_name, function(){\r\n\t\t\tjQuery('.spbc_hint-send_'+data.tab_name).hide();\r\n\t\tspbc_sendAJAXRequest(\r\n\t\t\t{action: 'spbc_send_'+data.tab_name, tab_name: data.tab_name},\r\n\t\t\t{callback: spbc_send_logs_callback}\r\n\t\t);\r\n\t});\r\n\r\n\t// scroll to anchor\r\n\tif (window.location.hash) {\r\n\t\tdocument.getElementById(window.location.hash.substring(1)).scrollIntoView();\r\n\t}\r\n}\r\n\r\nfunction spbc_send_logs_callback(result, data, params, obj){\r\n\tjQuery('.spbc_tab_nav-'+data.tab_name).data('loaded', false);\r\n\tspbc_switchTab(document.getElementsByClassName('spbc_tab_nav-'+data.tab_name)[0]);\r\n}\r\n\r\n// Settings dependences\r\nfunction spbcSettingsDependenciesbyId(settingsIDs, enable){\r\n\r\n\tif(typeof settingsIDs === 'string'){\r\n\t\ttmp = [];\r\n\t\ttmp.push(settingsIDs);\r\n\t\tsettingsIDs = tmp;\r\n\t}\r\n\r\n\tenable = typeof enable === 'undefined' ? null : +enable;\r\n\r\n\tsettingsIDs.forEach(function(settingID, i, arr){\r\n\r\n\t\tvar elem = document.getElementById('spbc_setting_'+settingID),\r\n            do_disable = function(){elem.setAttribute('disabled', 'disabled');},\r\n            do_enable  = function(){elem.removeAttribute('disabled');};\r\n\r\n        if(enable !== null) // Set\r\n            enable === 1 ? do_enable() : do_disable();\r\n        else // Switch\r\n            elem.getAttribute('disabled') === null ? do_disable() : do_enable();\r\n\r\n\t});\r\n}\r\n\r\n/**\r\n * Recursive in case children found!\r\n *\r\n * Settings dependencies\r\n *\r\n */\r\nfunction spbcSettingsDependencies(settingNames, enable){\r\n\r\n\t// Cast settingNames to array\r\n\tsettingNames = typeof settingNames === 'string' ? settingNames.split(',') : settingNames;\r\n\tenable       = typeof enable === 'undefined' ? +event.target.checked : +enable;\r\n\r\n\tsettingNames.forEach(function(settingName, i, arr){\r\n\r\n\t\tdocument.getElementsByName('spbc_settings['+settingName+']')\r\n\t\t\t.forEach(function( elem, i, arr ){\r\n\r\n\t\t\t\tvar\tdo_disable = function(){elem.setAttribute('disabled', 'disabled');},\r\n\t\t\t\t\tdo_enable  = function(){elem.removeAttribute('disabled');};\r\n\t\t\t\tif(enable !== null) // Set\r\n\t\t\t\t\tenable === 1 ? do_enable() : do_disable();\r\n\t\t\t\telse // Switch\r\n\t\t\t\t\telem.getAttribute('disabled') === null ? do_disable() : do_enable();\r\n\r\n\t\t\t\tvar children = elem.getAttribute('children');\r\n\t\t\t\tif( children !== null ){\r\n\t\t\t\t\tspbcSettingsDependencies(children, enable && elem.checked);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t});\r\n}\r\n\r\nfunction spbc_settings__show_description(label, setting_id){\r\n\t\r\n\tvar remove_desc_func = function(e){\r\n\t\tif(typeof e === 'undefined' || ((jQuery(e.target).parent('.spbc_long_desc').length == 0 || jQuery(e.target).hasClass('spbc_long_desc__cancel')) && !jQuery(e.target).hasClass('spbc_long_description__show'))){\r\n\t\t\tjQuery('.spbc_long_desc').remove();\r\n\t\t\tjQuery(document).off('click', remove_desc_func);\r\n\t\t}\r\n\t};\r\n\t\r\n\tremove_desc_func();\r\n\t\r\n\tlabel.after(\"<div id='spbc_long_desc__\"+setting_id+\"' class='spbc_long_desc'></div>\");\r\n\tvar obj = jQuery('#spbc_long_desc__'+setting_id);\r\n\tobj.append(\"<i class='spbc-icon-spin1 animate-spin'></i>\")\r\n\t\t.append(\"<div class='spbc_long_desc__angle_top_left'></div>\")\r\n\t\t.css({\r\n\t\t\ttop: label.position().top + 25,\r\n\t\t\tleft: label.position().left + 5\r\n\t\t});\r\n\r\n\t\r\n\tspbc_sendAJAXRequest(\r\n\t\t{action: 'spbc_settings__get_description', setting_id: setting_id},\r\n\t\t{\r\n\t\t\tspinner: obj.children('img'),\r\n\t\t\tcallback: function(result, data, params, obj){\r\n\r\n\t\t\t\tobj.empty()\r\n\t\t\t\t\t.append(\"<div class='spbc_long_desc__angle_top_left'></div>\")\r\n\t\t\t\t\t.append(\"<i class='spbc_long_desc__cancel spbc-icon-cancel'></i>\")\r\n\t\t\t\t\t.append(\"<h3 class='spbc_long_desc__title'>\"+result.title+\"</h3>\")\r\n\t\t\t\t\t.append(\"<p>\"+result.desc+\"</p>\");\r\n\r\n\t\t\t\tjQuery(document).on('click', remove_desc_func);\r\n\t\t\t}\r\n\t\t},\r\n\t\tobj\r\n\t);\r\n}\r\n\r\nfunction spbc_settings__show_recommendation(label, setting_id){\r\n\t\r\n\tvar remove_recommendation_func = function(e){\r\n\t\tif(typeof e === 'undefined' || ((jQuery(e.target).parent('.spbc_long_desc').length == 0 || jQuery(e.target).hasClass('spbc_long_desc__cancel')) && !jQuery(e.target).hasClass('spbc_long_recommendation__show'))){\r\n\t\t\tjQuery('.spbc_long_desc').remove();\r\n\t\t\tjQuery(document).off('click', remove_recommendation_func);\r\n\t\t}\r\n\t};\r\n\t\r\n\tremove_recommendation_func();\r\n\t\r\n\tlabel.after(\"<div id='spbc_long_desc__\"+setting_id+\"' class='spbc_long_desc'></div>\");\r\n\tvar obj = jQuery('#spbc_long_desc__'+setting_id);\r\n\tobj.append(\"<i class='spbc-icon-spin1 animate-spin'></i>\")\r\n\t\t.append(\"<div class='spbc_long_desc__angle_top_left'></div>\")\r\n\t\t.css({\r\n\t\t\ttop: label.position().top + 25,\r\n\t\t\tleft: label.position().left + 5\r\n\t\t});\r\n\r\n\t\r\n\tspbc_sendAJAXRequest(\r\n\t\t{action: 'spbc_settings__get_recommendation', setting_id: setting_id},\r\n\t\t{\r\n\t\t\tspinner: obj.children('img'),\r\n\t\t\tcallback: function(result, data, params, obj){\r\n\r\n\t\t\t\tobj.empty()\r\n\t\t\t\t\t.append(\"<div class='spbc_long_desc__angle_top_left'></div>\")\r\n\t\t\t\t\t.append(\"<i class='spbc_long_desc__cancel spbc-icon-cancel'></i>\")\r\n\t\t\t\t\t.append(\"<h3 class='spbc_long_desc__title' style='margin-right: 2em;'>\"+result.title+\"</h3>\")\r\n\t\t\t\t\t.append(\"<p>\"+result.desc+\"</p>\");\r\n\r\n\t\t\t\tjQuery(document).on('click', remove_recommendation_func);\r\n\t\t\t}\r\n\t\t},\r\n\t\tobj\r\n\t);\r\n}\r\n\r\n// Shows/hides full text\r\nfunction spbcStartShowHide(){\r\n\tjQuery('.spbcShortText')\r\n\t\t.off('mouseover' )\r\n\t\t.on('mouseover', function(){ jQuery(this).next().show(); })\r\n\t\t.off('mouseout' )\r\n\t\t.on('mouseout',   function(){ jQuery(this).next().hide();  });\r\n\tjQuery('.spbcFullText')\r\n\t\t.off('mouseout' )\r\n\t\t.on('mouseout',   function(){ jQuery(this).hide();  })\r\n\t\t.off('mouseover' )\r\n\t\t.on('mouseover', function(){ jQuery(this).show(); })\r\n}\r\n\r\n// Generate and save confirmation code\r\nfunction spbctGenerateConfirmationCode() {\r\n\r\n\tvar data = {};\r\n\tvar res = {};\r\n\tres.success = false;\r\n\tdata.security = spbcSettings.ajax_nonce;\r\n\tdata.action = 'spbc_generate_confirmation_code';\r\n\r\n\tjQuery.ajax({\r\n\t\ttype: \"POST\",\r\n\t\tasync: false,\r\n\t\turl: spbcSettings.ajaxurl,\r\n\t\tdata: data,\r\n\t\tsuccess: function(result){\r\n\t\t\tif(result.success) {\r\n\t\t\t\tres.success = true;\r\n\t\t\t} else {\r\n\t\t\t\tres.text = result.data;\r\n\t\t\t}\r\n\t\t},\r\n\t});\r\n\treturn res;\r\n}\r\n// Check confirmation code\r\nfunction spbctCheckConfirmationCode( radioButton, timeout, timer ) {\r\n\r\n\tvar element = radioButton;\r\n\tvar data = {};\r\n\tdata.security = spbcSettings.ajax_nonce;\r\n\tdata.action = 'spbc_check_confirmation_code';\r\n\tdata.code = jQuery('#confirmation-code input').val();\r\n\r\n\tjQuery.ajax({\r\n\t\ttype: \"POST\",\r\n\t\tasync: false,\r\n\t\turl: spbcSettings.ajaxurl,\r\n\t\tdata: data,\r\n\t\tsuccess: function(result){\r\n\t\t\tif(result.success) {\r\n\t\t\t\tjQuery('[name *= 2fa__enable]').attr(\"checked\", \"\");\r\n\t\t\t\telement.checked = true;\r\n\t\t\t\tjQuery('#spbc_setting_2fa__roles').removeAttr('disabled');\r\n\t\t\t\tjQuery('#spbc_setting_2fa__roles > option:first').attr('selected','selected');\r\n\t\t\t\tclearTimeout( timeout );\r\n\t\t\t\ttimer.remove();\r\n\t\t\t\tjQuery('#confirmation-code').dialog( \"close\" );\r\n\t\t\t} else {\r\n\t\t\t\talert('Code verification failed!');\r\n\t\t\t}\r\n\t\t},\r\n\t});\r\n\r\n}\r\n\r\n/**\r\n * Checking current account status for renew notice\r\n */\r\nfunction spbc_banner_check() {\r\n\tvar bannerChecker = setInterval( function() {\r\n\t\tspbc_sendAJAXRequest(\r\n\t\t\t{action: 'spbc_settings__check_renew_banner'},\r\n\t\t\t{\r\n\t\t\t\tcallback: function(result, data, params, obj){\r\n\t\t\t\t\tif (result.close_renew_banner) {\r\n\t\t\t\t\t\tif (jQuery('#spbc_renew_notice').length)\r\n\t\t\t\t\t\t\tjQuery('#spbc_renew_notice').hide('slow');\r\n\t\t\t\t\t\tif (jQuery('#spbc_trial_notice').length)\r\n\t\t\t\t\t\t\tjQuery('#spbc_trial_notice').hide('slow');\r\n\t\t\t\t\t\tclearInterval(bannerChecker);\r\n\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t}, 60000);\r\n}\r\n\r\njQuery(document).ready(function(){\r\n\t\r\n\tjQuery('#spbc_gdpr_open_modal').on('click', function(){\r\n\t\tjQuery('#gdpr_dialog').dialog({\r\n\t\t\tmodal:true, \r\n\t\t\tshow: true,\r\n\t\t\tposition: { my: \"center\", at: \"center\", of: window },\r\n\t\t\twidth: +(jQuery('#wpbody').width() / 100 * 70), // 70% of #wpbody\r\n\t\t\theight: 'auto',\r\n\t\t\ttitle: 'GDPR compliance',\r\n\t\t\tdraggable: false,\r\n\t\t\tresizable: false,\r\n\t\t\tcloseText: \"Close\",\r\n\t\t});\r\n\t});\r\n\r\n\t// Checking email receiving possibility for activation 2FA\r\n\tjQuery(document).on('click', '[name*=fa__enable]:not([value=0]),#confirmation-code--resend', function(e){\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tjQuery('#confirmation-code--resend').attr('disabled', 'disabled')\r\n\t\t\t.append('<div class=\"circle circle--small -animation--circle -animation--30s \"><div class=\"circle-inner\"></div></div>');\r\n\t\tvar enableResend = setTimeout(function(){\r\n\t\t\tjQuery('#confirmation-code--resend').removeAttr('disabled');\r\n\t\t\tjQuery('#confirmation-code--resend>.circle').remove();\r\n\t\t}, 30000);\r\n\r\n\t\tvar res = spbctGenerateConfirmationCode();\r\n\t\tif( res.success ) {\r\n\t\t\tjQuery('#confirmation-code input').val('');\r\n\t\t\tjQuery('#confirmation-code').dialog({\r\n\t\t\t\tmodal: true,\r\n\t\t\t\ttitle: 'Confirmation code',\r\n\t\t\t\twidth: 310,\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tCancel: function() {\r\n\t\t\t\t\t\tjQuery( this ).dialog( \"close\" );\r\n\t\t\t\t\t\tclearTimeout( enableResend );\r\n\t\t\t\t\t\tjQuery('#confirmation-code--resend>.circle').remove();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tOk: function() {\r\n\t\t\t\t\t\tspbctCheckConfirmationCode(e.target, enableResend, jQuery('#confirmation-code--resend>.circle'));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdraggable: false,\r\n\t\t\t\tresizable: false,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\talert(res.text);\r\n\t\t}\r\n\t});\r\n\t\r\n\tif (jQuery('#spbc_renew_notice').length || jQuery('#spbc_trial_notice').length) {\r\n\t\tspbc_banner_check();\r\n\t}\r\n\r\n\t// Sync button\r\n\tjQuery('#spbc_button__sync').on('click', function(){\r\n\t\tspbc_sendAJAXRequest(\r\n\t\t\t{action: 'spbc_sync'},\r\n\t\t\t{\r\n\t\t\t\ttimeout: 25000,\r\n\t\t\t\tbutton: document.getElementById('spbc_button__sync' ),\r\n\t\t\t\tspinner: jQuery('#spbc_button__sync .spbc_preloader_button' ),\r\n\t\t\t\tcallback: function(result, data, params, obj){\r\n\t\t\t\t\tjQuery('#spbc_button__sync .spbc_success').show(300);\r\n\t\t\t\t\tsetTimeout(function(){jQuery('#spbc_button__sync .spbc_success').hide(300);}, 2000);\r\n\t\t\t\t\tif(result.reload)\r\n\t\t\t\t\t\tdocument.location.reload();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t});\r\n\r\n\tif( spbcSettings.key_changed ){\r\n\t\tjQuery('#spbc_button__sync').click();\r\n\t}\r\n\r\n\t// Get Key Auto button\r\n\tjQuery(document).on('click', '#spbc_setting_get_key_auto', function(){\r\n\t\tspbc_sendAJAXRequest(\r\n\t\t\t{action: 'spbc_get_key_auto'},\r\n\t\t\t{\r\n\t\t\t\ttimeout: 25000,\r\n\t\t\t\tbutton: document.getElementById('spbc_setting_get_key_auto' ),\r\n\t\t\t\tspinner: jQuery('#spbc_setting_get_key_auto .spbc_preloader_button' ),\r\n\t\t\t\tcallback: function(result, data, params, obj){\r\n\t\t\t\t\tjQuery('#spbc_setting_get_key_auto .spbc_success').show(300);\r\n\t\t\t\t\tsetTimeout(function(){jQuery('#spbc_setting_get_key_auto .spbc_success').hide(300);}, 2000);\r\n\t\t\t\t\tif(result.reload)\r\n\t\t\t\t\t\tdocument.location.reload();\r\n\t\t\t\t\tif(result.msg) {\r\n\t\t\t\t\t\tspbcModal.open().putError(result.msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(result.getTemplates) {\r\n\t\t\t\t\t\tspbcModal.loaded = result.getTemplates;\r\n\t\t\t\t\t\tspbcModal.open();\r\n\t\t\t\t\t\tdocument.addEventListener(\"spbcModalClosed\", function( e ) {\r\n\t\t\t\t\t\t\tdocument.location.reload();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t});\r\n\r\n\t// Import settings\r\n\tjQuery( document ).on('click', '#spbc_settings_templates_import_button', function(){\r\n\t\tjQuery('#spbc-ajax-result').remove();\r\n\t\tvar optionSelected = jQuery('option:selected', jQuery('#spbc_settings_templates_import'));\r\n\t\tvar templateNameInput = jQuery('#spbc_settings_templates_import_name');\r\n\t\ttemplateNameInput.css('border-color', 'inherit');\r\n\t\tif( typeof optionSelected.data('id') === \"undefined\" ) {\r\n\t\t\tconsole.log( 'Attribute \"data-id\" not set for the option.' );\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar data = {\r\n\t\t\t'template_id' : optionSelected.data('id'),\r\n\t\t\t'template_name' : optionSelected.data('name'),\r\n\t\t\t'settings' : optionSelected.data('settings')\r\n\t\t};\r\n\t\tvar button = this;\r\n\t\tspbc_sendAJAXRequest(\r\n\t\t\t{action: 'spbc_settings_templates_import', data: data},\r\n\t\t\t{\r\n\t\t\t\ttimeout: 25000,\r\n\t\t\t\tbutton: button,\r\n\t\t\t\tspinner: jQuery('#spbc_settings_templates_import_button .spbc_preloader_button' ),\r\n\t\t\t\tcallback: function(result, data, params, obj){\r\n\t\t\t\t\tif(result.success) {\r\n\t\t\t\t\t\tjQuery( \"<p id='spbc-ajax-result' class='success'>\" + result.data + \"</p>\" ).insertAfter( jQuery(button) );\r\n\t\t\t\t\t\tjQuery('#spbc_settings_templates_import_button .spbc_success').show(300);\r\n\t\t\t\t\t\tsetTimeout(function(){jQuery('#spbc_settings_templates_import_button .spbc_success').hide(300);}, 2000);\r\n\t\t\t\t\t\tdocument.addEventListener(\"spbcModalClosed\", function( e ) {\r\n\t\t\t\t\t\t\tdocument.location.reload();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(function(){spbcModal.close()}, 2000);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjQuery( \"<p id='spbc-ajax-result' class='error'>\" + result.data + \"</p>\" ).insertAfter( jQuery(button) );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t});\r\n\r\n\t// Export settings\r\n\tjQuery( document ).on('click', '#spbc_settings_templates_export_button', function(){\r\n\t\tjQuery('#spbc-ajax-result').remove();\r\n\t\tvar optionSelected = jQuery('option:selected', jQuery('#spbc_settings_templates_export'));\r\n\t\tvar templateNameInput = jQuery('#spbc_settings_templates_export_name');\r\n\t\ttemplateNameInput.css('border-color', 'inherit');\r\n\t\tif( typeof optionSelected.data('id') === \"undefined\" ) {\r\n\t\t\tconsole.log( 'Attribute \"data-id\" not set for the option.' );\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif( optionSelected.data('id') === 'new_template' ) {\r\n\t\t\tvar templateName = templateNameInput.val();\r\n\t\t\tif( templateName === '' ) {\r\n\t\t\t\ttemplateNameInput.css('border-color', 'red');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar data = {\r\n\t\t\t\t'template_name' : templateName\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar data = {\r\n\t\t\t\t'template_id' : optionSelected.data('id')\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar button = this;\r\n\t\tspbc_sendAJAXRequest(\r\n\t\t\t{action: 'spbc_settings_templates_export', data: data},\r\n\t\t\t{\r\n\t\t\t\ttimeout: 25000,\r\n\t\t\t\tbutton: button,\r\n\t\t\t\tspinner: jQuery('#spbc_settings_templates_export_button .spbc_preloader_button' ),\r\n\t\t\t\tcallback: function(result, data, params, obj){\r\n\t\t\t\t\tif(result.success) {\r\n\t\t\t\t\t\tjQuery( \"<p id='spbc-ajax-result' class='success'>\" + result.data + \"</p>\" ).insertAfter( jQuery(button) );\r\n\t\t\t\t\t\tjQuery('#spbc_settings_templates_export_button .spbc_success').show(300);\r\n\t\t\t\t\t\tsetTimeout(function(){jQuery('#spbc_settings_templates_export_button .spbc_success').hide(300);}, 2000);\r\n\t\t\t\t\t\tdocument.addEventListener(\"spbcModalClosed\", function( e ) {\r\n\t\t\t\t\t\t\tdocument.location.reload();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(function(){spbcModal.close()}, 2000);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjQuery( \"<p id='spbc-ajax-result' class='error'>\" + result.data + \"</p>\" ).insertAfter( jQuery(button) );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t});\r\n\r\n\t// Reset settings\r\n\tjQuery( document ).on('click', '#spbc_settings_templates_reset_button', function(){\r\n\t\tvar button = this;\r\n\t\tspbc_sendAJAXRequest(\r\n\t\t\t{action: 'spbc_settings_templates_reset'},\r\n\t\t\t{\r\n\t\t\t\ttimeout: 25000,\r\n\t\t\t\tbutton: button,\r\n\t\t\t\tspinner: jQuery('#spbc_settings_templates_reset_button .spbc_preloader_button' ),\r\n\t\t\t\tcallback: function(result, data, params, obj){\r\n\t\t\t\t\tif(result.success) {\r\n\t\t\t\t\t\tjQuery( \"<p id='spbc-ajax-result' class='success'>\" + result.data + \"</p>\" ).insertAfter( jQuery(button) );\r\n\t\t\t\t\t\tjQuery('#spbc_settings_templates_reset_button .spbc_success').show(300);\r\n\t\t\t\t\t\tsetTimeout(function(){jQuery('#spbc_settings_templates_reset_button .spbc_success').hide(300);}, 2000);\r\n\t\t\t\t\t\tdocument.addEventListener(\"spbcModalClosed\", function( e ) {\r\n\t\t\t\t\t\t\tdocument.location.reload();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(function(){spbcModal.close()}, 2000);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjQuery( \"<p id='spbc-ajax-result' class='error'>\" + result.data + \"</p>\" ).insertAfter( jQuery(button) );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t});\r\n\r\n\tjQuery(document).on('change', '#spbc_settings_templates_export',function(){\r\n\t\tvar optionSelected = jQuery(\"option:selected\", this);\r\n\t\tif ( optionSelected.data(\"id\") === 'new_template' ) {\r\n\t\t\tjQuery(this).parent().parent().find('#spbc_settings_templates_export_name').show();\r\n\t\t} else {\r\n\t\t\tjQuery(this).parent().parent().find('#spbc_settings_templates_export_name').hide();\r\n\t\t}\r\n\t});\r\n\r\n\t//* TAB_CONTROL\r\n\t\r\n\t\tjQuery('.spbc_tab_nav-summary').data('loaded', true); // Summary tab loaded by default\r\n\t\tjQuery('.spbc_tabs_nav_wrapper').on('click', '.spbc_tab_nav', function(event){\r\n\t\t\tspbc_switchTab(event.currentTarget);\r\n\t\t});\r\n\t\t\r\n\t\t// Get additional params\r\n        var params = {\r\n            target: location.search.match(/spbc_target=(\\S*?)(&|$)/) ? location.search.match(/spbc_target=(\\S*?)(&|$)/)[1] : null,\r\n            action: location.search.match(/spbc_action=(\\S*?)(&|$)/) ? location.search.match(/spbc_action=(\\S*?)(&|$)/)[1] : null,\r\n            times: location.search.match(/spbc_times=(\\S*?)(&|$)/)   ? location.search.match(/spbc_times=(\\S*?)(&|$)/)[1]  : 3,\r\n        };\r\n        // Legacy support\r\n        params.target = location.search.match(/spbc_highlight=(\\S*?)(&|$)/) ? location.search.match(/spbc_highlight=(\\S*?)(&|$)/)[1] : params.target;\r\n        params.action = location.search.search(/spbc_highlight=(\\S*?)(&|$)/) != -1\r\n            ? 'highlight'\r\n            : params.action;\r\n\r\n\t\t// Get open tab form query\r\n\t\tvar spbc_tab = document.getElementsByClassName('spbc_tab_nav-' + (location.search.match(/spbc_tab=(\\S*?)(&|$)/) ? location.search.match(/spbc_tab=(\\S*?)(&|$)/)[1] : ''))[0] || null;\r\n\r\n\t\t// TAB SWITCHING\r\n\t\t// Switch by URL\r\n\t\tif(spbc_tab){\r\n\r\n\t\t// Switch to DEBUG\r\n\t\t}else if( +spbcSettings.debug ){\r\n\t\t\tspbc_tab = document.getElementsByClassName('spbc_tab_nav-debug')[0];\r\n\t\t// Switch by DEFAULT\r\n\t\t}else if( +spbcSettings.wpms && !+spbcSettings.is_main_site){\r\n\t\t\tspbc_tab = document.getElementsByClassName('spbc_tab_nav-security_log')[0];\r\n\t\t// Switch if Key is OK and SFW is ON\r\n\t\t}else if( +spbcSettings.key_is_ok && +spbcSettings.secfw_enabled ){\r\n\t\t\tspbc_tab = document.getElementsByClassName('spbc_tab_nav-traffic_control')[0];\r\n\t\t// Switch if Key is OK\r\n\t\t}else if( +spbcSettings.key_is_ok ){\r\n\t\t\tspbc_tab = document.getElementsByClassName('spbc_tab_nav-scanner')[0];\r\n\t\t// Switch if KEY IS BAD\r\n\t\t}else{\r\n\t\t\tspbc_tab = document.getElementsByClassName('spbc_tab_nav-settings_general')[0];\r\n\t\t\tparams = {\r\n\t\t\t    target: 'spbc_key',\r\n                action: 'highlight',\r\n                times: 3,\r\n            };\r\n\t\t}\r\n\t\t\r\n\t\t// Switch tab\r\n\t\tif(spbc_tab) spbc_switchTab(spbc_tab, params);\r\n\t\t\r\n\t//*/ TAB_CONROL END\r\n\t\r\n\t//* REFRESH TAB IF ctrl+F5\r\n\tvar ctrlKeyDown = false;\r\n\r\n\tjQuery(document).on(\"keyup\", function(e) {\r\n\t\tif ((e.which || e.keyCode) == 17) ctrlKeyDown = false;\r\n\t});\r\n\r\n\tjQuery(document).on(\"keydown\", function(e) {\r\n\t\tif (((e.which || e.keyCode) == 116) && ctrlKeyDown) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tvar active_tab = jQuery('.spbc_tab_nav--active')[0];\r\n\t\t\tvar tab_name = active_tab.classList[1].replace('spbc_tab_nav-', '');\r\n\r\n\t\t\tif (tab_name === 'scanner') return; \r\n\r\n\t\t\tjQuery(active_tab).data('loaded', false);\r\n\r\n\t\t\tspbc_switchTab(active_tab);\r\n\r\n\t\t} else if ((e.which || e.keyCode) == 17) {\r\n\t        ctrlKeyDown = true;\r\n\t    }\r\n\t});\r\n\t//*/ REFRESH TAB IF ctrl+F5 END\r\n\r\n\t/**\r\n     * Change cleantalk account email\r\n     */\r\n    jQuery(document).on('click', '#spbc-change-account-email', function(e) {\r\n        e.preventDefault();\r\n\r\n        let $this = jQuery(this);\r\n        let accountEmailField = jQuery('#spbc-account-email');\r\n        let accountEmail = accountEmailField.text();\r\n\r\n\t\tspbcToggleClass($this, 'active');\r\n\r\n        if ($this.hasClass('active')) {\r\n            $this.text($this.data('save-text'));\r\n            accountEmailField.attr('contenteditable', 'true');\r\n\t\t\taccountEmailField.focus();\r\n            accountEmailField.on('keydown', function(e) {\r\n                if (e.code === 'Enter') {\r\n                    e.preventDefault();\r\n                }\r\n            });\r\n            accountEmailField.on('input', function(e) {\r\n                if (e.inputType === 'insertParagraph') {\r\n                    e.preventDefault();\r\n                }\r\n            });\r\n        } else {\r\n            spbc_sendAJAXRequest(\r\n                {\r\n                    action: 'spbc_update_account_email',\r\n                    accountEmail: accountEmail,\r\n                },\r\n                {\r\n                    timeout: 5000,\r\n                    callback: function(result, data, params, obj) {\r\n                        if (result.success !== undefined && result.success === 'ok') {\r\n                            if (result.manuallyLink !== undefined) {\r\n                                jQuery('#spbc-key-manually-link').attr('href', result.manuallyLink);\r\n                            }\r\n                        }\r\n\r\n                        if (result.error !== undefined) {\r\n\t\t\t\t\t\t\r\n                            jQuery('#spbc-account-email').css('border-color', 'red');\r\n                        }\r\n                    },\r\n\t\t\t\t\terrorOutput: function(msg) {\r\n\t\t\t\t\t\tspbcModal.loaded = msg;\r\n\t\t\t\t\t\tspbcModal.open();\r\n\t\t\t\t\t}\r\n                },\r\n            );\r\n\r\n            accountEmailField.attr('contenteditable', 'false');\r\n            $this.text($this.data('default-text'));\r\n        }\r\n    });\r\n});\r\n\r\n/**\r\n * @param {string} className\r\n */\r\nfunction spbcToggleClass(arr, className) {\r\n\tfor (let i=0; i<arr.length; i++) {\r\n\t\tarr[i].classList.toggle(className);\r\n\t}\r\n}"],"names":["spbc_switchTab","tab","params","tab_name","classList","replace","searchParams","URLSearchParams","window","location","search","hashParam","set","hash","newRelativePathQuery","pathname","toString","history","replaceState","get","jQuery","hide","removeClass","addClass","data","action","spbcHighlightElement","target","times","setTimeout","additional","click","security","spbcSettings","ajax_nonce","callback","spbc_draw_settings_callback","notJson","spbc_sendAJAXRequest","result","obj","replaceWith","document","off","on","spbc_settings__show_description","self","this","attr","spbc_settings__show_recommendation","spbc_send_logs_callback","getElementById","substring","scrollIntoView","getElementsByClassName","spbcSettingsDependenciesbyId","settingsIDs","enable","tmp","push","forEach","settingID","i","arr","do_disable","elem","setAttribute","do_enable","removeAttribute","getAttribute","spbcSettingsDependencies","settingNames","split","event","checked","settingName","getElementsByName","children","label","setting_id","remove_desc_func","e","parent","length","hasClass","remove","after","append","css","top","position","left","spinner","empty","title","desc","remove_recommendation_func","spbcStartShowHide","next","show","spbctGenerateConfirmationCode","res","success","ajax","type","async","url","ajaxurl","text","spbctCheckConfirmationCode","radioButton","timeout","timer","element","code","val","removeAttr","clearTimeout","dialog","alert","spbc_banner_check","bannerChecker","setInterval","close_renew_banner","clearInterval","spbcToggleClass","className","let","toggle","String","prototype","printf","arg","formatted","arguments","before_formatted","indexOf","after_formatted","ready","modal","my","at","of","width","height","draggable","resizable","closeText","preventDefault","enableResend","buttons","Cancel","Ok","button","reload","key_changed","msg","spbcModal","open","putError","getTemplates","loaded","addEventListener","optionSelected","console","log","template_id","template_name","settings","insertAfter","close","templateNameInput","templateName","find","currentTarget","match","spbc_tab","ctrlKeyDown","debug","wpms","is_main_site","key_is_ok","secfw_enabled","which","keyCode","active_tab","$this","accountEmailField","accountEmail","focus","inputType","undefined","manuallyLink","error","errorOutput"],"mappings":"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"}