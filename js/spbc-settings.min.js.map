{"version":3,"file":"spbc-settings.min.js","sources":["spbc-settings.js"],"sourcesContent":["// Printf for JS\nString.prototype.printf = function(){\n    var formatted = this;\n    for( var arg in arguments ) {\n        var before_formatted = formatted.substring(0, formatted.indexOf(\"%s\", 0));\n        var after_formatted  = formatted.substring(formatted.indexOf(\"%s\", 0)+2, formatted.length);\n        formatted = before_formatted + arguments[arg] + after_formatted;\n    }\n    return formatted;\n};\n\n// Switching tabs\nfunction spbc_switchTab(tab, params){\n\n\tvar tab_name = tab.classList[1].replace('spbc_tab_nav-', '')\n\tjQuery('.spbc_tab_nav').removeClass('spbc_tab_nav--active');\n\tjQuery('.spbc_tab').removeClass('spbc_tab--active');\n\tjQuery(tab).addClass('spbc_tab_nav--active');\n\tjQuery('.spbc_tab-'+tab_name).addClass('spbc_tab--active');\n\n\tif(!jQuery(tab).data('loaded')){\n\t\tvar data = {\n\t\t\taction: 'spbc_settings__draw_elements',\n\t\t\ttab_name: tab_name,\n\t\t\tsecurity: spbcSettings.ajax_nonce\n\t\t};\n\t\tvar params = {\n\t\t\tcallback: spbc_draw_settings_callback,\n\t\t\tnotJson: true,\n            additional: params || null,\n\t\t};\n\t\tspbc_sendAJAXRequest( data, params, tab );\n\t}else if(params && params.action){\n        switch (params.action){\n            case 'highlight':\n                spbcHighlightElement(params.target, params.times);\n                break;\n            case 'click':\n                setTimeout(function(){\n                    jQuery('#'+params.additional.target).click();\n                }, 500);\n                break;\n        }\n\t}\n}\n\nfunction spbc_draw_settings_callback(result, data, params, obj){\n\n\tjQuery(obj).data('loaded', true);\n\tjQuery('.spbc_tab-'+data.tab_name).replaceWith(result);\n\tvar tab = jQuery('.spbc_tab-'+data.tab_name);\n\ttab.addClass('spbc_tab--active');\n\n\tjQuery(document).off( 'click', '.spbc_long_description__show');\n\tjQuery(document).on('click', '.spbc_long_description__show', function(){\n\t\tself = jQuery(this);\n\t\tspbc_settings__show_description(self, self.attr('setting'));\n\t});\n\n\tif(params.additional){\n\t    switch (params.additional.action) {\n            case 'highlight':\n\t\t        spbcHighlightElement(params.additional.target, params.additional.times);\n                break;\n            case 'click':\n                setTimeout(function(){\n\t\t            jQuery('#'+params.additional.target).click();\n                }, 500);\n                break;\n        }\n    }\n\n\tjQuery(tab).on('click', '.spbc_hint-send_'+data.tab_name, function(){\n\t\t\tjQuery('.spbc_hint-send_'+data.tab_name).hide();\n\t\tspbc_sendAJAXRequest(\n\t\t\t{action: 'spbc_send_'+data.tab_name, tab_name: data.tab_name},\n\t\t\t{callback: spbc_send_logs_callback}\n\t\t);\n\t});\n}\n\nfunction spbc_send_logs_callback(result, data, params, obj){\n\tjQuery('.spbc_tab_nav-'+data.tab_name).data('loaded', false);\n\tspbc_switchTab(document.getElementsByClassName('spbc_tab_nav-'+data.tab_name)[0]);\n}\n\n// Settings dependences\nfunction spbcSettingsDependenciesbyId(settingsIDs, enable){\n\n\tif(typeof settingsIDs === 'string'){\n\t\ttmp = [];\n\t\ttmp.push(settingsIDs);\n\t\tsettingsIDs = tmp;\n\t}\n\n\tenable = typeof enable === 'undefined' ? null : +enable;\n\n\tsettingsIDs.forEach(function(settingID, i, arr){\n\n\t\tvar elem = document.getElementById('spbc_setting_'+settingID),\n            do_disable = function(){elem.setAttribute('disabled', 'disabled');},\n            do_enable  = function(){elem.removeAttribute('disabled');};\n\n        if(enable !== null) // Set\n            enable === 1 ? do_enable() : do_disable();\n        else // Switch\n            elem.getAttribute('disabled') === null ? do_disable() : do_enable();\n\n\t});\n}\n\n// Settings dependencies\nfunction spbcSettingsDependencies(settingNames, enable){\n\n\t// Cast settingNames to array\n\tsettingNames = typeof settingNames === 'string' ? [settingNames] : settingNames;\n\tenable = typeof enable === 'undefined' ? null : +enable;\n\n\tsettingNames.forEach(function(settingName, i, arr){\n\n\t\tdocument.getElementsByName('spbc_settings['+settingName+']')\n\t\t\t.forEach(function( elem, i, arr ){\n\n\t\t\t\tvar\tdo_disable = function(){elem.setAttribute('disabled', 'disabled');},\n\t\t\t\t\tdo_enable  = function(){elem.removeAttribute('disabled');};\n\t\t\t\tif(enable !== null) // Set\n\t\t\t\t\tenable === 1 ? do_enable() : do_disable();\n\t\t\t\telse // Switch\n\t\t\t\t\telem.getAttribute('disabled') === null ? do_disable() : do_enable();\n\n\t\t\t});\n\t});\n}\n\nfunction spbc_settings__show_description(label, setting_id){\n\t\n\tvar remove_desc_func = function(e){\n\t\tif(typeof e === 'undefined' || ((jQuery(e.target).parent('.spbc_long_desc').length == 0 || jQuery(e.target).hasClass('spbc_long_desc__cancel')) && !jQuery(e.target).hasClass('spbc_long_description__show'))){\n\t\t\tjQuery('.spbc_long_desc').remove();\n\t\t\tjQuery(document).off('click', remove_desc_func);\n\t\t}\n\t};\n\t\n\tremove_desc_func();\n\t\n\tlabel.after(\"<div id='spbc_long_desc__\"+setting_id+\"' class='spbc_long_desc'></div>\");\n\tvar obj = jQuery('#spbc_long_desc__'+setting_id);\n\tobj.append(\"<i class='icon-spin1 animate-spin'></i>\")\n\t\t.append(\"<div class='spbc_long_desc__angle'></div>\")\n\t\t.css({\n\t\t\ttop: label.position().top - 5,\n\t\t\tleft: label.position().left + 25\n\t\t});\n\t\n\t\n\tspbc_sendAJAXRequest(\n\t\t{action: 'spbc_settings__get_description', setting_id: setting_id},\n\t\t{\n\t\t\tspinner: obj.children('img'),\n\t\t\tcallback: function(result, data, params, obj){\n\t\t\t\t\t\t\t\t\n\t\t\t\tobj.empty()\n\t\t\t\t\t.append(\"<div class='spbc_long_desc__angle'></div>\")\n\t\t\t\t\t.append(\"<i class='spbc_long_desc__cancel icon-cancel'></i>\")\n\t\t\t\t\t.append(\"<h3 class='spbc_long_desc__title'>\"+result.title+\"</h3>\")\n\t\t\t\t\t.append(\"<p>\"+result.desc+\"</p>\");\n\t\t\t\t\n\t\t\t\tjQuery(document).on('click', remove_desc_func);\n\t\t\t}\n\t\t},\n\t\tobj\n\t);\n}\n\n// Shows/hides full text\nfunction spbcStartShowHide(){\n\tjQuery('.spbcShortText')\n\t\t.off('mouseover' )\n\t\t.on('mouseover', function(){ jQuery(this).next().show(); })\n\tjQuery('.spbcFullText')\n\t\t.off('mouseout' )\n\t\t.on('mouseout',   function(){ jQuery(this).hide();  });\n}\n\n// Generate and save confirmation code\nfunction spbctGenerateConfirmationCode() {\n\n\tvar data = {};\n\tvar res = {};\n\tres.success = false;\n\tdata.security = spbcSettings.ajax_nonce;\n\tdata.action = 'spbc_generate_confirmation_code';\n\n\tjQuery.ajax({\n\t\ttype: \"POST\",\n\t\tasync: false,\n\t\turl: spbcSettings.ajaxurl,\n\t\tdata: data,\n\t\tsuccess: function(result){\n\t\t\tif(result.success) {\n\t\t\t\tres.success = true;\n\t\t\t} else {\n\t\t\t\tres.text = result.data;\n\t\t\t}\n\t\t},\n\t});\n\treturn res;\n}\n// Check confirmation code\nfunction spbctCheckConfirmationCode( radioButton, timeout, timer ) {\n\n\tvar element = radioButton;\n\tvar data = {};\n\tdata.security = spbcSettings.ajax_nonce;\n\tdata.action = 'spbc_check_confirmation_code';\n\tdata.code = jQuery('#confirmation-code input').val();\n\n\tjQuery.ajax({\n\t\ttype: \"POST\",\n\t\tasync: false,\n\t\turl: spbcSettings.ajaxurl,\n\t\tdata: data,\n\t\tsuccess: function(result){\n\t\t\tif(result.success) {\n\t\t\t\tjQuery('[name *= 2fa__enable]').attr(\"checked\", \"\");\n\t\t\t\telement.checked = true;\n\t\t\t\tjQuery('#spbc_setting_2fa__roles').removeAttr('disabled');\n\t\t\t\tjQuery('#spbc_setting_2fa__roles > option:first').attr('selected','selected');\n\t\t\t\tclearTimeout( timeout );\n\t\t\t\ttimer.remove();\n\t\t\t\tjQuery('#confirmation-code').dialog( \"close\" );\n\t\t\t} else {\n\t\t\t\talert('Code verification failed!');\n\t\t\t}\n\t\t},\n\t});\n\n}\n\n/**\n * Checking current account status for renew notice\n */\nfunction spbc_banner_check() {\n\tvar bannerChecker = setInterval( function() {\n\t\tspbc_sendAJAXRequest(\n\t\t\t{action: 'spbc_settings__check_renew_banner'},\n\t\t\t{\n\t\t\t\tcallback: function(result, data, params, obj){\n\t\t\t\t\tif (result.close_renew_banner) {\n\t\t\t\t\t\tif (jQuery('#spbc_renew_notice').length)\n\t\t\t\t\t\t\tjQuery('#spbc_renew_notice').hide('slow');\n\t\t\t\t\t\tif (jQuery('#spbc_trial_notice').length)\n\t\t\t\t\t\t\tjQuery('#spbc_trial_notice').hide('slow');\n\t\t\t\t\t\tclearInterval(bannerChecker);\n\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}, 60000);\n}\n\njQuery(document).ready(function(){\n\t\n\tjQuery('#spbc_gdpr_open_modal').on('click', function(){\n\t\tjQuery('#gdpr_dialog').dialog({\n\t\t\tmodal:true, \n\t\t\tshow: true,\n\t\t\tposition: { my: \"center\", at: \"center\", of: window },\n\t\t\twidth: +(jQuery('#wpbody').width() / 100 * 70), // 70% of #wpbody\n\t\t\theight: 'auto',\n\t\t\ttitle: 'GDPR compliance',\n\t\t\tdraggable: false,\n\t\t\tresizable: false,\n\t\t\tcloseText: \"Close\",\n\t\t});\n\t});\n\n\t// Checking email receiving possibility for activation 2FA\n\tjQuery(document).on('click', '[name*=fa__enable]:not([value=0]),#confirmation-code--resend', function(e){\n\n\t\te.preventDefault();\n\n\t\tjQuery('#confirmation-code--resend').attr('disabled', 'disabled')\n\t\t\t.append('<div class=\"circle circle--small -animation--circle -animation--30s \"><div class=\"circle-inner\"></div></div>');\n\t\tvar enableResend = setTimeout(function(){\n\t\t\tjQuery('#confirmation-code--resend').removeAttr('disabled');\n\t\t\tjQuery('#confirmation-code--resend>.circle').remove();\n\t\t}, 30000);\n\n\t\tvar res = spbctGenerateConfirmationCode();\n\t\tif( res.success ) {\n\t\t\tjQuery('#confirmation-code input').val('');\n\t\t\tjQuery('#confirmation-code').dialog({\n\t\t\t\tmodal: true,\n\t\t\t\ttitle: 'Confirmation code',\n\t\t\t\twidth: 310,\n\t\t\t\tbuttons: {\n\t\t\t\t\tCancel: function() {\n\t\t\t\t\t\tjQuery( this ).dialog( \"close\" );\n\t\t\t\t\t\tclearTimeout( enableResend );\n\t\t\t\t\t\tjQuery('#confirmation-code--resend>.circle').remove();\n\t\t\t\t\t},\n\t\t\t\t\tOk: function() {\n\t\t\t\t\t\tspbctCheckConfirmationCode(e.target, enableResend, jQuery('#confirmation-code--resend>.circle'));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdraggable: false,\n\t\t\t\tresizable: false,\n\t\t\t});\n\t\t} else {\n\t\t\talert(res.text);\n\t\t}\n\t});\n\t\n\tif (jQuery('#spbc_renew_notice').length || jQuery('#spbc_trial_notice').length) {\n\t\tspbc_banner_check();\n\t}\n\n\t// Sync button\n\tjQuery('#spbc_button__sync').on('click', function(){\n\t\tspbc_sendAJAXRequest(\n\t\t\t{action: 'spbc_sync'},\n\t\t\t{\n\t\t\t\ttimeout: 25000,\n\t\t\t\tbutton: document.getElementById('spbc_button__sync' ),\n\t\t\t\tspinner: jQuery('#spbc_button__sync .spbc_preloader_button' ),\n\t\t\t\tcallback: function(result, data, params, obj){\n\t\t\t\t\tjQuery('#spbc_button__sync .spbc_success').show(300);\n\t\t\t\t\tsetTimeout(function(){jQuery('#spbc_button__sync .spbc_success').hide(300);}, 2000);\n\t\t\t\t\tif(result.reload)\n\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t});\n\n\tif( spbcSettings.key_changed ){\n\t\tjQuery('#spbc_button__sync').click();\n\t}\n\n\t// Get Key Auto button\n\tjQuery(document).on('click', '#spbc_setting_get_key_auto', function(){\n\t\tspbc_sendAJAXRequest(\n\t\t\t{action: 'spbc_get_key_auto'},\n\t\t\t{\n\t\t\t\ttimeout: 25000,\n\t\t\t\tbutton: document.getElementById('spbc_setting_get_key_auto' ),\n\t\t\t\tspinner: jQuery('#spbc_setting_get_key_auto .spbc_preloader_button' ),\n\t\t\t\tcallback: function(result, data, params, obj){\n\t\t\t\t\tjQuery('#spbc_setting_get_key_auto .spbc_success').show(300);\n\t\t\t\t\tsetTimeout(function(){jQuery('#spbc_setting_get_key_auto .spbc_success').hide(300);}, 2000);\n\t\t\t\t\tif(result.reload)\n\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\tif(result.getTemplates) {\n\t\t\t\t\t\tcleantalkModal.loaded = result.getTemplates;\n\t\t\t\t\t\tcleantalkModal.open();\n\t\t\t\t\t\tdocument.addEventListener(\"cleantalkModalClosed\", function( e ) {\n\t\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t});\n\n\t// Import settings\n\tjQuery( document ).on('click', '#spbc_settings_templates_import_button', function(){\n\t\tjQuery('#spbc-ajax-result').remove();\n\t\tvar optionSelected = jQuery('option:selected', jQuery('#spbc_settings_templates_import'));\n\t\tvar templateNameInput = jQuery('#spbc_settings_templates_import_name');\n\t\ttemplateNameInput.css('border-color', 'inherit');\n\t\tif( typeof optionSelected.data('id') === \"undefined\" ) {\n\t\t\tconsole.log( 'Attribute \"data-id\" not set for the option.' );\n\t\t\treturn;\n\t\t}\n\t\tvar data = {\n\t\t\t'template_id' : optionSelected.data('id'),\n\t\t\t'template_name' : optionSelected.data('name'),\n\t\t\t'settings' : optionSelected.data('settings')\n\t\t};\n\t\tvar button = this;\n\t\tspbc_sendAJAXRequest(\n\t\t\t{action: 'spbc_settings_templates_import', data: data},\n\t\t\t{\n\t\t\t\ttimeout: 25000,\n\t\t\t\tbutton: button,\n\t\t\t\tspinner: jQuery('#spbc_settings_templates_import_button .spbc_preloader_button' ),\n\t\t\t\tnotJson: true,\n\t\t\t\tcallback: function(result, data, params, obj){\n\t\t\t\t\tif(result.success) {\n\t\t\t\t\t\tjQuery( \"<p id='spbc-ajax-result' class='success'>\" + result.data + \"</p>\" ).insertAfter( jQuery(button) );\n\t\t\t\t\t\tjQuery('#spbc_settings_templates_import_button .spbc_success').show(300);\n\t\t\t\t\t\tsetTimeout(function(){jQuery('#spbc_settings_templates_import_button .spbc_success').hide(300);}, 2000);\n\t\t\t\t\t\tdocument.addEventListener(\"cleantalkModalClosed\", function( e ) {\n\t\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetTimeout(function(){cleantalkModal.close()}, 2000);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjQuery( \"<p id='spbc-ajax-result' class='error'>\" + result.data + \"</p>\" ).insertAfter( jQuery(button) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t});\n\n\t// Export settings\n\tjQuery( document ).on('click', '#spbc_settings_templates_export_button', function(){\n\t\tjQuery('#spbc-ajax-result').remove();\n\t\tvar optionSelected = jQuery('option:selected', jQuery('#spbc_settings_templates_export'));\n\t\tvar templateNameInput = jQuery('#spbc_settings_templates_export_name');\n\t\ttemplateNameInput.css('border-color', 'inherit');\n\t\tif( typeof optionSelected.data('id') === \"undefined\" ) {\n\t\t\tconsole.log( 'Attribute \"data-id\" not set for the option.' );\n\t\t\treturn;\n\t\t}\n\t\tif( optionSelected.data('id') === 'new_template' ) {\n\t\t\tvar templateName = templateNameInput.val();\n\t\t\tif( templateName === '' ) {\n\t\t\t\ttemplateNameInput.css('border-color', 'red');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar data = {\n\t\t\t\t'template_name' : templateName\n\t\t\t}\n\t\t} else {\n\t\t\tvar data = {\n\t\t\t\t'template_id' : optionSelected.data('id')\n\t\t\t}\n\t\t}\n\t\tvar button = this;\n\t\tspbc_sendAJAXRequest(\n\t\t\t{action: 'spbc_settings_templates_export', data: data},\n\t\t\t{\n\t\t\t\ttimeout: 25000,\n\t\t\t\tbutton: button,\n\t\t\t\tspinner: jQuery('#spbc_settings_templates_export_button .spbc_preloader_button' ),\n\t\t\t\tnotJson: true,\n\t\t\t\tcallback: function(result, data, params, obj){\n\t\t\t\t\tif(result.success) {\n\t\t\t\t\t\tjQuery( \"<p id='spbc-ajax-result' class='success'>\" + result.data + \"</p>\" ).insertAfter( jQuery(button) );\n\t\t\t\t\t\tjQuery('#spbc_settings_templates_export_button .spbc_success').show(300);\n\t\t\t\t\t\tsetTimeout(function(){jQuery('#spbc_settings_templates_export_button .spbc_success').hide(300);}, 2000);\n\t\t\t\t\t\tdocument.addEventListener(\"cleantalkModalClosed\", function( e ) {\n\t\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetTimeout(function(){cleantalkModal.close()}, 2000);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjQuery( \"<p id='spbc-ajax-result' class='error'>\" + result.data + \"</p>\" ).insertAfter( jQuery(button) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t});\n\n\t// Reset settings\n\tjQuery( document ).on('click', '#spbc_settings_templates_reset_button', function(){\n\t\tvar button = this;\n\t\tspbc_sendAJAXRequest(\n\t\t\t{action: 'spbc_settings_templates_reset'},\n\t\t\t{\n\t\t\t\ttimeout: 25000,\n\t\t\t\tbutton: button,\n\t\t\t\tspinner: jQuery('#spbc_settings_templates_reset_button .spbc_preloader_button' ),\n\t\t\t\tnotJson: true,\n\t\t\t\tcallback: function(result, data, params, obj){\n\t\t\t\t\tif(result.success) {\n\t\t\t\t\t\tjQuery( \"<p id='spbc-ajax-result' class='success'>\" + result.data + \"</p>\" ).insertAfter( jQuery(button) );\n\t\t\t\t\t\tjQuery('#spbc_settings_templates_reset_button .spbc_success').show(300);\n\t\t\t\t\t\tsetTimeout(function(){jQuery('#spbc_settings_templates_reset_button .spbc_success').hide(300);}, 2000);\n\t\t\t\t\t\tdocument.addEventListener(\"cleantalkModalClosed\", function( e ) {\n\t\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetTimeout(function(){cleantalkModal.close()}, 2000);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjQuery( \"<p id='spbc-ajax-result' class='error'>\" + result.data + \"</p>\" ).insertAfter( jQuery(button) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t});\n\n\tjQuery(document).on('change', '#spbc_settings_templates_export',function(){\n\t\tvar optionSelected = jQuery(\"option:selected\", this);\n\t\tif ( optionSelected.data(\"id\") === 'new_template' ) {\n\t\t\tjQuery(this).parent().parent().find('#spbc_settings_templates_export_name').show();\n\t\t} else {\n\t\t\tjQuery(this).parent().parent().find('#spbc_settings_templates_export_name').hide();\n\t\t}\n\t});\n\n\t//* TAB_CONTROL\n\t\n\t\tjQuery('.spbc_tab_nav-summary').data('loaded', true); // Summary tab loaded by default\n\t\tjQuery('.spbc_tabs_nav_wrapper').on('click', '.spbc_tab_nav', function(event){\n\t\t\tspbc_switchTab(event.currentTarget);\n\t\t});\n\t\t\n\t\t// Get additional params\n        var params = {\n            target: location.search.match(/spbc_target=(\\S*?)(&|$)/) ? location.search.match(/spbc_target=(\\S*?)(&|$)/)[1] : null,\n            action: location.search.match(/spbc_action=(\\S*?)(&|$)/) ? location.search.match(/spbc_action=(\\S*?)(&|$)/)[1] : null,\n            times: location.search.match(/spbc_times=(\\S*?)(&|$)/)   ? location.search.match(/spbc_times=(\\S*?)(&|$)/)[1]  : 3,\n        };\n        // Legacy support\n        params.target = location.search.match(/spbc_highlight=(\\S*?)(&|$)/) ? location.search.match(/spbc_highlight=(\\S*?)(&|$)/)[1] : params.target;\n        params.action = location.search.search(/spbc_highlight=(\\S*?)(&|$)/) != -1\n            ? 'highlight'\n            : params.action;\n\n\t\t// Get open tab form query\n\t\tvar spbc_tab = document.getElementsByClassName('spbc_tab_nav-' + (location.search.match(/spbc_tab=(\\S*?)(&|$)/) ? location.search.match(/spbc_tab=(\\S*?)(&|$)/)[1] : ''))[0] || null;\n\n\t\t// TAB SWITCHING\n\t\t// Switch by URL\n\t\tif(spbc_tab){\n\n\t\t// Switch to DEBUG\n\t\t}else if( +spbcSettings.debug ){\n\t\t\tspbc_tab = document.getElementsByClassName('spbc_tab_nav-debug')[0];\n\t\t// Switch by DEFAULT\n\t\t}else if( +spbcSettings.wpms && !+spbcSettings.is_main_site){\n\t\t\tspbc_tab = document.getElementsByClassName('spbc_tab_nav-security_log')[0];\n\t\t// Switch if KEY IS BAD\n\t\t}else if( +spbcSettings.key_is_ok ){\n\t\t\t// spbc_tab = document.getElementsByClassName('spbc_tab_nav-summary')[0];\n\t\t\tspbc_tab = document.getElementsByClassName('spbc_tab_nav-scanner')[0]; \n\t\t// Switch if KEY IS BAD\n\t\t}else{\n\t\t\tspbc_tab = document.getElementsByClassName('spbc_tab_nav-settings_general')[0];\n\t\t\tparams = {\n\t\t\t    target: 'spbc_key',\n                action: 'highlight',\n                times: 3,\n            };\n\t\t}\n\t\t\n\t\t// Switch tab\n\t\tif(spbc_tab) spbc_switchTab(spbc_tab, params);\n\t\t\n\t//*/ TAB_CONROL END\n});"],"names":["spbc_switchTab","tab","params","tab_name","classList","replace","jQuery","removeClass","addClass","data","action","spbcHighlightElement","target","times","setTimeout","additional","click","security","spbcSettings","ajax_nonce","callback","spbc_draw_settings_callback","notJson","spbc_sendAJAXRequest","result","obj","replaceWith","document","off","on","self","this","spbc_settings__show_description","attr","hide","spbc_send_logs_callback","getElementsByClassName","spbcSettingsDependenciesbyId","settingsIDs","enable","tmp","push","forEach","settingID","i","arr","do_disable","elem","setAttribute","getElementById","do_enable","removeAttribute","getAttribute","spbcSettingsDependencies","settingNames","settingName","getElementsByName","label","setting_id","remove_desc_func","e","parent","length","hasClass","remove","after","append","css","top","position","left","spinner","children","empty","title","desc","spbcStartShowHide","next","show","spbctGenerateConfirmationCode","res","success","ajax","type","async","url","ajaxurl","text","spbctCheckConfirmationCode","radioButton","timeout","timer","element","code","val","checked","removeAttr","clearTimeout","dialog","alert","spbc_banner_check","bannerChecker","setInterval","close_renew_banner","clearInterval","String","prototype","printf","arg","formatted","arguments","before_formatted","substring","indexOf","after_formatted","ready","modal","my","at","of","window","width","height","draggable","resizable","closeText","preventDefault","enableResend","buttons","Cancel","Ok","button","reload","location","key_changed","getTemplates","cleantalkModal","loaded","open","addEventListener","optionSelected","template_id","template_name","settings","insertAfter","close","console","log","templateNameInput","templateName","find","event","currentTarget","search","match","spbc_tab","debug","wpms","is_main_site","key_is_ok"],"mappings":"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"}