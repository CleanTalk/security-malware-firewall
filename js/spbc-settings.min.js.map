{"version":3,"sources":["spbc-settings.js"],"names":["spbc_switchTab","tab","params","tab_name","classList","replace","jQuery","removeClass","addClass","data","action","spbcHighlightElement","target","times","setTimeout","additional","click","security","spbcSettings","ajax_nonce","callback","spbc_draw_settings_callback","notJson","spbc_sendAJAXRequest","result","obj","replaceWith","console","log","on","hide","spbc_send_logs_callback","document","getElementsByClassName","spbcSettingsDependencies","settingsIDs","enable","tmp","push","forEach","settingID","i","arr","do_disable","elem","setAttribute","do_enable","removeAttribute","getElementById","getAttribute","spbc_settings__show_description","label","setting_id","remove_desc_func","e","parent","length","hasClass","remove","off","after","append","css","top","position","left","spinner","children","empty","title","desc","spbcStartShowHide","this","next","show","prev","String","prototype","printf","formatted","arg","arguments","before_formatted","substring","indexOf","after_formatted","ready","dialog","modal","my","at","of","window","width","height","draggable","resizable","closeText","event","currentTarget","location","search","match","spbc_tab","debug","wpms","is_main_site","key_is_ok"],"mappings":"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","file":"spbc-settings.min.js","sourcesContent":["// Printf for JS\r\nString.prototype.printf = function(){\r\n    var formatted = this;\r\n    for( var arg in arguments ) {\r\n        var before_formatted = formatted.substring(0, formatted.indexOf(\"%s\", 0));\r\n        var after_formatted  = formatted.substring(formatted.indexOf(\"%s\", 0)+2, formatted.length);\r\n        formatted = before_formatted + arguments[arg] + after_formatted;\r\n    }\r\n    return formatted;\r\n};\r\n\r\n// Switching tabs\r\nfunction spbc_switchTab(tab, params){\r\n\r\n\tvar tab_name = tab.classList[1].replace('spbc_tab_nav-', '')\r\n\tjQuery('.spbc_tab_nav').removeClass('spbc_tab_nav--active');\r\n\tjQuery('.spbc_tab').removeClass('spbc_tab--active');\r\n\tjQuery(tab).addClass('spbc_tab_nav--active');\r\n\tjQuery('.spbc_tab-'+tab_name).addClass('spbc_tab--active');\r\n\r\n\tif(!jQuery(tab).data('loaded')){\r\n\t\tvar data = {\r\n\t\t\taction: 'spbc_settings__draw_elements',\r\n\t\t\ttab_name: tab_name,\r\n\t\t\tsecurity: spbcSettings.ajax_nonce\r\n\t\t};\r\n\t\tvar params = {\r\n\t\t\tcallback: spbc_draw_settings_callback,\r\n\t\t\tnotJson: true,\r\n            additional: params || null,\r\n\t\t};\r\n\t\tspbc_sendAJAXRequest( data, params, tab );\r\n\t}else if(params && params.action){\r\n        switch (params.action){\r\n            case 'highlight':\r\n                spbcHighlightElement(params.target, params.times);\r\n                break;\r\n            case 'click':\r\n                setTimeout(function(){\r\n                    jQuery('#'+params.additional.target).click();\r\n                }, 500);\r\n                break;\r\n        }\r\n\t}\r\n}\r\n\r\nfunction spbc_draw_settings_callback(result, data, params, obj){\r\n\r\n\tjQuery(obj).data('loaded', true);\r\n\tjQuery('.spbc_tab-'+data.tab_name).replaceWith(result);\r\n\tvar tab = jQuery('.spbc_tab-'+data.tab_name);\r\n\ttab.addClass('spbc_tab--active');\r\n\r\n\tif(params.additional){\r\n\t    switch (params.additional.action) {\r\n            case 'highlight':\r\n\t\t        spbcHighlightElement(params.additional.target, params.additional.times);\r\n                break;\r\n            case 'click':\r\n                setTimeout(function(){\r\n\t\t            jQuery('#'+params.additional.target).click();\r\n\t\t            console.log('some');\r\n                }, 500);\r\n                break;\r\n        }\r\n    }\r\n\r\n\tjQuery(tab).on('click', '.spbc_hint-send_'+data.tab_name, function(){\r\n\t\t\tjQuery('.spbc_hint-send_'+data.tab_name).hide();\r\n\t\tspbc_sendAJAXRequest(\r\n\t\t\t{action: 'spbc_send_'+data.tab_name, tab_name: data.tab_name},\r\n\t\t\t{callback: spbc_send_logs_callback}\r\n\t\t);\r\n\t});\r\n}\r\n\r\nfunction spbc_send_logs_callback(result, data, params, obj){\r\n\tjQuery('.spbc_tab_nav-'+data.tab_name).data('loaded', false);\r\n\tspbc_switchTab(document.getElementsByClassName('spbc_tab_nav-'+data.tab_name)[0]);\r\n}\r\n\r\n// Settings dependences\r\nfunction spbcSettingsDependencies(settingsIDs, enable){\r\n\r\n\tif(typeof settingsIDs === 'string'){\r\n\t\ttmp = [];\r\n\t\ttmp.push(settingsIDs);\r\n\t\tsettingsIDs = tmp;\r\n\t}\r\n\r\n\tenable = typeof enable === 'undefined' ? null : +enable;\r\n\r\n\tsettingsIDs.forEach(function(settingID, i, arr){\r\n\r\n\t\tvar elem = document.getElementById('spbc_setting_'+settingID),\r\n            do_disable = function(){elem.setAttribute('disabled', 'disabled');},\r\n            do_enable  = function(){elem.removeAttribute('disabled');};\r\n\r\n        if(enable !== null) // Set\r\n            enable === 1 ? do_enable() : do_disable();\r\n        else // Switch\r\n            elem.getAttribute('disabled') === null ? do_enable() : do_disable();\r\n\r\n\t});\r\n}\r\n\r\nfunction spbc_settings__show_description(label, setting_id){\r\n\t\r\n//\t!jQuery(e.target).hasClass('spbc_long_description__show')\r\n\t\r\n\tvar remove_desc_func = function(e){\r\n\t\tif(typeof e === 'undefined' || ((jQuery(e.target).parent('.spbc_long_desc').length == 0 || jQuery(e.target).hasClass('spbc_long_desc__cancel')) && !jQuery(e.target).hasClass('spbc_long_description__show'))){\r\n\t\t\tjQuery('.spbc_long_desc').remove();\r\n\t\t\tjQuery(document).off('click', remove_desc_func);\r\n\t\t}\r\n\t};\r\n\t\r\n\tremove_desc_func();\r\n\t\r\n\tlabel.after(\"<div id='spbc_long_desc__\"+setting_id+\"' class='spbc_long_desc'></div>\");\r\n\tvar obj = jQuery('#spbc_long_desc__'+setting_id);\r\n\tobj.append(\"<i class='icon-spin1 animate-spin'></i>\")\r\n\t\t.append(\"<div class='spbc_long_desc__angle'></div>\")\r\n\t\t.css({\r\n\t\t\ttop: label.position().top - 5,\r\n\t\t\tleft: label.position().left + 25\r\n\t\t});\r\n\t\r\n\t\r\n\tspbc_sendAJAXRequest(\r\n\t\t{action: 'spbc_settings__get_description', setting_id: setting_id},\r\n\t\t{\r\n\t\t\tspinner: obj.children('img'),\r\n\t\t\tcallback: function(result, data, params, obj){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\tobj.empty()\r\n\t\t\t\t\t.append(\"<div class='spbc_long_desc__angle'></div>\")\r\n\t\t\t\t\t.append(\"<i class='spbc_long_desc__cancel icon-cancel'></i>\")\r\n\t\t\t\t\t.append(\"<h3 class='spbc_long_desc__title'>\"+result.title+\"</h3>\")\r\n\t\t\t\t\t.append(\"<p>\"+result.desc+\"</p>\");\r\n\t\t\t\t\r\n\t\t\t\tjQuery(document).on('click', remove_desc_func);\r\n\t\t\t}\r\n\t\t},\r\n\t\tobj\r\n\t);\r\n}\r\n\r\n// Shows/hides full text\r\nfunction spbcStartShowHide(){\r\n\tjQuery('.spbcShortText').on('mouseover', function(){ jQuery(this).hide(); jQuery(this).next().show(); });\r\n\tjQuery('.spbcFullText').on('mouseout',   function(){ jQuery(this).hide(); jQuery(this).prev().show(); });\r\n}\r\n\r\njQuery(document).ready(function(){\r\n\t\r\n\tjQuery('#spbc_gdpr_open_modal').on('click', function(){\r\n\t\tjQuery('#gdpr_dialog').dialog({\r\n\t\t\tmodal:true, \r\n\t\t\tshow: true,\r\n\t\t\tposition: { my: \"center\", at: \"center\", of: window },\r\n\t\t\twidth: +(jQuery('#wpbody').width() / 100 * 70), // 70% of #wpbody\r\n\t\t\theight: 'auto',\r\n\t\t\ttitle: 'GDPR compliance',\r\n\t\t\tdraggable: false,\r\n\t\t\tresizable: false,\r\n\t\t\tcloseText: \"Close\",\r\n\t\t});\r\n\t});\r\n\t\r\n\t\r\n\t//* TAB_CONROL\r\n\t\r\n\t\tjQuery('.spbc_tab_nav-summary').data('loaded', true); // Summary tab loaded by default\r\n\t\tjQuery('.spbc_tabs_nav_wrapper').on('click', '.spbc_tab_nav', function(event){\r\n\t\t\tspbc_switchTab(event.currentTarget);\r\n\t\t});\r\n\t\t\r\n\t\t// Get additional params\r\n        var params = {\r\n            target: location.search.match(/spbc_target=(\\S*?)(&|$)/) ? location.search.match(/spbc_target=(\\S*?)(&|$)/)[1] : null,\r\n            action: location.search.match(/spbc_action=(\\S*?)(&|$)/) ? location.search.match(/spbc_action=(\\S*?)(&|$)/)[1] : null,\r\n            times: location.search.match(/spbc_times=(\\S*?)(&|$)/)   ? location.search.match(/spbc_times=(\\S*?)(&|$)/)[1]  : 3,\r\n        };\r\n        // Legacy support\r\n        params.target = location.search.match(/spbc_highlight=(\\S*?)(&|$)/) ? location.search.match(/spbc_highlight=(\\S*?)(&|$)/)[1] : params.target;\r\n        params.action = location.search.search(/spbc_highlight=(\\S*?)(&|$)/) != -1\r\n            ? 'highlight'\r\n            : params.action;\r\n\r\n\t\t// Get open tab form query\r\n\t\tvar spbc_tab = document.getElementsByClassName('spbc_tab_nav-' + (location.search.match(/spbc_tab=(\\S*?)(&|$)/) ? location.search.match(/spbc_tab=(\\S*?)(&|$)/)[1] : ''))[0] || null;\r\n\r\n\t\t// TAB SWITCHING\r\n\t\t// Switch by URL\r\n\t\tif(spbc_tab){\r\n\r\n\t\t// Switch to DEBUG\r\n\t\t}else if( +spbcSettings.debug ){\r\n\t\t\tspbc_tab = document.getElementsByClassName('spbc_tab_nav-debug')[0];\r\n\t\t// Switch by DEFAULT\r\n\t\t}else if( +spbcSettings.wpms && !+spbcSettings.is_main_site){\r\n\t\t\tspbc_tab = document.getElementsByClassName('spbc_tab_nav-security_log')[0];\r\n\t\t// Switch if KEY IS BAD\r\n\t\t}else if( +spbcSettings.key_is_ok ){\r\n\t\t\t// spbc_tab = document.getElementsByClassName('spbc_tab_nav-summary')[0];\r\n\t\t\tspbc_tab = document.getElementsByClassName('spbc_tab_nav-scanner')[0]; \r\n\t\t// Switch if KEY IS BAD\r\n\t\t}else{\r\n\t\t\tspbc_tab = document.getElementsByClassName('spbc_tab_nav-settings_general')[0];\r\n\t\t\tparams = {\r\n\t\t\t    target: 'spbc_key',\r\n                action: 'highlight',\r\n                times: 3,\r\n            };\r\n\t\t}\r\n\t\t\r\n\t\t// Switch tab\r\n\t\tif(spbc_tab) spbc_switchTab(spbc_tab, params);\r\n\t\t\r\n\t//*/ TAB_CONROL END\r\n});"]}