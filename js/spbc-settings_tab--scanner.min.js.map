{"version":3,"file":"spbc-settings_tab--scanner.min.js","sources":["spbc-settings_tab--scanner.js"],"sourcesContent":["function spbc_popup_tip___show(show_icon){\r\n\r\n\tvar tip_title = show_icon.attr('spbc_tip_title') || null;\r\n\tvar\ttip_text  = show_icon.attr('spbc_tip_text')  || null;\r\n\tvar remove_desc_func = function(e){\r\n\r\n\t\tif(\r\n\t\t\ttypeof e === 'undefined' ||\r\n\t\t\t(\r\n\t\t\t\t(jQuery(e.target).parent('.spbc_popup_tip--wrapper').length == 0 || jQuery(e.target).hasClass('spbc_popup_tip--icon---cancel')) &&\r\n\t\t\t\t!jQuery(e.target).hasClass('spbc_popup_tip--icon---show')\r\n\t\t\t)\r\n\t\t){\r\n\t\t\tjQuery('.spbc_popup_tip--wrapper').hide();\r\n\t\t\tjQuery(document).off('click', remove_desc_func);\r\n\t\t}\r\n\t};\r\n\r\n\tremove_desc_func();\r\n\r\n\tshow_icon.after(\"<div class='spbc_popup_tip--wrapper'></div>\");\r\n\r\n\tvar obj = jQuery('.spbc_popup_tip--wrapper');\r\n\r\n\tobj.empty()\r\n\t\t.append(\"<div class='spbc_popup_tip--angle'></div>\")\r\n\t\t.css({\r\n\t\t\ttop: show_icon.position().top - 2,\r\n\t\t\tleft: show_icon.position().left + 25\r\n\t\t});\r\n\tobj.append(\"<i class='spbc_popup_tip--icon---cancel icon-cancel'></i>\")\r\n\t\t.append(\"<h3 class='spbc_popup_tip--title'>\" + tip_title + \"</h3>\")\r\n\t\t.append(\"<p class='spbc_popup_tip--text'>\" + tip_text + \"</p>\");\r\n\r\n\tjQuery(document).on('click', remove_desc_func);\r\n\tshow_icon.parents('tr').on('mouseout', remove_desc_func);\r\n}\r\n\r\nfunction spbc_scanner_button_file_view_event(obj){\r\n\tvar self = jQuery(obj);\r\n\tvar data = {\r\n\t\taction: 'spbc_scanner_file_view',\r\n\t\tfile_id: self.parents('.row-actions').attr('uid'),\r\n\t};\r\n\tvar params = {\r\n\t\tspinner: self.parent().siblings('.tbl-preloader--tiny'),\r\n\t\tcallback: spbc_scannerButtonView_callback,\r\n\t\terrorOutput: function(msg){ spbcModal.open().putError( msg ); },\r\n\t};\r\n\tspbc_sendAJAXRequest(data, params);\r\n}\r\n\r\n/**\r\n * Delete file from analysis log\r\n */\r\nfunction spbc_scanner_analysis_log_delete_from_log(obj) {\r\n\r\n\tlet fileIds = [];\r\n\tconst self = jQuery(obj);\r\n\tlet spinner;\r\n\r\n\tif ( jQuery(obj).hasClass('tbl-row_action') ) {\r\n\t\tfileIds.push(self.parents('.row-actions').attr('uid'));\r\n\t\tspinner = self.parent().siblings('.tbl-preloader--tiny');\r\n\t} else {\r\n\t\tconst selectedItems = self.closest('#spbc_tbl__scanner_analysis_log').find('.cb-select:checked');\r\n\t\tif (selectedItems.length === 0) {\r\n\t\t\talert('Please, select elements.');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tselectedItems.each(function (index, element) {\r\n\t\t\tconst elementId = jQuery(element).val();\r\n\t\t\tfileIds.push(elementId);\r\n\t\t});\r\n\t\tspinner = self.children('.tbl-preloader--small');\r\n\t}\r\n\r\n\tconst data = {\r\n\t\taction: 'spbc_scanner_analysis_log_delete_from_log',\r\n\t\tfile_ids: fileIds,\r\n\t};\r\n\r\n\tvar params = {\r\n\t\tspinner: spinner,\r\n\t\tcallback: function() { window.location.reload(); },\r\n\t};\r\n\r\n\tspbc_sendAJAXRequest(data, params);\r\n}\r\n\r\nfunction spbc_scanner_button_page_view_event(obj){\r\n\tvar self = jQuery(obj);\r\n\tvar data = {\r\n\t\taction: 'spbc_scanner_page_view',\r\n\t\tpage_url: self.parents('.row-actions').attr('uid'),\r\n\t};\r\n\tvar params = {\r\n\t\tspinner: self.parent().siblings('.tbl-preloader--tiny'),\r\n\t\tcallback: spbc_scannerButtonView_callback,\r\n\t\terrorOutput: function(msg){ spbcModal.open().putError( msg ); },\r\n\t};\r\n\r\n\tlet wp_wrap = jQuery('#wpwrap')\r\n\tlet dialog_window = jQuery('#spbc_dialog')\r\n\r\n\tdialog_window.dialog({\r\n\t\tmodal:true,\r\n\t\ttitle: 'Loading..',\r\n\t\tposition: { my: \"center top\", at: \"center top+100px\" , of: window },\r\n\t\twidth: +(wp_wrap.width() / 100 * 90),\r\n\t\tshow: { effect: \"blind\", duration: 500 },\r\n\t\tdraggable: false,\r\n\t\tresizable: false,\r\n\t\tcloseText: \"X\",\r\n\t\tclasses: {\"ui-dialog\": 'spbc---top'},\r\n\t\topen: function(event, ui) {\r\n\t\t\tevent.target.style.overflow = 'auto';\r\n\t\t\tjQuery('#spbc_dialog').height((document.documentElement.clientHeight) / 100 * 25);\r\n\t\t},\r\n\t\tbeforeClose: function(event, ui) {\r\n\t\t\tdocument.body.style.overflow = 'auto';\r\n\t\t\tjQuery('#spbc_dialog').empty();\r\n\t\t},\r\n\t})\r\n\r\n\tdialog_window.append('<img id=\"spbc_file_view_preloader\" alt=\"Wait for downloading\" ' +\r\n\t\t'class=\"spbc_preloader\" ' +\r\n\t\t'src=\"../../wp-content/plugins/security-malware-firewall/images/preloader2.gif\" ' +\r\n\t\t'style=\"' +\r\n\t\t'display: block; ' +\r\n\t\t'position: absolute; ' +\r\n\t\t'\">')\r\n\r\n\tlet spinner = jQuery('#spbc_file_view_preloader')\r\n\tlet size_multiplier = (wp_wrap.width() * 0.0004)\r\n\r\n\tspinner.height(128 * size_multiplier)\r\n\tspinner.width(128 * size_multiplier)\r\n\tspinner.css({left: dialog_window.width()/2 - (128 * size_multiplier / 2)})\r\n\tspinner.css({top: dialog_window.height()/2 - (128 * size_multiplier / 2)})\r\n\r\n\tspbc_sendAJAXRequest(data, params);\r\n}\r\n\r\nfunction spbc_scannerButtonView_callback(result){\r\n\r\n\tlet dialog_window = jQuery('#spbc_dialog')\r\n\tdialog_window.empty();\r\n\r\n\tjQuery('#spbc_file_view_preloader').css({display:'none'})\r\n\r\n\tlet row_template = '<div class=\"spbc_view_file_row_wrapper\"><span class=\"spbc_view_file_row_num\">%s</span><p class=\"spbc_view_file_row\">%s</p><br /></div>';\r\n\r\n\tfor(let row in result.file){\r\n\t\tdialog_window.append(row_template.printf(row, result.file[row]));\r\n\t}\r\n\r\n\tlet content_height = Object.keys(result.file).length * 19 < 76 ? 76 : Object.keys(result.file).length * 19,\r\n\t\tvisible_height = (document.documentElement.clientHeight) / 100 * 75,\r\n\t\toverflow       = content_height < visible_height ? 'hidden' : 'scroll',\r\n\t\theight         = overflow === 'scroll' ? visible_height : content_height;\r\n\r\n\tdialog_window.css({\r\n\t\theight: height,\r\n\t\toverflow: overflow\r\n\t})\r\n\r\n\tdialog_window.dialog({\r\n\t\tmodal:true,\r\n\t\ttitle: ('Loaded: ' + result.file_path),\r\n\t\tposition: { my: \"center top\", at: \"center top+100px\" , of: window },\r\n\t\twidth: +(jQuery('#wpwrap').width() / 100 * 90),\r\n\t\tshow: { effect: \"blind\", duration: 500 },\r\n\t\tdraggable: true,\r\n\t\tresizable: false,\r\n\t\tcloseText: \"X\",\r\n\t\tclasses: {\"ui-dialog\": 'spbc---top'},\r\n\t\topen: function(event, ui) {\r\n\t\t\tevent.target.style.overflow = overflow;\r\n\t\t\tjQuery('#spbc_dialog').height(height);\r\n\t\t\tjQuery('.ui-widget-overlay').on('click', function() {\r\n\t\t\t\tjQuery(\"#spbc_dialog\").dialog('close');\r\n\t\t\t});\r\n\t\t},\r\n\t\tbeforeClose: function(event, ui) {\r\n\t\t\tdocument.body.style.overflow = 'auto';\r\n\t\t\tjQuery('#spbc_dialog').empty();\r\n\t\t},\r\n\t});\r\n\r\n\tconsole.log('FILE_VIEWED');\r\n\r\n}\r\n\r\nfunction spbc_scanner_button_file_view_bad_event(obj){\r\n\tvar self = jQuery(obj);\r\n\tvar data = {\r\n\t\taction: 'spbc_scanner_file_view',\r\n\t\tfile_id: self.parents('.row-actions').attr('uid'),\r\n\t};\r\n\tvar params = {\r\n\t\tspinner: self.parent().siblings('.tbl-preloader--tiny'),\r\n\t\tcallback: spbc_scannerButtonViewBadFile_callback,\r\n\t\terrorOutput: function(msg){ spbcModal.open().putError( msg ); },\r\n\t};\r\n\tspbc_sendAJAXRequest(data, params);\r\n}\r\n\r\nfunction spbc_scanner_button_page_view_bad_event(obj){\r\n\tvar self = jQuery(obj);\r\n\tvar data = {\r\n\t\taction: 'spbc_scanner_page_view',\r\n\t\tpage_url: self.parent().attr('uid'),\r\n\t};\r\n\tvar params = {\r\n\t\tspinner: self.parent().siblings('.tbl-preloader--tiny'),\r\n\t\tcallback: spbc_scannerButtonViewBad_callback,\r\n\t\terrorOutput: function(msg){ spbcModal.open().putError( msg ); },\r\n\t};\r\n\tspbc_sendAJAXRequest(data, params);\r\n}\r\n\r\nfunction spbc_scannerButtonViewBadFile_callback(result, data, params){\r\n\r\n\tconsole.log('FILE_VIEWED_BAD_CODE_FILE');\r\n\tconsole.log(arguments);\r\n\tjQuery('#spbc_dialog').empty();\r\n\r\n\tvar row_template     = '<div class=\"spbc_view_file_row_wrapper\"><span class=\"spbc_view_file_row_num\">%s</span><p class=\"spbc_view_file_row\">%s</p><br /></div>',\r\n\t\trow_template_bad = '<div class=\"spbc_view_file_row_wrapper\" style=\"background: rgba(200,40,40,0.8);\"><span class=\"spbc_view_file_row_num\">%s</span><p class=\"spbc_view_file_row\">%s</p><br /></div>',\r\n\t\tseverity_parts = [],\r\n\t\tseverity_parts_sorted = [],\r\n\t\tseverity_keys_sorted = [];\r\n\r\n\tresult.weak_spots = JSON.parse(result.weak_spots)\r\n\tfor(let severity in result.weak_spots){\r\n\t\tseverity_parts[severity] = Object.keys(result.weak_spots[severity])\r\n\t}\r\n\r\n\tseverity_keys_sorted = Object.keys(severity_parts).sort();\r\n\r\n\tfor(key in severity_keys_sorted){\r\n\t\tseverity_parts_sorted[severity_keys_sorted[key]] = severity_parts[severity_keys_sorted[key]]\r\n\t}\r\n\r\n\tfor (let severity_part in severity_parts_sorted) {\r\n\t\tlet header_name = 'spbc-dialog-row-header-' + severity_part.toLowerCase();\r\n\t\tlet header_html = '<span id=\"' + header_name + '\" style=\"text-align: center\"><b>' + severity_part + ' weakspots:</b></span>';\r\n\t\tconst dialog = jQuery('#spbc_dialog');\r\n\r\n\t\tdialog.append(row_template.printf('',header_html));\r\n\t\tdialog.append(row_template.    printf('<b>...</b>','<b>...</b>'));\r\n\r\n\t\tlet header = dialog.find('#' + header_name);\r\n\t\theader.parent().parent().css('text-align', 'center');\r\n\t\theader.parent().parent().css('border', '1px dotted');\r\n\t\theader.parent().parent().css('background', 'darkgrey');\r\n\r\n\t\tfor(let str_num in severity_parts[severity_part]){\r\n\t\t\t// Sort bad line\r\n\t\t\tstr_num = [...new Set(str_num)].sort()\r\n\r\n\t\t\tlet row = +severity_parts[severity_part][str_num],\r\n\t\t\t\tdisplay_depth = 2;\r\n\r\n\t\t\t// Display only existing lines of file\r\n\t\t\tfor(let curr_row = row - display_depth; curr_row <= row + display_depth; curr_row++ ){\r\n\t\t\t\tif( typeof result.file[curr_row] !== 'undefined' ){\r\n\t\t\t\t\tdialog.append((row === curr_row ? row_template_bad : row_template).printf(curr_row, result.file[curr_row]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Placing an empty string between results\r\n\t\t\tdialog.append(row_template.    printf('<b>...</b>','<b>...</b>'));\r\n\t\t}\r\n\t}\r\n\r\n\t// Removing last empty string\r\n\tjQuery('#spbc_dialog div').last().remove();\r\n\r\n\tlet content_height = jQuery('#spbc_dialog div').length * 19 < 76 ? 76 : jQuery('#spbc_dialog div').length * 19,\r\n\t\tvisible_height = (document.documentElement.clientHeight) / 100 * 75,\r\n\t\toverflow       = content_height < visible_height ? 'no_scroll' : 'scroll',\r\n\t\theight         = overflow === 'scroll' ? visible_height : content_height;\r\n\r\n\tjQuery('#spbc_dialog').dialog({\r\n\t\tmodal:true,\r\n\t\ttitle: result.file_path,\r\n\t\tposition: { my: \"center top\", at: \"center top+100px\" , of: window },\r\n\t\twidth: +(jQuery('#wpwrap').width() / 100 * 90),\r\n\t\tshow: { effect: \"blind\", duration: 500 },\r\n\t\tdraggable: true,\r\n\t\tresizable: false,\r\n\t\tcloseText: \"X\",\r\n\t\tclasses: {\"ui-dialog\": 'spbc---top'},\r\n\t\topen: function(event, ui) {\r\n\t\t\tevent.target.style.overflow = overflow;\r\n\t\t\tjQuery('#spbc_dialog').height(height);\r\n\t\t\tjQuery('.ui-widget-overlay').on('click', function() {\r\n\t\t\t\tjQuery(\"#spbc_dialog\").dialog('close');\r\n\t\t\t});\r\n\t\t},\r\n\t\tbeforeClose: function(event, ui) {\r\n\t\t\tdocument.body.style.overflow = 'auto';\r\n\t\t\tjQuery('#spbc_dialog').empty();\r\n\t\t},\r\n\t});\r\n}\r\n\r\nfunction spbc_scannerButtonViewBad_callback(result, data, params){\r\n\r\n\tconsole.log('FILE_VIEWED_BAD_CODE');\r\n\r\n\tconsole.log(arguments);\r\n\r\n\tlet afterClose = () => {};\r\n\r\n\tif ( result.success == true ) {\r\n\t\tconsole.log(result);\r\n\t\tvar row_template     = '<div class=\"spbc_view_file_row_wrapper\">' +\r\n\t\t\t\t'<span class=\"spbc_view_file_row_num\">%s</span>' +\r\n\t\t\t\t'<p class=\"spbc_view_file_row\" style=\"word-break: break-all\">%s</p>' +\r\n\t\t\t\t'<br /></div>',\r\n\t\t\trow_template_bad = '<div class=\"spbc_view_file_row_wrapper\" style=\"background: rgb(200,120,120);\">' +\r\n\t\t\t\t'<span class=\"spbc_view_file_row_num\">%s</span>' +\r\n\t\t\t\t'<p class=\"spbc_view_file_row\" style=\"word-break: break-all\">%s</p>' +\r\n\t\t\t\t'<br /></div>',\r\n\t\t\tstr_nums = [];\r\n\r\n\t\tresult.weak_spots = JSON.parse(result.weak_spots);\r\n\t\tfor(let severity in result.weak_spots){\r\n\t\t\tstr_nums = str_nums.concat(Object.keys(result.weak_spots[severity]));\r\n\t\t}\r\n\r\n\t\tstr_nums = [...new Set(str_nums)].sort(); // Sort bad line\r\n\t\t//get a map of bad strings\r\n\t\tlet bad_strings_map = new Map(Object.entries(result.weak_spots.CRITICAL)) //TODO: Probably there can get something else except CRITICAL in the future\r\n\t\tfor(let str_num in str_nums){\r\n\t\t\tif (str_num == 0 && bad_strings_map.get(str_nums[str_num]).toLowerCase().includes('doctype')) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tlet row = +str_nums[str_num],\r\n\t\t\t\tdisplay_depth = 2;\r\n\r\n\t\t\t// Display only existing lines of file\r\n\t\t\tfor(let curr_row = row - display_depth; curr_row <= row + display_depth; curr_row++ ){\r\n\t\t\t\tif( typeof result.file[curr_row] !== 'undefined' ){\r\n\t\t\t\t\tlet is_bad_string = (row === curr_row)\r\n\t\t\t\t\tlet unformatted_row\r\n\t\t\t\t\tlet highlited_row\r\n\t\t\t\t\tif (is_bad_string){\r\n\t\t\t\t\t\tunformatted_row = row_template_bad\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tunformatted_row = row_template\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (is_bad_string && !result.file[curr_row].includes('iframe')){\r\n\t\t\t\t\t\thighlited_row = unformatted_row.printf(curr_row, bad_strings_map.get(str_nums[str_num]));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\thighlited_row = unformatted_row.printf(curr_row, result.file[curr_row]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tjQuery('#spbc_dialog').append(highlited_row);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Placing an empty string between results\r\n\t\t\tjQuery('#spbc_dialog').append(row_template.    printf('', ''));\r\n\r\n\t\t\t// Removing last empty string\r\n\t\t\tjQuery('#spbc_dialog div').last().remove();\r\n\t\t}\r\n\t} else {\r\n\t\tlet wrapperElement = '<div style=\"margin:40px;text-align:center;\">%s</div>'\r\n\t\tjQuery('#spbc_dialog').append(wrapperElement.printf(result.content));\r\n\t\tafterClose = () => {document.location.reload();};\r\n\t}\r\n\r\n\tlet content_height = jQuery('#spbc_dialog div').length * 19 < 76 ? 76 : jQuery('#spbc_dialog div').length * 19,\r\n\t\tvisible_height = (document.documentElement.clientHeight) / 100 * 75,\r\n\t\theight         = 'auto',\r\n\t\toverflow       = content_height < visible_height ? 'no_scroll' : 'scroll';\r\n\r\n\tjQuery('#spbc_dialog').dialog({\r\n\t\tmodal:true,\r\n\t\ttitle: result.file_path,\r\n\t\tposition: { my: \"center top\", at: \"center top+100px\" , of: window },\r\n\t\twidth: +(jQuery('#wpwrap').width() / 100 * 90),\r\n\t\tshow: { effect: \"blind\", duration: 500 },\r\n\t\tdraggable: true,\r\n\t\tresizable: false,\r\n\t\tcloseText: \"X\",\r\n\t\tclasses: {\"ui-dialog\": 'spbc---top'},\r\n\t\topen: function(event, ui) {\r\n\t\t\tevent.target.style.overflow = overflow;\r\n\t\t\tjQuery('#spbc_dialog').height(height);\r\n\t\t\tjQuery('.ui-widget-overlay').on('click', function() {\r\n\t\t\t\tjQuery(\"#spbc_dialog\").dialog('close');\r\n\t\t\t});\r\n\t\t},\r\n\t\tbeforeClose: function(event, ui) {\r\n\t\t\tdocument.body.style.overflow = 'auto';\r\n\t\t\tjQuery('#spbc_dialog').empty();\r\n\t\t},\r\n\t\tclose: afterClose,\r\n\t});\r\n}\r\n\r\nfunction spbc_scanner_button_file_compare_event(obj){\r\n\tvar self = jQuery(obj);\r\n\tvar data = {\r\n\t\taction: 'spbc_scanner_file_compare',\r\n\t\tfile_id: self.parents('.row-actions').attr('uid'),\r\n\t};\r\n\tvar params = {\r\n\t\tspinner: self.parent().siblings('.tbl-preloader--tiny'),\r\n\t\tcallback: spbc_scannerButtonFileCompare_callback,\r\n\t\terrorOutput: function(msg){ spbcModal.open().putError( msg ); },\r\n\t};\r\n\tspbc_sendAJAXRequest(data, params);\r\n}\r\n\r\nfunction spbc_scannerButtonFileCompare_callback(result, data, params){\r\n\r\n\tconsole.log('FILE_COMPARED');\r\n\r\n\tlet row_template = '<div class=\"spbc_compare_file_row_wrapper\"><p class=\"spbc_compare_file_row\">%s</p><span class=\"spbc_compare_file_row_num\">%s</span><p class=\"spbc_compare_file_row\">%s</p><br /></div>';\r\n\tlet row_template_bad = '<div class=\"spbc_compare_file_row_wrapper\" style=\"background: rgba(200,40,40,0.8);\"><p class=\"spbc_compare_file_row\">%s</p><span class=\"spbc_compare_file_row_num\">%s</span><p class=\"spbc_compare_file_row\">%s</p><br /></div>';\r\n\r\n\tjQuery('#spbc_dialog').append(row_template.printf('<span class=\"spbc_compare_file_headings\">Modified</span>', 'Line', '<span class=\"spbc_compare_file_headings\">Original</span>'));\r\n\r\n\tfor(var row=1, prev = false, next = false; typeof result.file[row] != 'undefined' || typeof result.file_original[row] != 'undefined'; row++){\r\n\r\n\t\tif(typeof result.file[row] == 'undefined')          result.file[row] = '';\r\n\t\tif(typeof result.file_original[row] == 'undefined') result.file_original[row] = '';\r\n\r\n\t\t// Display only existing lines of file\r\n\t\tif(result.difference.indexOf(row) != -1){\r\n\t\t\tfor(let display_depth = 2, curr_row = row - display_depth; curr_row <= row + display_depth; curr_row++ ){\r\n\t\t\t\tif( typeof result.file[curr_row] !== 'undefined' && typeof result.file_original[row] !== 'undefined') {\r\n\t\t\t\t\tjQuery('#spbc_dialog').append(\r\n\t\t\t\t\t\t(row === curr_row ? row_template_bad : row_template).printf(\r\n\t\t\t\t\t\t\tresult.file[curr_row] ? result.file[curr_row] : '',\r\n\t\t\t\t\t\t\tcurr_row,\r\n\t\t\t\t\t\t\tresult.file_original[curr_row] ? result.file_original[curr_row] : ''\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tjQuery('#spbc_dialog').append(row_template.    printf('', '', ''));\r\n\t\t}\r\n\t}\r\n\r\n\tvar content_height = jQuery('#spbc_dialog div').length * 19 + 19,\r\n\t\tvisible_height = (document.documentElement.clientHeight) / 100 * 75,\r\n\t\toverflow = content_height < visible_height ? 'no_scroll' : 'scroll',\r\n\t\theight = overflow === 'scroll' ? visible_height : content_height;\r\n\r\n\tjQuery('#spbc_dialog').dialog({\r\n\t\tmodal:true,\r\n\t\ttitle: result.file_path,\r\n\t\tposition: { my: \"center top\", at: \"center top+100px\" , of: window },\r\n\t\twidth: +(jQuery('#wpwrap').width() / 100 * 90),\r\n\t\theight: height,\r\n\t\tshow: { effect: \"blind\", duration: 500 },\r\n\t\tdraggable: true,\r\n\t\tresizable: true,\r\n\t\tcloseText: \"X\",\r\n\t\tclasses: {\"ui-dialog\": 'spbc---top'},\r\n\t\topen: function(event, ui) {\r\n\t\t\tdocument.body.style.overflow = 'hidden';\r\n\t\t\tevent.target.style.overflow = overflow;\r\n\t\t\tjQuery('#spbc_dialog').height(height);\r\n\t\t},\r\n\t\tbeforeClose: function(event, ui) {\r\n\t\t\tdocument.body.style.overflow = 'auto';\r\n\t\t\tjQuery('#spbc_dialog').empty();\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction spbc_scanner__reload_scan_info() {\r\n\tjQuery('.spbc_hint__last_scan_title').text(spbcScaner.look_below_for_scan_res);\r\n\tconst data = {\r\n\t\taction: 'spbc_scanner__last_scan_info'\r\n\t};\r\n\tconst params = {\r\n\t\tcallback: (result) => {\r\n\t\t\tdocument.getElementById('spbc_scanner__last_scan_info').innerText = result.data;\r\n\t\t}\r\n\t};\r\n\tspbc_sendAJAXRequest(data, params);\r\n}\r\n\r\n/**\r\n * Show snapshots of file\r\n * @param obj\r\n */\r\nfunction spbc_scanner_file_monitoring_show_current_snapshot(obj)\r\n{\r\n\tconst self = jQuery(obj);\r\n\tconst fileId = self.parents('.row-actions').attr('uid');\r\n\tconst file_name = self.closest('.column-path').find('.title').text();\r\n\r\n\t// Init and open remodal\r\n\tconst remodal = jQuery('[data-remodal-id=spbc-file-monitoring-modal]');\r\n\tconst remodalObject = remodal.remodal();\r\n\tremodalObject.open();\r\n\r\n\t// Ajax request to get data for slider\r\n\tlet data = {\r\n\t\taction: 'spbc_file_monitoring_show_snapshots',\r\n\t\tfile_id: fileId,\r\n\t\tsecurity: spbcSettings.ajax_nonce\r\n\t};\r\n\r\n\tjQuery.ajax({\r\n\t\ttype: \"POST\",\r\n\t\tasync: true,\r\n\t\turl: spbcSettings.ajaxurl,\r\n\t\tdata: data,\r\n\t\tsuccess: function(result) {\r\n\t\t\tif (result.success) {\r\n\t\t\t\tremodal.find('#spbc-fm-snapshot-list ul').remove();\r\n\t\t\t\tremodal.find('#spbc-fm-snapshot-file-name').text(file_name);\r\n\t\t\t\tdrawSnapshotList(result.data, remodal);\r\n\t\t\t\tdrawCurrentSnapshot(result.data[0].id, remodal);\r\n\t\t\t} else {\r\n\t\t\t\t// TODO: show errors\r\n\t\t\t}\r\n\t\t},\r\n\t});\r\n}\r\n\r\n/**\r\n *\r\n * @param data\r\n * @param remodal\r\n */\r\nfunction drawSnapshotList(data, remodal)\r\n{\r\n\tlet list = '';\r\n\r\n\tfor (let item of data) {\r\n\t\tlist += `<li data-spanshot-id=\"${item.id}\">${item.created_at}</li>`;\r\n\t}\r\n\r\n\tlet html =\r\n\t\t`<ul>\r\n            ${list}\r\n        </ul>`;\r\n\r\n\tremodal.find('#spbc-fm-snapshot-list').append(html);\r\n}\r\n\r\nfunction drawCurrentSnapshot(snapshot_id, remodal)\r\n{\r\n\t// Ajax request to get data for slider\r\n\tlet data = {\r\n\t\taction: 'spbc_file_monitoring_show_current_snapshot',\r\n\t\tsnapshot_id,\r\n\t\tsecurity: spbcSettings.ajax_nonce\r\n\t};\r\n\r\n\tjQuery.ajax({\r\n\t\ttype: \"POST\",\r\n\t\tasync: true,\r\n\t\turl: spbcSettings.ajaxurl,\r\n\t\tdata: data,\r\n\t\tbeforeSend: function() {\r\n\t\t\tjQuery('#spbc-file-monitoring-modal-preloader').show();\r\n\t\t},\r\n\t\tsuccess: function(result) {\r\n\t\t\tif (result.success) {\r\n\t\t\t\tremodal.find('#spbc-fm-snapshot-view .wrap').remove();\r\n\t\t\t\tremodal.find('[data-spanshot-id').removeClass('active');\r\n\t\t\t\tremodal.find('[data-spanshot-id=' + snapshot_id + ']').addClass('active');\r\n\r\n\t\t\t\tlet html =\r\n\t\t\t\t\t`<div class=\"wrap\">\r\n                        <pre>\r\n                            <code>\r\n                                ${result.data.content}\r\n                            </code>\r\n                        </pre>\r\n                    </div>`;\r\n\r\n\t\t\t\tjQuery('#spbc-file-monitoring-modal-preloader').hide();\r\n\t\t\t\tremodal.find('#spbc-fm-snapshot-view').append(html);\r\n\t\t\t\tdocument.querySelectorAll('pre code').forEach((el) => {\r\n\t\t\t\t\thljs.highlightElement(el);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// TODO: show errors\r\n\t\t\t}\r\n\t\t},\r\n\t});\r\n}\r\n\r\n/**\r\n * Cure file\r\n * @param obj\r\n */\r\nfunction spbc_scanner_button_cure_file_ajax_handler(obj)\r\n{\r\n\tconst self = jQuery(obj);\r\n\tconst fileFastHash = self.parents('.row-actions').attr('uid');\r\n\r\n\tlet data = {\r\n\t\taction: 'spbc_file_cure_ajax_action',\r\n\t\tfile_fast_hash: fileFastHash,\r\n\t\tsecurity: spbcSettings.ajax_nonce\r\n\t};\r\n\r\n\tjQuery.ajax({\r\n\t\ttype: \"POST\",\r\n\t\tasync: true,\r\n\t\turl: spbcSettings.ajaxurl,\r\n\t\tdata: data,\r\n\t\tsuccess: function(result) {\r\n\t\t\tif (result.success) {\r\n\t\t\t\tspbcModal.open().put(result.data);\r\n\t\t\t\tdocument.addEventListener(\"spbcModalClosed\", function( e ) {\r\n\t\t\t\t\tdocument.location.reload();\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tspbcModal.open().putError(result.data);\r\n\t\t\t}\r\n\t\t},\r\n\t});\r\n}\r\n\r\n/**\r\n * Restore file from backup\r\n * @param obj\r\n */\r\nfunction spbc_scanner_button_restore_from_backup_ajax_handler(obj)\r\n{\r\n\tconst self = jQuery(obj);\r\n\tconst fileFastHash = self.parents('.row-actions').attr('uid');\r\n\r\n\tlet data = {\r\n\t\taction: 'spbc_restore_file_from_backup_ajax_action',\r\n\t\tfile_fast_hash: fileFastHash,\r\n\t\tsecurity: spbcSettings.ajax_nonce\r\n\t};\r\n\r\n\tjQuery.ajax({\r\n\t\ttype: \"POST\",\r\n\t\tasync: true,\r\n\t\turl: spbcSettings.ajaxurl,\r\n\t\tdata: data,\r\n\t\tsuccess: function(result) {\r\n\t\t\tif (result.success) {\r\n\t\t\t\tspbcModal.open().put(result.data);\r\n\t\t\t\tdocument.addEventListener(\"spbcModalClosed\", function( e ) {\r\n\t\t\t\t\tdocument.location.reload();\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tspbcModal.open().putError(result.data);\r\n\t\t\t}\r\n\t\t},\r\n\t});\r\n}\r\n\r\n/**\r\n * Clear scan results\r\n */\r\nfunction spbc_scanner_button_clear_scan_results()\r\n{\r\n\tif( ! confirm('Do you confirm to clear the scan results?') )\r\n\t\treturn;\r\n\r\n\tconsole.log('CLEAR');\r\n\r\n\tspbc_sendAJAXRequest(\r\n\t\t{ action: 'spbc_scanner_clear', },\r\n\t\t{\r\n\t\t\ttype: 'GET',\r\n\t\t\tsuccessCallback: function(){ document.location = document.location },\r\n\t\t\tcomplete: null,\r\n\t\t\terrorOutput: null,\r\n\t\t\tcontext: this,\r\n\t\t\ttimeout: 40000,\r\n\t\t\tsuccess: function() {\r\n\t\t\t\tdocument.location.reload();\r\n\t\t\t},\r\n\t\t},\r\n\t);\r\n}\r\n\r\njQuery(document).ready(function(){\r\n\r\n\t// EVENT HADLING\r\n\tspbc_tbl__bulk_actions__listen(); // Table. Row bulk handler\r\n\tspbc_tbl__row_actions__listen();  // Table. Row actions handler\r\n\tspbc_tbl__pagination__listen();   // Table. Pagination handler\r\n\tspbc_tbl__sort__listen();         // Table. Sort handler\r\n\r\n\tspbcStartShowHide();\r\n\r\n\t// Preparing progressbar\r\n\tjQuery('#spbc_scaner_progress_bar').progressbar({\r\n\t\tvalue: 0,\r\n\t\tcreate: function( event, ui ) {\r\n\t\t\tevent.target.style.position = 'relative';\r\n\t\t\tevent.target.style.marginBottom = '12px';\r\n\t\t},\r\n\t\tchange: function(event, ui){\r\n\t\t\tjQuery('.spbc_progressbar_counter span').text(jQuery(event.target).progressbar('option', 'value') + ' %');\r\n\t\t},\r\n\t});\r\n\r\n\t// Preparing accordion\r\n\tjQuery('#spbc_scan_accordion').accordion({\r\n\t\theader: \"h3\",\r\n\t\theightStyle: 'content',\r\n\t\tcollapsible: true,\r\n\t\tactive: false,\r\n\t\tactivate: function( event, ui ) {\r\n\t\t\tif( ui.oldPanel.length === 0 && ui.oldHeader.length === 0 )\r\n\t\t\t\tjQuery(\"#spbc_scan_accordion\").accordion(\"option\", \"classes.ui-accordion-content\", \"ui-corner-bottom spbc-overflow--visible\");\r\n\t\t},\r\n\t\tbeforeActivate: function( event, ui ) {\r\n\t\t\tif( ui.oldPanel.length === 1 && ui.oldHeader.length === 1 )\r\n\t\t\t\tjQuery(\"#spbc_scan_accordion\").accordion(\"option\", \"classes.ui-accordion-content\", \"ui-corner-bottom\");\r\n\t\t}\r\n\t});\r\n\r\n\t// Init scanner plugin\r\n\twindow.spbc_scanner = new spbcMalwareScanner({\r\n\t\tsettings: spbcScaner.settings,\r\n\t\tstates: spbcScaner.states,\r\n\t\tbutton: jQuery('#spbc_perform_scan'),\r\n\t\tspinner: jQuery('#spbc_perform_scan').next(),\r\n\t\tcallback: null,\r\n\t\tprogress_overall: jQuery('#spbc_scaner_progress_overall'),\r\n\t\tprogressbar: jQuery('#spbc_scaner_progress_bar'),\r\n\t\tprogressbar_text: jQuery('.spbc_progressbar_counter span'),\r\n\t\twrapper: document.getElementsByClassName('spbc_unchecked_file_list'),\r\n\t\twarnings: {\r\n\t\t\tlong_scan: jQuery('.spbc_hint_warning__long_scan'),\r\n\t\t\toutdated:  jQuery('.spbc_hint_warning__outdated')\r\n\t\t}\r\n\t});\r\n\r\n\tjQuery(document).on('click', '.spbc_popup_tip--icon---show', function(){\r\n\t\tspbc_popup_tip___show( jQuery( this ) );\r\n\t});\r\n\r\n\tjQuery('#spbc_perform_scan').on('click', function(){\r\n\t\tjQuery('#spbcscan-results-log-module').remove();\r\n\t\tspbc_scanner.actionControl();\r\n\r\n\t\tif (!jQuery(\".spbc_log-wrapper .panel-body\").length) {\r\n\t\t\tjQuery(\".spbc_log-wrapper\").append('<div class=\"panel-body\"></div>');\r\n\t\t}\r\n\r\n\t\tjQuery(\".spbc_log-wrapper\").resizable({\r\n\t\t\thandles: 'n, s',\r\n\t\t\tcontainment: 'document',\r\n\t\t});\r\n\t});\r\n\r\n\tjQuery(\"#spbcscan-results-log-module\").resizable({\r\n\t\thandles: 'n, s',\r\n\t\tcontainment: 'document',\r\n\t});\r\n\r\n\t// Clear scanner's tables\r\n\tjQuery('#spbc_scanner_clear').on('click', function(){\r\n\r\n\t\tif( ! confirm('Do you confirm to clear the scan results?') )\r\n\t\t\treturn;\r\n\r\n\t\tconsole.log('CLEAR');\r\n\r\n\t\tspbc_sendAJAXRequest(\r\n\t\t\t{ action: 'spbc_scanner_clear', },\r\n\t\t\t{\r\n\t\t\t\ttype: 'GET',\r\n\t\t\t\tsuccessCallback: function(){ document.location = document.location },\r\n\t\t\t\tcomplete: null,\r\n\t\t\t\terrorOutput: null,\r\n\t\t\t\tcontext: this,\r\n\t\t\t\ttimeout: 40000,\r\n\t\t\t\tsuccess: function() {\r\n\t\t\t\t\tdocument.location.reload();\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t);\r\n\t});\r\n\r\n\tjQuery('#spbc_scanner_save_to_pdf').on('click', function(){\r\n\t\tjQuery.ajax({\r\n\t\t\turl: spbcSettings.ajaxurl,\r\n\t\t\ttype: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\taction: 'spbc_scanner_save_to_pdf',\r\n\t\t\t\tsecurity: spbcSettings.ajax_nonce,\r\n\t\t\t\tno_cache: Math.random()\r\n\t\t\t},\r\n\t\t\txhrFields: {\r\n\t\t\t\tresponseType: 'blob'\r\n\t\t\t},\r\n\t\t\tsuccess: function(data) {\r\n\t\t\t\tjQuery.ajax({\r\n\t\t\t\t\t\turl: spbcSettings.ajaxurl,\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\taction: 'spbc_scanner_get_pdf_file_name',\r\n\t\t\t\t\t\t\tsecurity: spbcSettings.ajax_nonce,\r\n\t\t\t\t\t\t\tno_cache: Math.random()\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\txhrFields: {\r\n\t\t\t\t\t\t\tresponseType: 'text'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: function(filename) {\r\n\t\t\t\t\t\t\tlet blob=new Blob([data]);\r\n\t\t\t\t\t\t\tlet link=document.createElement('a');\r\n\t\t\t\t\t\t\tlink.href=window.URL.createObjectURL(blob);\r\n\t\t\t\t\t\t\tlink.download=filename.data;\r\n\t\t\t\t\t\t\tlink.click();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\t// Select snapshot\r\n\tjQuery(document).on('click', '.spbc-fm-snapshot-list [data-spanshot-id]', function() {\r\n\t\tconst currentSnapshotId = jQuery(this).data('spanshot-id');\r\n\t\tconst activeSnapshotId = jQuery('.spbc-fm-snapshot-list [data-spanshot-id].active').data('spanshot-id');\r\n\r\n\t\tif (currentSnapshotId === activeSnapshotId) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst remodal = jQuery('[data-remodal-id=spbc-file-monitoring-modal]');\r\n\t\tdrawCurrentSnapshot(currentSnapshotId, remodal)\r\n\t});\r\n});\r\n"],"names":["spbc_popup_tip___show","show_icon","remove_desc_func","e","jQuery","target","parent","length","hasClass","hide","document","off","tip_title","attr","tip_text","obj","after","empty","append","css","top","position","left","on","parents","spbc_scanner_button_file_view_event","self","data","action","file_id","params","spinner","siblings","callback","spbc_scannerButtonView_callback","errorOutput","msg","spbcModal","open","putError","spbc_sendAJAXRequest","spbc_scanner_analysis_log_delete_from_log","let","fileIds","push","selectedItems","closest","find","alert","each","index","element","elementId","val","children","file_ids","window","location","reload","spbc_scanner_button_page_view_event","page_url","wp_wrap","dialog_window","dialog","modal","title","my","at","of","width","show","effect","duration","draggable","resizable","closeText","classes","ui-dialog","event","ui","style","overflow","height","documentElement","beforeClose","body","size_multiplier","result","row","display","file","printf","content_height","Object","keys","visible_height","file_path","console","log","spbc_scanner_button_file_view_bad_event","spbc_scannerButtonViewBadFile_callback","spbc_scanner_button_page_view_bad_event","spbc_scannerButtonViewBad_callback","arguments","severity_keys_sorted","severity","severity_part","row_template","severity_parts","severity_parts_sorted","weak_spots","JSON","parse","key","sort","str_num","header_name","toLowerCase","header_html","header","Set","curr_row","last","remove","afterClose","success","str_nums","concat","bad_strings_map","Map","entries","CRITICAL","get","includes","is_bad_string","unformatted_row","highlited_row","content","close","spbc_scanner_button_file_compare_event","spbc_scannerButtonFileCompare_callback","file_original","difference","indexOf","spbc_scanner__reload_scan_info","text","spbcScaner","look_below_for_scan_res","getElementById","innerText","spbc_scanner_file_monitoring_show_current_snapshot","fileId","file_name","remodal","security","spbcSettings","ajax_nonce","ajax","type","async","url","ajaxurl","drawSnapshotList","drawCurrentSnapshot","id","list","item","created_at","html","snapshot_id","beforeSend","removeClass","addClass","querySelectorAll","forEach","hljs","highlightElement","el","spbc_scanner_button_cure_file_ajax_handler","file_fast_hash","put","addEventListener","spbc_scanner_button_restore_from_backup_ajax_handler","spbc_scanner_button_clear_scan_results","confirm","successCallback","complete","context","this","timeout","ready","spbc_tbl__bulk_actions__listen","spbc_tbl__row_actions__listen","spbc_tbl__pagination__listen","spbc_tbl__sort__listen","spbcStartShowHide","progressbar","value","create","marginBottom","change","accordion","heightStyle","collapsible","active","activate","oldPanel","oldHeader","beforeActivate","spbc_scanner","spbcMalwareScanner","settings","states","button","next","progress_overall","progressbar_text","wrapper","getElementsByClassName","warnings","long_scan","outdated","actionControl","handles","containment","no_cache","Math","random","xhrFields","responseType","filename","blob","Blob","link","createElement","href","URL","createObjectURL","download","click","currentSnapshotId"],"mappings":"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"}