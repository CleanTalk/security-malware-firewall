{"version":3,"file":"spbc-cookie.min.js","sources":["spbc-cookie.js"],"sourcesContent":["function spbc_setCookie( cookies, value, expires ) {\n    if ( typeof cookies === 'string' && ( typeof value === 'string' || typeof value === 'number' ) ) {\n        cookies = [[cookies, value, expires]];\n    }\n\n    // Cookies disabled\n    if ( +spbcPublic.data__set_cookies === 0 ) {\n        return;\n\n    // Using traditional cookies\n    } else if ( +spbcPublic.data__set_cookies === 1 ) {\n        cookies.forEach( function(item, i, arr\t) {\n            var expires = typeof item[2] !== 'undefined' ? 'expires=' + expires + '; ' : '';\n            let ctSecure = location.protocol === 'https:' ? '; secure' : '';\n            document.cookie = item[0] + '=' + encodeURIComponent(item[1]) + '; ' + expires + 'path=/; samesite=lax' + ctSecure;\n        });\n\n    // Using alternative cookies\n    } else if ( +spbcPublic.data__set_cookies === 2 ) {\n        // Using REST API handler\n        if ( +spbcPublic.data__set_cookies__alt_sessions_type === 1 ) {\n            spbc_sendRESTRequest(\n                'alt_sessions',\n                {\n                    method: 'POST',\n                    data: {cookies: cookies},\n                },\n            );\n        }\n        // Using AJAX request and handler\n        // }else if( +spbcPublic.data__set_cookies__alt_sessions_type === 2 ) {\n        //     apbct_public_sendAJAX(\n        //         {\n        //             action: 'apbct_alt_session__save__AJAX',\n        //             cookies: cookies,\n        //         },\n        //         {\n        //             apbct_ajax: 1,\n        //             notJson: 1,\n        //         }\n        //     );\n        // }\n    }\n}\n\nfunction spbc_sendRESTRequest( route, params ) {\n    let callback = params.callback || null;\n    let data = params.data || [];\n    let method = params.method || 'POST';\n\n    jQuery.ajax({\n        type: method,\n        url: spbcPublic._rest_url + 'cleantalk-security/v1/' + route,\n        data: data,\n        beforeSend: function( xhr ) {\n            xhr.setRequestHeader( 'X-WP-Nonce', spbcPublic._rest_nonce );\n        },\n        success: function(result) {\n            if (result.error) {\n                console.log('Security by Cleantalk. Error: ' + (result.error || 'Unknown'));\n            } else {\n                if (callback) {\n                    let obj = null;\n                    callback(result, route, params, obj);\n                }\n            }\n        },\n        error: function(jqXHR, textStatus, errorThrown) {\n            if ( errorThrown ) {\n                console.log('SPBCT_REST_ERROR');\n                console.log(jqXHR);\n                console.log(textStatus);\n                console.log('Security by Cleantalk plugin REST API error: ' + errorThrown + ' Please, contact Cleantalk tech support https://wordpress.org/support/plugin/security-malware-firewall/');\n            }\n        },\n    });\n}\n"],"names":["spbc_setCookie","cookies","value","expires","spbcPublic","data__set_cookies","forEach","item","i","arr","ctSecure","location","protocol","document","cookie","encodeURIComponent","data__set_cookies__alt_sessions_type","spbc_sendRESTRequest","method","data","route","params","let","callback","jQuery","ajax","type","url","_rest_url","beforeSend","xhr","setRequestHeader","_rest_nonce","success","result","error","console","log","jqXHR","textStatus","errorThrown"],"mappings":"AAAA,SAASA,eAAgBC,EAASC,EAAOC,GACb,UAAnB,OAAOF,GAA2C,UAAjB,OAAOC,GAAuC,UAAjB,OAAOA,IACtED,EAAU,CAAC,CAACA,EAASC,EAAOC,KAIO,GAAlC,CAACC,WAAWC,oBAI6B,GAAlC,CAACD,WAAWC,kBACpBJ,EAAQK,QAAS,SAASC,EAAMC,EAAGC,GAC/B,IAAIN,EAA6B,KAAA,IAAZI,EAAK,GAAqB,WAAaJ,EAAU,KAAO,GACzEO,EAAiC,WAAtBC,SAASC,SAAwB,WAAa,GAC7DC,SAASC,OAASP,EAAK,GAAK,IAAMQ,mBAAmBR,EAAK,EAAE,EAAI,KAAOJ,EAAU,uBAAyBO,CAC9G,CAAC,EAGyC,GAAlC,CAACN,WAAWC,mBAEsC,GAArD,CAACD,WAAWY,sCACbC,qBACI,eACA,CACIC,OAAQ,OACRC,KAAM,CAAClB,QAASA,CAAO,CAC3B,CACJ,EAgBZ,CAEA,SAASgB,qBAAsBG,EAAOC,GAClCC,IAAIC,EAAWF,EAAOE,UAAY,KAClCD,IAAIH,EAAOE,EAAOF,MAAQ,GACtBD,EAASG,EAAOH,QAAU,OAE9BM,OAAOC,KAAK,CACRC,KAAMR,EACNS,IAAKvB,WAAWwB,UAAY,yBAA2BR,EACvDD,KAAMA,EACNU,WAAY,SAAUC,GAClBA,EAAIC,iBAAkB,aAAc3B,WAAW4B,WAAY,CAC/D,EACAC,QAAS,SAASC,GACVA,EAAOC,MACPC,QAAQC,IAAI,kCAAoCH,EAAOC,OAAS,UAAU,EAEtEZ,GAEAA,EAASW,EAAQd,EAAOC,EADd,IACyB,CAG/C,EACAc,MAAO,SAASG,EAAOC,EAAYC,GAC1BA,IACDJ,QAAQC,IAAI,kBAAkB,EAC9BD,QAAQC,IAAIC,CAAK,EACjBF,QAAQC,IAAIE,CAAU,EACtBH,QAAQC,IAAI,gDAAkDG,EAAc,yGAAyG,EAE7L,CACJ,CAAC,CACL"}