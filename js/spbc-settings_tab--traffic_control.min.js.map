{"version":3,"sources":["spbc-settings_tab--traffic_control.js"],"names":["spbc_tc__show_more__callback","result","data","params","full_refresh","jQuery","wrapper","html","spbc_tbl__row_actions__listen","spbc_tbl__pagination__listen","spbc_tbl__sort__listen","spbcStartShowHide","size","button","hide","siblings","css","spbc_tc__show_more__listen","on","spbcSettingsFWLogs","clicks","action","amount","args","eval","attr","this","spinner","nextElementSibling","find","callback","spbc_sendAJAXRequest","document","ready","spbcFireWallLogsUpdateTimer","setTimeout","spbc_heartbeat","tc_status","hasClass","notJson"],"mappings":"AACA,SAASA,6BAA6BC,EAAQC,EAAMC,GAChDD,EAAKE,cACPC,OAAOF,EAAOG,SAASC,KAAKN,GAC5BO,gCACAC,+BACAC,yBACAC,qBACsB,EAAdV,EAAOW,MACfP,OAAOF,EAAOG,SAASC,KAAKN,EAAOM,MACnCC,gCACAG,sBAGAN,OAAOF,EAAOU,QAAQC,OACtBT,OAAOF,EAAOU,QAAQE,SAAS,yBAAyBC,IAAI,UAAW,iBAIzE,SAASC,6BACRZ,OAAO,kCAAkCa,GAAG,QAAS,WACpD,GAAGC,mBAAmBC,OAAS,EAAE,CAChCD,mBAAmBC,SACnB,IAAIlB,KAAO,CACVmB,OAAQ,wCACRC,OAAQH,mBAAmBG,SAAWH,mBAAmBC,OAAO,GAChEG,KAAMC,KAAK,QAAQnB,OAAO,mCAAmCoB,KAAK,QAE/DtB,OAAS,CACZU,OAAQa,KACRC,QAASD,KAAKE,mBACdtB,QAASD,OAAO,mCAAmCwB,KAAK,SACxDC,SAAU9B,8BAEX+B,qBAAsB7B,KAAMC,aAG5BE,OAAOqB,MAAMZ,OACbT,OAAOqB,MAAMX,SAAS,yBAAyBC,IAAI,UAAW,kBAKjEX,OAAO2B,UAAUC,MAAM,WAEtBzB,gCACAC,+BACAC,yBAGAC,oBAKAM,6BAGA,IAAIiB,4BAA8BC,WAAW,SAASC,iBAErD,IAAKjB,mBAAmBkB,WAAahC,OAAO,iCAAiCiC,SAAS,wBAAwB,CAC7G,IAAIpC,KAAO,CACVmB,OAAQ,wCACRE,KAAMC,KAAK,QAAQnB,OAAO,mCAAmCoB,KAAK,OAClErB,cAAc,GAEXD,OAAS,CACZG,QAASD,OAAO,mCAChByB,SAAU9B,6BACVuC,SAAS,GAEVR,qBAAsB7B,KAAMC,QAE7BgC,WAAWC,eAAgB,MACzB","file":"spbc-settings_tab--traffic_control.min.js","sourcesContent":["// Callback for displaying Firewall logs\r\nfunction spbc_tc__show_more__callback(result, data, params){\r\n\tif(data.full_refresh){\r\n\t\tjQuery(params.wrapper).html(result);\r\n\t\tspbc_tbl__row_actions__listen();\r\n\t\tspbc_tbl__pagination__listen();\r\n\t\tspbc_tbl__sort__listen();\r\n\t\tspbcStartShowHide();\r\n\t}else if(result.size > 0){\r\n\t\tjQuery(params.wrapper).html(result.html);\r\n\t\tspbc_tbl__row_actions__listen();\r\n\t\tspbcStartShowHide();\r\n\t}else{\r\n\t\t// Hide \"More logs\" button, show \"Control Panel\" button\r\n\t\tjQuery(params.button).hide();\r\n\t\tjQuery(params.button).siblings('.spbc__show_more_logs').css('display', 'inline-block');\r\n\t}\r\n}\r\n\r\nfunction spbc_tc__show_more__listen(){\t\r\n\tjQuery('#spbc_show_more_fw_logs_button').on('click', function(){\r\n\t\tif(spbcSettingsFWLogs.clicks < 2){\r\n\t\t\tspbcSettingsFWLogs.clicks++;\r\n\t\t\tvar data = {\r\n\t\t\t\taction: 'spbc_show_more_security_firewall_logs',\r\n\t\t\t\tamount: spbcSettingsFWLogs.amount * (+spbcSettingsFWLogs.clicks+1),\r\n\t\t\t\targs: eval('args_'+jQuery('#spbc_tbl__traffic_control_logs').attr('id')),\r\n\t\t\t};\t\t\t\r\n\t\t\tvar params = {\r\n\t\t\t\tbutton: this,\r\n\t\t\t\tspinner: this.nextElementSibling,\r\n\t\t\t\twrapper: jQuery('#spbc_tbl__traffic_control_logs').find('tbody'),\r\n\t\t\t\tcallback: spbc_tc__show_more__callback,\r\n\t\t\t};\r\n\t\t\tspbc_sendAJAXRequest( data, params );\r\n\t\t}else{\r\n\t\t\t// Hide \"More logs\" button, show \"Control Panel\" button\r\n\t\t\tjQuery(this).hide();\r\n\t\t\tjQuery(this).siblings('.spbc__show_more_logs').css('display', 'inline-block');\r\n\t\t}\r\n\t});\t\r\n}\r\n\r\njQuery(document).ready(function(){\r\n\t\r\n\tspbc_tbl__row_actions__listen(); // Table. Row actions handler\r\n\tspbc_tbl__pagination__listen();  // Table. Pagination handler\r\n\tspbc_tbl__sort__listen();        // Table. Sort handler\r\n\t\r\n\t// Start to hide long values in a table\r\n\tspbcStartShowHide();\r\n\t\r\n\t// FIREWALL LOGS EVENTS\r\n\t\r\n\t// Handler for show more FIREWALL LOGS\r\n\tspbc_tc__show_more__listen();\r\n\t\r\n\t// Timer for FireWall logs\r\n\tvar spbcFireWallLogsUpdateTimer = setTimeout(function spbc_heartbeat(){\t\t\r\n\t\t// Do refresh only if traffic control is enabled and tab is active\r\n\t\tif( +spbcSettingsFWLogs.tc_status && jQuery('.spbc_tab_nav-traffic_control').hasClass('spbc_tab_nav--active')){\r\n\t\t\tvar data = {\r\n\t\t\t\taction: 'spbc_show_more_security_firewall_logs',\r\n\t\t\t\targs: eval('args_'+jQuery('#spbc_tbl__traffic_control_logs').attr('id')),\r\n\t\t\t\tfull_refresh: true,\r\n\t\t\t};\r\n\t\t\tvar params = {\r\n\t\t\t\twrapper: jQuery('#spbc_tbl__traffic_control_logs'),\r\n\t\t\t\tcallback: spbc_tc__show_more__callback,\r\n\t\t\t\tnotJson: true,\r\n\t\t\t};\r\n\t\t\tspbc_sendAJAXRequest( data, params );\r\n\t\t}\r\n\t\tsetTimeout(spbc_heartbeat, 60000);\r\n\t}, 60000);\t\r\n});"]}