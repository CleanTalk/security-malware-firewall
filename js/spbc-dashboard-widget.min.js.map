{"version":3,"file":"spbc-dashboard-widget.min.js","sources":["spbc-dashboard-widget.js"],"sourcesContent":["jQuery(document).ready(function(){\n\n\t// Set \"refresh\" link handler\n\tjQuery(\".spbc_widget_refresh_link\").on('click', function(){\n\t\tjQuery('.spbc_preloader').show();\n\t\tsetTimeout(function(){window.scrollTo(0, jQuery('#spbc_widget_wrapper').offset().top - 130);}, 1);\n\t\tsetTimeout(function(){jQuery(\"#spbc_refresh_form\").submit();}, 2500);\n\t});\n\n\tif(location.hash == '#ct_widget')\n\t\tsetTimeout(function(){window.scrollTo(0, jQuery('#spbc_widget_wrapper').offset().top - 130);}, 1);\n\n\t// Fixing default wrapper style\n\tjQuery(\"#spbc_widget_wrapper\").parent().css('padding', 0);\n\n\tlocale = navigator.language || navigator.userLanguage;\n\n\tvar date_formatter = new Intl.DateTimeFormat(locale, {\n\t\tmonth: \"short\",\n\t\tday: \"numeric\"\n\t});\n\n\tfunction reformatWidgetData(spbcDashboardWidget){\n\t\tlet widgetData = {'labels':[],'counts':[]}\n\t\tfor (let i = 0; i < spbcDashboardWidget.length; i++) {\n\t\t\twidgetData.labels.push(date_formatter.format(new Date(spbcDashboardWidget[i]['0'])))\n\t\t\twidgetData.counts.push(spbcDashboardWidget[i]['1'])\n\t\t}\n\t\treturn widgetData\n\t}\n\n\tconst ctx = document.getElementById('spbc_widget_chart')\n\t//let widgetData = reformatWidgetData(spbcDashboardWidget['data'])\n\tlet widgetDataFW = reformatWidgetData(spbcDashboardWidget['data_fw'])\n\tlet widgetDataBFP = reformatWidgetData(spbcDashboardWidget['data_bfp'])\n\n\tnew Chart(ctx, {\n\t\ttype: 'bar',\n\t\tdata: {\n\t\t\tlabels: widgetDataFW.labels,\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'BFP blocked',\n\t\t\t\t\tdata: widgetDataBFP.counts,\n\t\t\t\t\tborderWidth: 1,\n\t\t\t\t\tbackgroundColor: 'gray'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'FW blocked',\n\t\t\t\t\tdata: widgetDataFW.counts,\n\t\t\t\t\tborderWidth: 1,\n\t\t\t\t\tbackgroundColor: 'steelblue'\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\toptions: {\n\t\t\tlegend: {\n\t\t\t\tdisplay: false\n\t\t\t},\n\t\t\tmaintainAspectRatio: false,\n\t\t\tresponsive: true,\n\t\t\tscales: {\n\t\t\t\ty: {\n\t\t\t\t\tticks: {\n\t\t\t\t\t\tprecision: 0\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\ttitle: {\n\t\t\t\tdisplay: true,\n\t\t\t\ttext: 'Blocked attacks',\n\t\t\t\tfontSize: 18\n\t\t\t},\n\t\t\tplugins: {\n\t\t\t\tlegend: {\n\t\t\t\t\tdisplay: false\n\t\t\t\t},\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\ttext: 'Blocked attacks',\n\t\t\t\t\tfont: {\n\t\t\t\t\t\tsize: 18,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\telements: {\n\t\t\t\tbar:{\n\t\t\t\t\tbackgroundColor: 'steelblue'\n\t\t\t\t}\n\t\t\t},\n\t\t\tanimations: {\n\t\t\t\ttension: {\n\t\t\t\t\tduration: 1000,\n\t\t\t\t\teasing: 'linear',\n\t\t\t\t\tfrom: 1,\n\t\t\t\t\tto: 0,\n\t\t\t\t\tloop: true\n\t\t\t\t}\n\t\t\t},\n\n\t\t}\n\t});\n\n});\n"],"names":["jQuery","document","ready","on","show","setTimeout","window","scrollTo","offset","top","submit","location","hash","parent","css","locale","navigator","language","userLanguage","date_formatter","Intl","DateTimeFormat","month","day","reformatWidgetData","spbcDashboardWidget","let","widgetData","labels","counts","i","length","push","format","Date","ctx","getElementById","widgetDataFW","widgetDataBFP","Chart","type","data","datasets","label","borderWidth","backgroundColor","options","legend","display","maintainAspectRatio","responsive","scales","y","ticks","precision","title","text","fontSize","plugins","font","size","elements","bar","animations","tension","duration","easing","from","to","loop"],"mappings":"AAAAA,OAAOC,QAAQ,EAAEC,MAAM,WAGtBF,OAAO,2BAA2B,EAAEG,GAAG,QAAS,WAC/CH,OAAO,iBAAiB,EAAEI,KAAK,EAC/BC,WAAW,WAAWC,OAAOC,SAAS,EAAGP,OAAO,sBAAsB,EAAEQ,OAAO,EAAEC,IAAM,GAAG,CAAE,EAAG,CAAC,EAChGJ,WAAW,WAAWL,OAAO,oBAAoB,EAAEU,OAAO,CAAE,EAAG,IAAI,CACpE,CAAC,EAEmB,cAAjBC,SAASC,MACXP,WAAW,WAAWC,OAAOC,SAAS,EAAGP,OAAO,sBAAsB,EAAEQ,OAAO,EAAEC,IAAM,GAAG,CAAE,EAAG,CAAC,EAGjGT,OAAO,sBAAsB,EAAEa,OAAO,EAAEC,IAAI,UAAW,CAAC,EAExDC,OAASC,UAAUC,UAAYD,UAAUE,aAEzC,IAAIC,EAAiB,IAAIC,KAAKC,eAAeN,OAAQ,CACpDO,MAAO,QACPC,IAAK,SACN,CAAC,EAED,SAASC,EAAmBC,GAC3BC,IAAIC,EAAa,CAACC,OAAS,GAAGC,OAAS,EAAE,EACzC,IAAKH,IAAII,EAAI,EAAGA,EAAIL,EAAoBM,OAAQD,CAAC,GAChDH,EAAWC,OAAOI,KAAKb,EAAec,OAAO,IAAIC,KAAKT,EAAoBK,GAAG,EAAI,CAAC,CAAC,EACnFH,EAAWE,OAAOG,KAAKP,EAAoBK,GAAG,EAAI,EAEnD,OAAOH,CACR,CAEA,IAAMQ,EAAMlC,SAASmC,eAAe,mBAAmB,EAEnDC,EAAeb,EAAmBC,oBAA6B,OAAC,EAChEa,EAAgBd,EAAmBC,oBAA8B,QAAC,EAEtE,IAAIc,MAAMJ,EAAK,CACdK,KAAM,MACNC,KAAM,CACLb,OAAQS,EAAaT,OACrBc,SAAU,CACT,CACCC,MAAO,cACPF,KAAMH,EAAcT,OACpBe,YAAa,EACbC,gBAAiB,MAClB,EACA,CACCF,MAAO,aACPF,KAAMJ,EAAaR,OACnBe,YAAa,EACbC,gBAAiB,WAClB,EAEF,EACAC,QAAS,CACRC,OAAQ,CACPC,QAAS,CAAA,CACV,EACAC,oBAAqB,CAAA,EACrBC,WAAY,CAAA,EACZC,OAAQ,CACPC,EAAG,CACFC,MAAO,CACNC,UAAW,CACZ,CACD,CACD,EACAC,MAAO,CACNP,QAAS,CAAA,EACTQ,KAAM,kBACNC,SAAU,EACX,EACAC,QAAS,CACRX,OAAQ,CACPC,QAAS,CAAA,CACV,EACAO,MAAO,CACNP,QAAS,CAAA,EACTQ,KAAM,kBACNG,KAAM,CACLC,KAAM,EACP,CACD,CACD,EACAC,SAAU,CACTC,IAAI,CACHjB,gBAAiB,WAClB,CACD,EACAkB,WAAY,CACXC,QAAS,CACRC,SAAU,IACVC,OAAQ,SACRC,KAAM,EACNC,GAAI,EACJC,KAAM,CAAA,CACP,CACD,CAED,CACD,CAAC,CAEF,CAAC"}