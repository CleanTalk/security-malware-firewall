{"version":3,"file":"spbc-dashboard-widget.min.js","sources":["spbc-dashboard-widget.js"],"sourcesContent":["jQuery(document).ready(function() {\n    // Set \"refresh\" link handler\n    jQuery('.spbc_widget_refresh_link').on('click', function() {\n        jQuery('.spbc_preloader').show();\n        setTimeout(function() {\n            window.scrollTo(0, jQuery('#spbc_widget_wrapper').offset().top - 130);\n        }, 1);\n        setTimeout(function() {\n            jQuery('#spbc_refresh_form').submit();\n        }, 2500);\n    });\n\n    if (location.hash == '#ct_widget') {\n        setTimeout(function() {\n            window.scrollTo(0, jQuery('#spbc_widget_wrapper').offset().top - 130);\n        }, 1);\n    }\n\n    // Fixing default wrapper style\n    jQuery('#spbc_widget_wrapper').parent().css('padding', 0);\n\n    locale = navigator.language || navigator.userLanguage;\n\n    let dateFormatter = new Intl.DateTimeFormat(locale, {\n        month: 'short',\n        day: 'numeric',\n    });\n\n    /**\n     * Reformat Widget Data\n     * @param {array} spbcDashboardWidget\n     * @return {array}\n     */\n    function reformatWidgetData(spbcDashboardWidget) {\n        let widgetData = {'labels': [], 'counts': []};\n        for (let i = 0; i < spbcDashboardWidget.length; i++) {\n            widgetData.labels.push(dateFormatter.format(new Date(spbcDashboardWidget[i]['0'])));\n            widgetData.counts.push(spbcDashboardWidget[i]['1']);\n        }\n        return widgetData;\n    }\n\n    const ctx = document.getElementById('spbc_widget_chart');\n    // let widgetData = reformatWidgetData(spbcDashboardWidget['data'])\n    let widgetDataFW = reformatWidgetData(spbcDashboardWidget['data_fw']);\n    let widgetDataBFP = reformatWidgetData(spbcDashboardWidget['data_bfp']);\n\n    new Chart(ctx, {\n        type: 'bar',\n        data: {\n            labels: widgetDataFW.labels,\n            datasets: [\n                {\n                    label: 'Visitors blocked by Bruteforce Protection',\n                    data: widgetDataBFP.counts,\n                    borderWidth: 1,\n                    backgroundColor: 'gray',\n                },\n                {\n                    label: 'Visitors blocked by Firewall',\n                    data: widgetDataFW.counts,\n                    borderWidth: 1,\n                    backgroundColor: 'steelblue',\n                },\n            ],\n        },\n        options: {\n            legend: {\n                display: false,\n            },\n            maintainAspectRatio: false,\n            responsive: true,\n            scales: {\n                y: {\n                    ticks: {\n                        precision: 0,\n                    },\n                },\n            },\n            title: {\n                display: true,\n                text: 'Blocked attacks',\n                fontSize: 18,\n            },\n            plugins: {\n                legend: {\n                    display: false,\n                },\n                title: {\n                    display: true,\n                    text: 'Blocked attacks',\n                    font: {\n                        size: 18,\n                    },\n                },\n            },\n            elements: {\n                bar: {\n                    backgroundColor: 'steelblue',\n                },\n            },\n            animations: {\n                tension: {\n                    duration: 1000,\n                    easing: 'linear',\n                    from: 1,\n                    to: 0,\n                    loop: true,\n                },\n            },\n\n        },\n    });\n});\n"],"names":["jQuery","document","ready","on","show","setTimeout","window","scrollTo","offset","top","submit","location","hash","parent","css","locale","navigator","language","userLanguage","let","dateFormatter","Intl","DateTimeFormat","month","day","reformatWidgetData","spbcDashboardWidget","widgetData","labels","counts","i","length","push","format","Date","ctx","getElementById","widgetDataFW","widgetDataBFP","Chart","type","data","datasets","label","borderWidth","backgroundColor","options","legend","display","maintainAspectRatio","responsive","scales","y","ticks","precision","title","text","fontSize","plugins","font","size","elements","bar","animations","tension","duration","easing","from","to","loop"],"mappings":"AAAAA,OAAOC,QAAQ,EAAEC,MAAM,WAEnBF,OAAO,2BAA2B,EAAEG,GAAG,QAAS,WAC5CH,OAAO,iBAAiB,EAAEI,KAAK,EAC/BC,WAAW,WACPC,OAAOC,SAAS,EAAGP,OAAO,sBAAsB,EAAEQ,OAAO,EAAEC,IAAM,GAAG,CACxE,EAAG,CAAC,EACJJ,WAAW,WACPL,OAAO,oBAAoB,EAAEU,OAAO,CACxC,EAAG,IAAI,CACX,CAAC,EAEoB,cAAjBC,SAASC,MACTP,WAAW,WACPC,OAAOC,SAAS,EAAGP,OAAO,sBAAsB,EAAEQ,OAAO,EAAEC,IAAM,GAAG,CACxE,EAAG,CAAC,EAIRT,OAAO,sBAAsB,EAAEa,OAAO,EAAEC,IAAI,UAAW,CAAC,EAExDC,OAASC,UAAUC,UAAYD,UAAUE,aAEzCC,IAAIC,EAAgB,IAAIC,KAAKC,eAAeP,OAAQ,CAChDQ,MAAO,QACPC,IAAK,SACT,CAAC,EAOD,SAASC,EAAmBC,GACxBP,IAAIQ,EAAa,CAACC,OAAU,GAAIC,OAAU,EAAE,EAC5C,IAAKV,IAAIW,EAAI,EAAGA,EAAIJ,EAAoBK,OAAQD,CAAC,GAC7CH,EAAWC,OAAOI,KAAKZ,EAAca,OAAO,IAAIC,KAAKR,EAAoBI,GAAG,EAAI,CAAC,CAAC,EAClFH,EAAWE,OAAOG,KAAKN,EAAoBI,GAAG,EAAI,EAEtD,OAAOH,CACX,CAEA,IAAMQ,EAAMlC,SAASmC,eAAe,mBAAmB,EAEnDC,EAAeZ,EAAmBC,oBAA6B,OAAC,EAChEY,EAAgBb,EAAmBC,oBAA8B,QAAC,EAEtE,IAAIa,MAAMJ,EAAK,CACXK,KAAM,MACNC,KAAM,CACFb,OAAQS,EAAaT,OACrBc,SAAU,CACN,CACIC,MAAO,4CACPF,KAAMH,EAAcT,OACpBe,YAAa,EACbC,gBAAiB,MACrB,EACA,CACIF,MAAO,+BACPF,KAAMJ,EAAaR,OACnBe,YAAa,EACbC,gBAAiB,WACrB,EAER,EACAC,QAAS,CACLC,OAAQ,CACJC,QAAS,CAAA,CACb,EACAC,oBAAqB,CAAA,EACrBC,WAAY,CAAA,EACZC,OAAQ,CACJC,EAAG,CACCC,MAAO,CACHC,UAAW,CACf,CACJ,CACJ,EACAC,MAAO,CACHP,QAAS,CAAA,EACTQ,KAAM,kBACNC,SAAU,EACd,EACAC,QAAS,CACLX,OAAQ,CACJC,QAAS,CAAA,CACb,EACAO,MAAO,CACHP,QAAS,CAAA,EACTQ,KAAM,kBACNG,KAAM,CACFC,KAAM,EACV,CACJ,CACJ,EACAC,SAAU,CACNC,IAAK,CACDjB,gBAAiB,WACrB,CACJ,EACAkB,WAAY,CACRC,QAAS,CACLC,SAAU,IACVC,OAAQ,SACRC,KAAM,EACNC,GAAI,EACJC,KAAM,CAAA,CACV,CACJ,CAEJ,CACJ,CAAC,CACL,CAAC"}