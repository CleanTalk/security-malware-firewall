{"version":3,"file":"spbc-dashboard-widget.min.js","sources":["spbc-dashboard-widget.js"],"sourcesContent":["jQuery(document).ready(function() {\r\n    // Set \"refresh\" link handler\r\n    jQuery('.spbc_widget_refresh_link').on('click', function() {\r\n        jQuery('.spbc_preloader').show();\r\n        setTimeout(function() {\r\n            window.scrollTo(0, jQuery('#spbc_widget_wrapper').offset().top - 130);\r\n        }, 1);\r\n        setTimeout(function() {\r\n            jQuery('#spbc_refresh_form').submit();\r\n        }, 2500);\r\n    });\r\n\r\n    if (location.hash == '#ct_widget') {\r\n        setTimeout(function() {\r\n            window.scrollTo(0, jQuery('#spbc_widget_wrapper').offset().top - 130);\r\n        }, 1);\r\n    }\r\n\r\n    // Fixing default wrapper style\r\n    jQuery('#spbc_widget_wrapper').parent().css('padding', 0);\r\n\r\n    locale = navigator.language || navigator.userLanguage;\r\n\r\n    let dateFormatter = new Intl.DateTimeFormat(locale, {\r\n        month: 'short',\r\n        day: 'numeric',\r\n    });\r\n\r\n    /**\r\n     * Reformat Widget Data\r\n     * @param {array} spbcDashboardWidget\r\n     * @return {array}\r\n     */\r\n    function reformatWidgetData(spbcDashboardWidget) {\r\n        let widgetData = {'labels': [], 'counts': []};\r\n        for (let i = 0; i < spbcDashboardWidget.length; i++) {\r\n            widgetData.labels.push(dateFormatter.format(new Date(spbcDashboardWidget[i]['0'])));\r\n            widgetData.counts.push(spbcDashboardWidget[i]['1']);\r\n        }\r\n        return widgetData;\r\n    }\r\n\r\n    const ctx = document.getElementById('spbc_widget_chart');\r\n    // let widgetData = reformatWidgetData(spbcDashboardWidget['data'])\r\n    let widgetDataFW = reformatWidgetData(spbcDashboardWidget['data_fw']);\r\n    let widgetDataBFP = reformatWidgetData(spbcDashboardWidget['data_bfp']);\r\n\r\n    new Chart(ctx, {\r\n        type: 'bar',\r\n        data: {\r\n            labels: widgetDataFW.labels,\r\n            datasets: [\r\n                {\r\n                    label: 'Visitors blocked by Bruteforce Protection',\r\n                    data: widgetDataBFP.counts,\r\n                    borderWidth: 1,\r\n                    backgroundColor: 'gray',\r\n                },\r\n                {\r\n                    label: 'Visitors blocked by Firewall',\r\n                    data: widgetDataFW.counts,\r\n                    borderWidth: 1,\r\n                    backgroundColor: 'steelblue',\r\n                },\r\n            ],\r\n        },\r\n        options: {\r\n            legend: {\r\n                display: false,\r\n            },\r\n            maintainAspectRatio: false,\r\n            responsive: true,\r\n            scales: {\r\n                y: {\r\n                    ticks: {\r\n                        precision: 0,\r\n                    },\r\n                },\r\n            },\r\n            title: {\r\n                display: true,\r\n                text: 'Blocked attacks',\r\n                fontSize: 18,\r\n            },\r\n            plugins: {\r\n                legend: {\r\n                    display: false,\r\n                },\r\n                title: {\r\n                    display: true,\r\n                    text: 'Blocked attacks',\r\n                    font: {\r\n                        size: 18,\r\n                    },\r\n                },\r\n            },\r\n            elements: {\r\n                bar: {\r\n                    backgroundColor: 'steelblue',\r\n                },\r\n            },\r\n            animations: {\r\n                tension: {\r\n                    duration: 1000,\r\n                    easing: 'linear',\r\n                    from: 1,\r\n                    to: 0,\r\n                    loop: true,\r\n                },\r\n            },\r\n\r\n        },\r\n    });\r\n});\r\n"],"names":["jQuery","document","ready","on","show","setTimeout","window","scrollTo","offset","top","submit","location","hash","parent","css","locale","navigator","language","userLanguage","let","dateFormatter","Intl","DateTimeFormat","month","day","reformatWidgetData","spbcDashboardWidget","widgetData","labels","counts","i","length","push","format","Date","ctx","getElementById","widgetDataFW","widgetDataBFP","Chart","type","data","datasets","label","borderWidth","backgroundColor","options","legend","display","maintainAspectRatio","responsive","scales","y","ticks","precision","title","text","fontSize","plugins","font","size","elements","bar","animations","tension","duration","easing","from","to","loop"],"mappings":"AAAAA,OAAOC,QAAQ,EAAEC,MAAM,WAEnBF,OAAO,2BAA2B,EAAEG,GAAG,QAAS,WAC5CH,OAAO,iBAAiB,EAAEI,KAAK,EAC/BC,WAAW,WACPC,OAAOC,SAAS,EAAGP,OAAO,sBAAsB,EAAEQ,OAAO,EAAEC,IAAM,GAAG,CACxE,EAAG,CAAC,EACJJ,WAAW,WACPL,OAAO,oBAAoB,EAAEU,OAAO,CACxC,EAAG,IAAI,CACX,CAAC,EAEoB,cAAjBC,SAASC,MACTP,WAAW,WACPC,OAAOC,SAAS,EAAGP,OAAO,sBAAsB,EAAEQ,OAAO,EAAEC,IAAM,GAAG,CACxE,EAAG,CAAC,EAIRT,OAAO,sBAAsB,EAAEa,OAAO,EAAEC,IAAI,UAAW,CAAC,EAExDC,OAASC,UAAUC,UAAYD,UAAUE,aAEzCC,IAAIC,EAAgB,IAAIC,KAAKC,eAAeP,OAAQ,CAChDQ,MAAO,QACPC,IAAK,SACT,CAAC,EAOD,SAASC,EAAmBC,GACxBP,IAAIQ,EAAa,CAACC,OAAU,GAAIC,OAAU,EAAE,EAC5C,IAAKV,IAAIW,EAAI,EAAGA,EAAIJ,EAAoBK,OAAQD,CAAC,GAC7CH,EAAWC,OAAOI,KAAKZ,EAAca,OAAO,IAAIC,KAAKR,EAAoBI,GAAG,EAAI,CAAC,CAAC,EAClFH,EAAWE,OAAOG,KAAKN,EAAoBI,GAAG,EAAI,EAEtD,OAAOH,CACX,CAEA,IAAMQ,EAAMlC,SAASmC,eAAe,mBAAmB,EAEnDC,EAAeZ,EAAmBC,oBAA6B,OAAC,EAChEY,EAAgBb,EAAmBC,oBAA8B,QAAC,EAEtE,IAAIa,MAAMJ,EAAK,CACXK,KAAM,MACNC,KAAM,CACFb,OAAQS,EAAaT,OACrBc,SAAU,CACN,CACIC,MAAO,4CACPF,KAAMH,EAAcT,OACpBe,YAAa,EACbC,gBAAiB,MACrB,EACA,CACIF,MAAO,+BACPF,KAAMJ,EAAaR,OACnBe,YAAa,EACbC,gBAAiB,WACrB,EAER,EACAC,QAAS,CACLC,OAAQ,CACJC,QAAS,CAAA,CACb,EACAC,oBAAqB,CAAA,EACrBC,WAAY,CAAA,EACZC,OAAQ,CACJC,EAAG,CACCC,MAAO,CACHC,UAAW,CACf,CACJ,CACJ,EACAC,MAAO,CACHP,QAAS,CAAA,EACTQ,KAAM,kBACNC,SAAU,EACd,EACAC,QAAS,CACLX,OAAQ,CACJC,QAAS,CAAA,CACb,EACAO,MAAO,CACHP,QAAS,CAAA,EACTQ,KAAM,kBACNG,KAAM,CACFC,KAAM,EACV,CACJ,CACJ,EACAC,SAAU,CACNC,IAAK,CACDjB,gBAAiB,WACrB,CACJ,EACAkB,WAAY,CACRC,QAAS,CACLC,SAAU,IACVC,OAAQ,SACRC,KAAM,EACNC,GAAI,EACJC,KAAM,CAAA,CACV,CACJ,CAEJ,CACJ,CAAC,CACL,CAAC"}