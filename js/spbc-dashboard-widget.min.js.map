{"version":3,"file":"spbc-dashboard-widget.min.js","sources":["spbc-dashboard-widget.js"],"sourcesContent":["jQuery(document).ready(function(){\r\n\r\n\t// Set \"refresh\" link handler\r\n\tjQuery(\".spbc_widget_refresh_link\").on('click', function(){\r\n\t\tjQuery('.spbc_preloader').show();\r\n\t\tsetTimeout(function(){window.scrollTo(0, jQuery('#spbc_widget_wrapper').offset().top - 130);}, 1);\r\n\t\tsetTimeout(function(){jQuery(\"#spbc_refresh_form\").submit();}, 2500);\r\n\t});\r\n\r\n\tif(location.hash == '#ct_widget')\r\n\t\tsetTimeout(function(){window.scrollTo(0, jQuery('#spbc_widget_wrapper').offset().top - 130);}, 1);\r\n\r\n\t// Fixing default wrapper style\r\n\tjQuery(\"#spbc_widget_wrapper\").parent().css('padding', 0);\r\n\r\n\tlocale = navigator.language || navigator.userLanguage;\r\n\r\n\tvar date_formatter = new Intl.DateTimeFormat(locale, {\r\n\t\tmonth: \"short\",\r\n\t\tday: \"numeric\"\r\n\t});\r\n\r\n\tfunction reformatWidgetData(spbcDashboardWidget){\r\n\t\tlet widgetData = {'labels':[],'counts':[]}\r\n\t\tfor (let i = 0; i < spbcDashboardWidget.length; i++) {\r\n\t\t\twidgetData.labels.push(date_formatter.format(new Date(spbcDashboardWidget[i]['0'])))\r\n\t\t\twidgetData.counts.push(spbcDashboardWidget[i]['1'])\r\n\t\t}\r\n\t\treturn widgetData\r\n\t}\r\n\r\n\tconst ctx = document.getElementById('spbc_widget_chart')\r\n\t//let widgetData = reformatWidgetData(spbcDashboardWidget['data'])\r\n\tlet widgetDataFW = reformatWidgetData(spbcDashboardWidget['data_fw'])\r\n\tlet widgetDataBFP = reformatWidgetData(spbcDashboardWidget['data_bfp'])\r\n\r\n\tnew Chart(ctx, {\r\n\t\ttype: 'bar',\r\n\t\tdata: {\r\n\t\t\tlabels: widgetDataFW.labels,\r\n\t\t\tdatasets: [\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: 'Visitors blocked by Bruteforce Protection',\r\n\t\t\t\t\tdata: widgetDataBFP.counts,\r\n\t\t\t\t\tborderWidth: 1,\r\n\t\t\t\t\tbackgroundColor: 'gray'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: 'Visitors blocked by Firewall',\r\n\t\t\t\t\tdata: widgetDataFW.counts,\r\n\t\t\t\t\tborderWidth: 1,\r\n\t\t\t\t\tbackgroundColor: 'steelblue'\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t},\r\n\t\toptions: {\r\n\t\t\tlegend: {\r\n\t\t\t\tdisplay: false\r\n\t\t\t},\r\n\t\t\tmaintainAspectRatio: false,\r\n\t\t\tresponsive: true,\r\n\t\t\tscales: {\r\n\t\t\t\ty: {\r\n\t\t\t\t\tticks: {\r\n\t\t\t\t\t\tprecision: 0\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttitle: {\r\n\t\t\t\tdisplay: true,\r\n\t\t\t\ttext: 'Blocked attacks',\r\n\t\t\t\tfontSize: 18\r\n\t\t\t},\r\n\t\t\tplugins: {\r\n\t\t\t\tlegend: {\r\n\t\t\t\t\tdisplay: false\r\n\t\t\t\t},\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\tdisplay: true,\r\n\t\t\t\t\ttext: 'Blocked attacks',\r\n\t\t\t\t\tfont: {\r\n\t\t\t\t\t\tsize: 18,\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\telements: {\r\n\t\t\t\tbar:{\r\n\t\t\t\t\tbackgroundColor: 'steelblue'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tanimations: {\r\n\t\t\t\ttension: {\r\n\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\teasing: 'linear',\r\n\t\t\t\t\tfrom: 1,\r\n\t\t\t\t\tto: 0,\r\n\t\t\t\t\tloop: true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t}\r\n\t});\r\n\r\n});\r\n"],"names":["jQuery","document","ready","on","show","setTimeout","window","scrollTo","offset","top","submit","location","hash","parent","css","locale","navigator","language","userLanguage","date_formatter","Intl","DateTimeFormat","month","day","reformatWidgetData","spbcDashboardWidget","let","widgetData","labels","counts","i","length","push","format","Date","ctx","getElementById","widgetDataFW","widgetDataBFP","Chart","type","data","datasets","label","borderWidth","backgroundColor","options","legend","display","maintainAspectRatio","responsive","scales","y","ticks","precision","title","text","fontSize","plugins","font","size","elements","bar","animations","tension","duration","easing","from","to","loop"],"mappings":"AAAAA,OAAOC,QAAQ,EAAEC,MAAM,WAGtBF,OAAO,2BAA2B,EAAEG,GAAG,QAAS,WAC/CH,OAAO,iBAAiB,EAAEI,KAAK,EAC/BC,WAAW,WAAWC,OAAOC,SAAS,EAAGP,OAAO,sBAAsB,EAAEQ,OAAO,EAAEC,IAAM,GAAG,CAAE,EAAG,CAAC,EAChGJ,WAAW,WAAWL,OAAO,oBAAoB,EAAEU,OAAO,CAAE,EAAG,IAAI,CACpE,CAAC,EAEmB,cAAjBC,SAASC,MACXP,WAAW,WAAWC,OAAOC,SAAS,EAAGP,OAAO,sBAAsB,EAAEQ,OAAO,EAAEC,IAAM,GAAG,CAAE,EAAG,CAAC,EAGjGT,OAAO,sBAAsB,EAAEa,OAAO,EAAEC,IAAI,UAAW,CAAC,EAExDC,OAASC,UAAUC,UAAYD,UAAUE,aAEzC,IAAIC,EAAiB,IAAIC,KAAKC,eAAeN,OAAQ,CACpDO,MAAO,QACPC,IAAK,SACN,CAAC,EAED,SAASC,EAAmBC,GAC3BC,IAAIC,EAAa,CAACC,OAAS,GAAGC,OAAS,EAAE,EACzC,IAAKH,IAAII,EAAI,EAAGA,EAAIL,EAAoBM,OAAQD,CAAC,GAChDH,EAAWC,OAAOI,KAAKb,EAAec,OAAO,IAAIC,KAAKT,EAAoBK,GAAG,EAAI,CAAC,CAAC,EACnFH,EAAWE,OAAOG,KAAKP,EAAoBK,GAAG,EAAI,EAEnD,OAAOH,CACR,CAEA,IAAMQ,EAAMlC,SAASmC,eAAe,mBAAmB,EAEnDC,EAAeb,EAAmBC,oBAA6B,OAAC,EAChEa,EAAgBd,EAAmBC,oBAA8B,QAAC,EAEtE,IAAIc,MAAMJ,EAAK,CACdK,KAAM,MACNC,KAAM,CACLb,OAAQS,EAAaT,OACrBc,SAAU,CACT,CACCC,MAAO,4CACPF,KAAMH,EAAcT,OACpBe,YAAa,EACbC,gBAAiB,MAClB,EACA,CACCF,MAAO,+BACPF,KAAMJ,EAAaR,OACnBe,YAAa,EACbC,gBAAiB,WAClB,EAEF,EACAC,QAAS,CACRC,OAAQ,CACPC,QAAS,CAAA,CACV,EACAC,oBAAqB,CAAA,EACrBC,WAAY,CAAA,EACZC,OAAQ,CACPC,EAAG,CACFC,MAAO,CACNC,UAAW,CACZ,CACD,CACD,EACAC,MAAO,CACNP,QAAS,CAAA,EACTQ,KAAM,kBACNC,SAAU,EACX,EACAC,QAAS,CACRX,OAAQ,CACPC,QAAS,CAAA,CACV,EACAO,MAAO,CACNP,QAAS,CAAA,EACTQ,KAAM,kBACNG,KAAM,CACLC,KAAM,EACP,CACD,CACD,EACAC,SAAU,CACTC,IAAI,CACHjB,gBAAiB,WAClB,CACD,EACAkB,WAAY,CACXC,QAAS,CACRC,SAAU,IACVC,OAAQ,SACRC,KAAM,EACNC,GAAI,EACJC,KAAM,CAAA,CACP,CACD,CAED,CACD,CAAC,CAEF,CAAC"}