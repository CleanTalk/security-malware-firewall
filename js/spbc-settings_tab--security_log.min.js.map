{"version":3,"file":"spbc-settings_tab--security_log.min.js","sources":["spbc-settings_tab--security_log.js"],"sourcesContent":["/**\r\n * Show more security logs\r\n */\r\nfunction spbcSecLogsShowMoreListen() {\r\n    jQuery('#spbc_show_more_button').on('click', function() {\r\n        if (spbcSettingsSecLogs.clicks < 2) {\r\n            spbcSettingsSecLogs.clicks++;\r\n            let data = {\r\n                action: 'spbc_show_more_security_logs',\r\n                amount: spbcSettingsSecLogs.amount * (+spbcSettingsSecLogs.clicks+1),\r\n            };\r\n            let params = {\r\n                button: this,\r\n                spinner: this.nextElementSibling,\r\n                wrapper: jQuery('#spbc_tbl__secuirty_logs').find('tbody'),\r\n                callback: spbcSecLogsShowMoreCallback,\r\n            };\r\n            spbcSendAJAXRequest( data, params );\r\n        } else {\r\n            // Hide \"More logs\" button, show \"Control Panel\" button\r\n            jQuery(this).hide();\r\n            jQuery(this).siblings('.spbc__show_more_logs').css('display', 'inline-block');\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * Callback for SHOW MORE SECURITY LOGS\r\n * @param {*} result\r\n * @param {*} data\r\n * @param {*} params\r\n */\r\nfunction spbcSecLogsShowMoreCallback(result, data, params) {\r\n    if (result.size > 0) {\r\n        jQuery(params.wrapper).html(result.html);\r\n        spbcTblRowActionsListen();\r\n        spbcStartShowHide();\r\n    } else {\r\n        // Hide \"More logs\" button, show \"Control Panel\" button\r\n        jQuery(params.button).hide();\r\n        jQuery(params.button).siblings('.spbc__show_more_logs').css('display', 'inline-block');\r\n    }\r\n}\r\n\r\n/**\r\n * Allow IP\r\n * @param {*} ip\r\n * @return {boolean}\r\n */\r\nfunction spbcSecLogsAllowIp(ip) { // eslint-disable-line no-unused-vars\r\n    spbcSecLogsFilterIp( ip, 'allow');\r\n    return false;\r\n}\r\n\r\n/**\r\n * Ban IP\r\n * @param {*} ip\r\n * @return {boolean}\r\n */\r\nfunction spbcSecLogsBanIp(ip) { // eslint-disable-line no-unused-vars\r\n    spbcSecLogsFilterIp( ip, 'deny');\r\n    return false;\r\n}\r\n\r\n/**\r\n * Filter IP\r\n * @param {*} ip\r\n * @param {*} status\r\n * @param {*} bulk\r\n * @return {boolean}\r\n */\r\nfunction spbcSecLogsFilterIp( ip, status, bulk = false) {\r\n    const data = {\r\n        action: 'spbc_tc__filter_ip',\r\n        ip: ip,\r\n        status: status,\r\n    };\r\n    const params = {\r\n        status: status,\r\n    };\r\n    if (!bulk) {\r\n        params.callback = spbcSecLogsAllowIpCallback;\r\n    }\r\n    spbcSendAJAXRequest( data, params );\r\n\r\n    return false;\r\n}\r\n\r\n/**\r\n * Callback for FILTER IP\r\n * @param {*} result\r\n * @param {*} data\r\n */\r\nfunction spbcSecLogsAllowIpCallback(result, data) {\r\n    console.log(data);\r\n    if (result.success) {\r\n        let msg = data.status === 'allow' ? 'Allowed' : 'Banned';\r\n        alert('Success. Selected IPs have been ' + msg + '. Changes will be applied within 10 minutes.');\r\n    } else {\r\n        alert(result.data);\r\n    }\r\n}\r\n\r\njQuery(document).ready(function() {\r\n    spbcTblRowActionsListen(); // Table. Row actions handler\r\n    spbcTblBulkActionsListen();\r\n    spbcTblPaginationListen(); // Table. Pagination handler\r\n    spbcTblSortListen(); // Table. Sort handler\r\n\r\n    // Handler for show more SECURITY LOGS\r\n    spbcSecLogsShowMoreListen();\r\n\r\n    // Start to hide long values in a table\r\n    spbcStartShowHide();\r\n});\r\n"],"names":["spbcSecLogsShowMoreListen","jQuery","on","data","params","spbcSettingsSecLogs","clicks","action","amount","button","this","spinner","nextElementSibling","wrapper","find","callback","spbcSecLogsShowMoreCallback","spbcSendAJAXRequest","hide","siblings","css","result","size","html","spbcTblRowActionsListen","spbcStartShowHide","spbcSecLogsAllowIp","ip","spbcSecLogsFilterIp","spbcSecLogsBanIp","status","bulk","spbcSecLogsAllowIpCallback","console","log","success","msg","alert","document","ready","spbcTblBulkActionsListen","spbcTblPaginationListen","spbcTblSortListen"],"mappings":"AAGA,SAASA,4BACLC,OAAO,wBAAwB,EAAEC,GAAG,QAAS,WACzC,IAEQC,EAIAC,EANJC,oBAAoBC,OAAS,GAC7BD,oBAAoBC,MAAM,GACtBH,EAAO,CACPI,OAAQ,+BACRC,OAAQH,oBAAoBG,QAAU,CAACH,oBAAoBC,OAAO,EACtE,EACIF,EAAS,CACTK,OAAQC,KACRC,QAASD,KAAKE,mBACdC,QAASZ,OAAO,0BAA0B,EAAEa,KAAK,OAAO,EACxDC,SAAUC,2BACd,EACAC,oBAAqBd,EAAMC,CAAO,IAGlCH,OAAOS,IAAI,EAAEQ,KAAK,EAClBjB,OAAOS,IAAI,EAAES,SAAS,uBAAuB,EAAEC,IAAI,UAAW,cAAc,EAEpF,CAAC,CACL,CAQA,SAASJ,4BAA4BK,EAAQlB,EAAMC,GAC7B,EAAdiB,EAAOC,MACPrB,OAAOG,EAAOS,OAAO,EAAEU,KAAKF,EAAOE,IAAI,EACvCC,wBAAwB,EACxBC,kBAAkB,IAGlBxB,OAAOG,EAAOK,MAAM,EAAES,KAAK,EAC3BjB,OAAOG,EAAOK,MAAM,EAAEU,SAAS,uBAAuB,EAAEC,IAAI,UAAW,cAAc,EAE7F,CAOA,SAASM,mBAAmBC,GAExB,OADAC,oBAAqBD,EAAI,OAAO,EACzB,CAAA,CACX,CAOA,SAASE,iBAAiBF,GAEtB,OADAC,oBAAqBD,EAAI,MAAM,EACxB,CAAA,CACX,CASA,SAASC,oBAAqBD,EAAIG,EAAQC,EAAO,CAAA,GACvC5B,EAAO,CACTI,OAAQ,qBACRoB,GAAIA,EACJG,OAAQA,CACZ,EACM1B,EAAS,CACX0B,OAAQA,CACZ,EAMA,OALKC,IACD3B,EAAOW,SAAWiB,4BAEtBf,oBAAqBd,EAAMC,CAAO,EAE3B,CAAA,CACX,CAOA,SAAS4B,2BAA2BX,EAAQlB,GACxC8B,QAAQC,IAAI/B,CAAI,EACZkB,EAAOc,SACHC,EAAsB,UAAhBjC,EAAK2B,OAAqB,UAAY,SAChDO,MAAM,mCAAqCD,EAAM,8CAA8C,GAE/FC,MAAMhB,EAAOlB,IAAI,CAEzB,CAEAF,OAAOqC,QAAQ,EAAEC,MAAM,WACnBf,wBAAwB,EACxBgB,yBAAyB,EACzBC,wBAAwB,EACxBC,kBAAkB,EAGlB1C,0BAA0B,EAG1ByB,kBAAkB,CACtB,CAAC"}