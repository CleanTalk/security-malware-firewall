{"version":3,"file":"spbc-settings_tab--security_log.min.js","sources":["spbc-settings_tab--security_log.js"],"sourcesContent":["// SECURITY LOGS SHOW MORE\nfunction spbc_sec_logs__show_more__listen(){\n\tjQuery('#spbc_show_more_button').on('click', function(){\n\t\tif(spbcSettingsSecLogs.clicks < 2){\n\t\t\tspbcSettingsSecLogs.clicks++;\n\t\t\tvar data = {\n\t\t\t\taction: 'spbc_show_more_security_logs',\n\t\t\t\tamount: spbcSettingsSecLogs.amount * (+spbcSettingsSecLogs.clicks+1),\n\t\t\t};\n\t\t\tvar params = {\n\t\t\t\tbutton: this,\n\t\t\t\tspinner: this.nextElementSibling,\n\t\t\t\twrapper: jQuery('#spbc_tbl__secuirty_logs').find('tbody'),\n\t\t\t\tcallback: spbc_sec_logs__show_more__callback,\n\t\t\t};\n\t\t\tspbc_sendAJAXRequest( data, params );\n\t\t}else{\n\t\t\t// Hide \"More logs\" button, show \"Control Panel\" button\n\t\t\tjQuery(this).hide();\n\t\t\tjQuery(this).siblings('.spbc__show_more_logs').css('display', 'inline-block');\n\t\t}\n\t});\n}\n\n\t// Callback for SHOW MORE SECURITY LOGS\nfunction spbc_sec_logs__show_more__callback(result, data, params){\t\n\tconsole.log(result);\n\tif(result.size > 0){\n\t\tjQuery(params.wrapper).html(result.html);\n\t\tspbc_tbl__row_actions__listen();\n\t\tspbcStartShowHide();\n\t}else{\n\t\t// Hide \"More logs\" button, show \"Control Panel\" button\n\t\tjQuery(params.button).hide();\n\t\tjQuery(params.button).siblings('.spbc__show_more_logs').css('display', 'inline-block');\n\t}\n}\n\nfunction spbc_sec_logs__allow_ip(ip) {\n\tspbc_sec_logs__filter_ip( ip, 'allow')\n\treturn false;\n}\n\nfunction spbc_sec_logs__ban_ip(ip) {\n\tspbc_sec_logs__filter_ip( ip, 'deny')\n\treturn false;\n}\n\nfunction spbc_sec_logs__filter_ip( ip, status, bulk = false) {\n\tconst data = {\n\t\taction: 'spbc_tc__filter_ip',\n\t\tip: ip,\n\t\tstatus: status\n\t};\n\tconst params = {\n\t\tstatus: status,\n\t};\n\tif (!bulk) {\n\t\tparams.callback = spbc_sec_logs__allow_ip__callback;\n\t}\n\tspbc_sendAJAXRequest( data, params );\n\n\treturn false;\n}\n\nfunction spbc_sec_logs__allow_ip__callback(result, data) {\n\tconsole.log(data);\n\tif (result.success) {\n\t\tlet msg = data.status === 'allow' ? 'Allowed' : 'Banned';\n\t\talert('Success. Selected IPs have been ' + msg + '. Changes will be applied within 10 minutes.');\n\t} else {\n\t\talert(result.data);\n\t}\n}\n\njQuery(document).ready(function(){\n\t\n\tspbc_tbl__row_actions__listen(); // Table. Row actions handler\n\tspbc_tbl__bulk_actions__listen();\n\tspbc_tbl__pagination__listen();  // Table. Pagination handler\n\tspbc_tbl__sort__listen();        // Table. Sort handler\n\t\n\t// Handler for show more SECURITY LOGS\n\tspbc_sec_logs__show_more__listen();\n\t\n\t// Start to hide long values in a table\n\tspbcStartShowHide();\n\t\n});"],"names":["spbc_sec_logs__show_more__listen","jQuery","on","data","params","spbcSettingsSecLogs","clicks","action","amount","button","this","spinner","nextElementSibling","wrapper","find","callback","spbc_sec_logs__show_more__callback","spbc_sendAJAXRequest","hide","siblings","css","result","console","log","size","html","spbc_tbl__row_actions__listen","spbcStartShowHide","spbc_sec_logs__allow_ip","ip","spbc_sec_logs__filter_ip","spbc_sec_logs__ban_ip","status","bulk","spbc_sec_logs__allow_ip__callback","success","msg","alert","document","ready","spbc_tbl__bulk_actions__listen","spbc_tbl__pagination__listen","spbc_tbl__sort__listen"],"mappings":"AACA,SAASA,mCACRC,OAAO,wBAAwB,EAAEC,GAAG,QAAS,WAC5C,IAEKC,EAIAC,EANFC,oBAAoBC,OAAS,GAC/BD,oBAAoBC,MAAM,GACtBH,EAAO,CACVI,OAAQ,+BACRC,OAAQH,oBAAoBG,QAAU,CAACH,oBAAoBC,OAAO,EACnE,EACIF,EAAS,CACZK,OAAQC,KACRC,QAASD,KAAKE,mBACdC,QAASZ,OAAO,0BAA0B,EAAEa,KAAK,OAAO,EACxDC,SAAUC,kCACX,EACAC,qBAAsBd,EAAMC,CAAO,IAGnCH,OAAOS,IAAI,EAAEQ,KAAK,EAClBjB,OAAOS,IAAI,EAAES,SAAS,uBAAuB,EAAEC,IAAI,UAAW,cAAc,EAE9E,CAAC,CACF,CAGA,SAASJ,mCAAmCK,EAAQlB,EAAMC,GACzDkB,QAAQC,IAAIF,CAAM,EACD,EAAdA,EAAOG,MACTvB,OAAOG,EAAOS,OAAO,EAAEY,KAAKJ,EAAOI,IAAI,EACvCC,8BAA8B,EAC9BC,kBAAkB,IAGlB1B,OAAOG,EAAOK,MAAM,EAAES,KAAK,EAC3BjB,OAAOG,EAAOK,MAAM,EAAEU,SAAS,uBAAuB,EAAEC,IAAI,UAAW,cAAc,EAEvF,CAEA,SAASQ,wBAAwBC,GAEhC,OADAC,yBAA0BD,EAAI,OAAO,EAC9B,CAAA,CACR,CAEA,SAASE,sBAAsBF,GAE9B,OADAC,yBAA0BD,EAAI,MAAM,EAC7B,CAAA,CACR,CAEA,SAASC,yBAA0BD,EAAIG,EAAQC,EAAO,CAAA,GAC/C9B,EAAO,CACZI,OAAQ,qBACRsB,GAAIA,EACJG,OAAQA,CACT,EACM5B,EAAS,CACd4B,OAAQA,CACT,EAMA,OALKC,IACJ7B,EAAOW,SAAWmB,mCAEnBjB,qBAAsBd,EAAMC,CAAO,EAE5B,CAAA,CACR,CAEA,SAAS8B,kCAAkCb,EAAQlB,GAClDmB,QAAQC,IAAIpB,CAAI,EACZkB,EAAOc,SACNC,EAAsB,UAAhBjC,EAAK6B,OAAqB,UAAY,SAChDK,MAAM,mCAAqCD,EAAM,8CAA8C,GAE/FC,MAAMhB,EAAOlB,IAAI,CAEnB,CAEAF,OAAOqC,QAAQ,EAAEC,MAAM,WAEtBb,8BAA8B,EAC9Bc,+BAA+B,EAC/BC,6BAA6B,EAC7BC,uBAAuB,EAGvB1C,iCAAiC,EAGjC2B,kBAAkB,CAEnB,CAAC"}