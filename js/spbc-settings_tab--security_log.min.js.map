{"version":3,"file":"spbc-settings_tab--security_log.min.js","sources":["spbc-settings_tab--security_log.js"],"sourcesContent":["// SECURITY LOGS SHOW MORE\nfunction spbc_sec_logs__show_more__listen() {\n    jQuery('#spbc_show_more_button').on('click', function() {\n        if (spbcSettingsSecLogs.clicks < 2) {\n            spbcSettingsSecLogs.clicks++;\n            let data = {\n                action: 'spbc_show_more_security_logs',\n                amount: spbcSettingsSecLogs.amount * (+spbcSettingsSecLogs.clicks+1),\n            };\n            let params = {\n                button: this,\n                spinner: this.nextElementSibling,\n                wrapper: jQuery('#spbc_tbl__secuirty_logs').find('tbody'),\n                callback: spbc_sec_logs__show_more__callback,\n            };\n            spbcSendAJAXRequest( data, params );\n        } else {\n            // Hide \"More logs\" button, show \"Control Panel\" button\n            jQuery(this).hide();\n            jQuery(this).siblings('.spbc__show_more_logs').css('display', 'inline-block');\n        }\n    });\n}\n\n// Callback for SHOW MORE SECURITY LOGS\nfunction spbc_sec_logs__show_more__callback(result, data, params) {\n    console.log(result);\n    if (result.size > 0) {\n        jQuery(params.wrapper).html(result.html);\n        spbcTblRowActionsListen();\n        spbcStartShowHide();\n    } else {\n        // Hide \"More logs\" button, show \"Control Panel\" button\n        jQuery(params.button).hide();\n        jQuery(params.button).siblings('.spbc__show_more_logs').css('display', 'inline-block');\n    }\n}\n\nfunction spbc_sec_logs__allow_ip(ip) {\n    spbc_sec_logs__filter_ip( ip, 'allow');\n    return false;\n}\n\nfunction spbc_sec_logs__ban_ip(ip) {\n    spbc_sec_logs__filter_ip( ip, 'deny');\n    return false;\n}\n\nfunction spbc_sec_logs__filter_ip( ip, status, bulk = false) {\n    const data = {\n        action: 'spbc_tc__filter_ip',\n        ip: ip,\n        status: status,\n    };\n    const params = {\n        status: status,\n    };\n    if (!bulk) {\n        params.callback = spbc_sec_logs__allow_ip__callback;\n    }\n    spbcSendAJAXRequest( data, params );\n\n    return false;\n}\n\nfunction spbc_sec_logs__allow_ip__callback(result, data) {\n    console.log(data);\n    if (result.success) {\n        let msg = data.status === 'allow' ? 'Allowed' : 'Banned';\n        alert('Success. Selected IPs have been ' + msg + '. Changes will be applied within 10 minutes.');\n    } else {\n        alert(result.data);\n    }\n}\n\njQuery(document).ready(function() {\n    spbcTblRowActionsListen(); // Table. Row actions handler\n    spbcTblBulkActionsListen();\n    spbcTblPaginationListen(); // Table. Pagination handler\n    spbcTblSortListen(); // Table. Sort handler\n\n    // Handler for show more SECURITY LOGS\n    spbc_sec_logs__show_more__listen();\n\n    // Start to hide long values in a table\n    spbcStartShowHide();\n});\n"],"names":["spbc_sec_logs__show_more__listen","jQuery","on","data","params","spbcSettingsSecLogs","clicks","action","amount","button","this","spinner","nextElementSibling","wrapper","find","callback","spbc_sec_logs__show_more__callback","spbcSendAJAXRequest","hide","siblings","css","result","console","log","size","html","spbcTblRowActionsListen","spbcStartShowHide","spbc_sec_logs__allow_ip","ip","spbc_sec_logs__filter_ip","spbc_sec_logs__ban_ip","status","bulk","spbc_sec_logs__allow_ip__callback","success","msg","alert","document","ready","spbcTblBulkActionsListen","spbcTblPaginationListen","spbcTblSortListen"],"mappings":"AACA,SAASA,mCACLC,OAAO,wBAAwB,EAAEC,GAAG,QAAS,WACzC,IAEQC,EAIAC,EANJC,oBAAoBC,OAAS,GAC7BD,oBAAoBC,MAAM,GACtBH,EAAO,CACPI,OAAQ,+BACRC,OAAQH,oBAAoBG,QAAU,CAACH,oBAAoBC,OAAO,EACtE,EACIF,EAAS,CACTK,OAAQC,KACRC,QAASD,KAAKE,mBACdC,QAASZ,OAAO,0BAA0B,EAAEa,KAAK,OAAO,EACxDC,SAAUC,kCACd,EACAC,oBAAqBd,EAAMC,CAAO,IAGlCH,OAAOS,IAAI,EAAEQ,KAAK,EAClBjB,OAAOS,IAAI,EAAES,SAAS,uBAAuB,EAAEC,IAAI,UAAW,cAAc,EAEpF,CAAC,CACL,CAGA,SAASJ,mCAAmCK,EAAQlB,EAAMC,GACtDkB,QAAQC,IAAIF,CAAM,EACA,EAAdA,EAAOG,MACPvB,OAAOG,EAAOS,OAAO,EAAEY,KAAKJ,EAAOI,IAAI,EACvCC,wBAAwB,EACxBC,kBAAkB,IAGlB1B,OAAOG,EAAOK,MAAM,EAAES,KAAK,EAC3BjB,OAAOG,EAAOK,MAAM,EAAEU,SAAS,uBAAuB,EAAEC,IAAI,UAAW,cAAc,EAE7F,CAEA,SAASQ,wBAAwBC,GAE7B,OADAC,yBAA0BD,EAAI,OAAO,EAC9B,CAAA,CACX,CAEA,SAASE,sBAAsBF,GAE3B,OADAC,yBAA0BD,EAAI,MAAM,EAC7B,CAAA,CACX,CAEA,SAASC,yBAA0BD,EAAIG,EAAQC,EAAO,CAAA,GAC5C9B,EAAO,CACTI,OAAQ,qBACRsB,GAAIA,EACJG,OAAQA,CACZ,EACM5B,EAAS,CACX4B,OAAQA,CACZ,EAMA,OALKC,IACD7B,EAAOW,SAAWmB,mCAEtBjB,oBAAqBd,EAAMC,CAAO,EAE3B,CAAA,CACX,CAEA,SAAS8B,kCAAkCb,EAAQlB,GAC/CmB,QAAQC,IAAIpB,CAAI,EACZkB,EAAOc,SACHC,EAAsB,UAAhBjC,EAAK6B,OAAqB,UAAY,SAChDK,MAAM,mCAAqCD,EAAM,8CAA8C,GAE/FC,MAAMhB,EAAOlB,IAAI,CAEzB,CAEAF,OAAOqC,QAAQ,EAAEC,MAAM,WACnBb,wBAAwB,EACxBc,yBAAyB,EACzBC,wBAAwB,EACxBC,kBAAkB,EAGlB1C,iCAAiC,EAGjC2B,kBAAkB,CACtB,CAAC"}