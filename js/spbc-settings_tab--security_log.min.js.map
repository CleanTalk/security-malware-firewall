{"version":3,"file":"spbc-settings_tab--security_log.min.js","sources":["spbc-settings_tab--security_log.js"],"sourcesContent":["/**\n * Show more security logs\n */\nfunction spbcSecLogsShowMoreListen() {\n    jQuery('#spbc_show_more_button').on('click', function() {\n        if (spbcSettingsSecLogs.clicks < 2) {\n            spbcSettingsSecLogs.clicks++;\n            let data = {\n                action: 'spbc_show_more_security_logs',\n                amount: spbcSettingsSecLogs.amount * (+spbcSettingsSecLogs.clicks+1),\n            };\n            let params = {\n                button: this,\n                spinner: this.nextElementSibling,\n                wrapper: jQuery('#spbc_tbl__secuirty_logs').find('tbody'),\n                callback: spbcSecLogsShowMoreCallback,\n            };\n            spbcSendAJAXRequest( data, params );\n        } else {\n            // Hide \"More logs\" button, show \"Control Panel\" button\n            jQuery(this).hide();\n            jQuery(this).siblings('.spbc__show_more_logs').css('display', 'inline-block');\n        }\n    });\n}\n\n/**\n * Callback for SHOW MORE SECURITY LOGS\n * @param {*} result\n * @param {*} data\n * @param {*} params\n */\nfunction spbcSecLogsShowMoreCallback(result, data, params) {\n    if (result.size > 0) {\n        jQuery(params.wrapper).html(result.html);\n        spbcTblRowActionsListen();\n        spbcStartShowHide();\n    } else {\n        // Hide \"More logs\" button, show \"Control Panel\" button\n        jQuery(params.button).hide();\n        jQuery(params.button).siblings('.spbc__show_more_logs').css('display', 'inline-block');\n    }\n}\n\n/**\n * Allow IP\n * @param {*} ip\n * @return {boolean}\n */\nfunction spbcSecLogsAllowIp(ip) { // eslint-disable-line no-unused-vars\n    spbcSecLogsFilterIp( ip, 'allow');\n    return false;\n}\n\n/**\n * Ban IP\n * @param {*} ip\n * @return {boolean}\n */\nfunction spbcSecLogsBanIp(ip) { // eslint-disable-line no-unused-vars\n    spbcSecLogsFilterIp( ip, 'deny');\n    return false;\n}\n\n/**\n * Filter IP\n * @param {*} ip\n * @param {*} status\n * @param {*} bulk\n * @return {boolean}\n */\nfunction spbcSecLogsFilterIp( ip, status, bulk = false) {\n    const data = {\n        action: 'spbc_tc__filter_ip',\n        ip: ip,\n        status: status,\n    };\n    const params = {\n        status: status,\n    };\n    if (!bulk) {\n        params.callback = spbcSecLogsAllowIpCallback;\n    }\n    spbcSendAJAXRequest( data, params );\n\n    return false;\n}\n\n/**\n * Callback for FILTER IP\n * @param {*} result\n * @param {*} data\n */\nfunction spbcSecLogsAllowIpCallback(result, data) {\n    console.log(data);\n    if (result.success) {\n        let msg = data.status === 'allow' ? 'Allowed' : 'Banned';\n        alert('Success. Selected IPs have been ' + msg + '. Changes will be applied within 10 minutes.');\n    } else {\n        alert(result.data);\n    }\n}\n\njQuery(document).ready(function() {\n    spbcTblRowActionsListen(); // Table. Row actions handler\n    spbcTblBulkActionsListen();\n    spbcTblPaginationListen(); // Table. Pagination handler\n    spbcTblSortListen(); // Table. Sort handler\n\n    // Handler for show more SECURITY LOGS\n    spbcSecLogsShowMoreListen();\n\n    // Start to hide long values in a table\n    spbcStartShowHide();\n});\n"],"names":["spbcSecLogsShowMoreListen","jQuery","on","data","params","spbcSettingsSecLogs","clicks","action","amount","button","this","spinner","nextElementSibling","wrapper","find","callback","spbcSecLogsShowMoreCallback","spbcSendAJAXRequest","hide","siblings","css","result","size","html","spbcTblRowActionsListen","spbcStartShowHide","spbcSecLogsAllowIp","ip","spbcSecLogsFilterIp","spbcSecLogsBanIp","status","bulk","spbcSecLogsAllowIpCallback","console","log","success","msg","alert","document","ready","spbcTblBulkActionsListen","spbcTblPaginationListen","spbcTblSortListen"],"mappings":"AAGA,SAASA,4BACLC,OAAO,wBAAwB,EAAEC,GAAG,QAAS,WACzC,IAEQC,EAIAC,EANJC,oBAAoBC,OAAS,GAC7BD,oBAAoBC,MAAM,GACtBH,EAAO,CACPI,OAAQ,+BACRC,OAAQH,oBAAoBG,QAAU,CAACH,oBAAoBC,OAAO,EACtE,EACIF,EAAS,CACTK,OAAQC,KACRC,QAASD,KAAKE,mBACdC,QAASZ,OAAO,0BAA0B,EAAEa,KAAK,OAAO,EACxDC,SAAUC,2BACd,EACAC,oBAAqBd,EAAMC,CAAO,IAGlCH,OAAOS,IAAI,EAAEQ,KAAK,EAClBjB,OAAOS,IAAI,EAAES,SAAS,uBAAuB,EAAEC,IAAI,UAAW,cAAc,EAEpF,CAAC,CACL,CAQA,SAASJ,4BAA4BK,EAAQlB,EAAMC,GAC7B,EAAdiB,EAAOC,MACPrB,OAAOG,EAAOS,OAAO,EAAEU,KAAKF,EAAOE,IAAI,EACvCC,wBAAwB,EACxBC,kBAAkB,IAGlBxB,OAAOG,EAAOK,MAAM,EAAES,KAAK,EAC3BjB,OAAOG,EAAOK,MAAM,EAAEU,SAAS,uBAAuB,EAAEC,IAAI,UAAW,cAAc,EAE7F,CAOA,SAASM,mBAAmBC,GAExB,OADAC,oBAAqBD,EAAI,OAAO,EACzB,CAAA,CACX,CAOA,SAASE,iBAAiBF,GAEtB,OADAC,oBAAqBD,EAAI,MAAM,EACxB,CAAA,CACX,CASA,SAASC,oBAAqBD,EAAIG,EAAQC,EAAO,CAAA,GACvC5B,EAAO,CACTI,OAAQ,qBACRoB,GAAIA,EACJG,OAAQA,CACZ,EACM1B,EAAS,CACX0B,OAAQA,CACZ,EAMA,OALKC,IACD3B,EAAOW,SAAWiB,4BAEtBf,oBAAqBd,EAAMC,CAAO,EAE3B,CAAA,CACX,CAOA,SAAS4B,2BAA2BX,EAAQlB,GACxC8B,QAAQC,IAAI/B,CAAI,EACZkB,EAAOc,SACHC,EAAsB,UAAhBjC,EAAK2B,OAAqB,UAAY,SAChDO,MAAM,mCAAqCD,EAAM,8CAA8C,GAE/FC,MAAMhB,EAAOlB,IAAI,CAEzB,CAEAF,OAAOqC,QAAQ,EAAEC,MAAM,WACnBf,wBAAwB,EACxBgB,yBAAyB,EACzBC,wBAAwB,EACxBC,kBAAkB,EAGlB1C,0BAA0B,EAG1ByB,kBAAkB,CACtB,CAAC"}