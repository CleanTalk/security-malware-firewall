{"version":3,"sources":["spbc-table.js"],"names":["spbc_tbl__bulk_actions__listen","jQuery","on","spbc_bulk_action","confirm","spbcTable","warning_bulk","self","this","action","siblings","children","first","selectedIndex","value","parents","find","is","click","prop","spbc_tbl__row_actions__listen","console","log","data","add_action","attr","id","parent","cols","params","callback","spbc_tbl__row_actions__callback","spinner","confirmation","warning_default","spbc_sendAJAXRequest","result","obj","color","css","background","html","setTimeout","fadeOut","temp_html","tmp","remove","spbc_tbl__pagination__listen","spbc_tbl__pagination__callback","notJson","page","val","args","eval","spbc_scanner__switch_table","table","test","domain","removeAttr","spbc_tbl__sort__listen","spbcStartShowHide","spbc_tbl__sort__callback","order_by","order","document","ready"],"mappings":"AAGA,SAASA,iCACRC,OAAO,4BAA4BC,GAAG,QAAS,WAE9C,GAAIC,kBAAqBC,QAAQC,UAAUC,cAA3C,CAGA,IAAIC,EAAOJ,kBAAoBF,OAAOO,MAElCC,GADJN,iBAAmBI,GACDG,SAAS,UAAUC,WAAWJ,EAAKG,SAAS,UAAUE,QAAQ,GAAGC,eAAeC,MAC/FP,EAAKQ,QAAQ,aAAaC,KAAK,cAAcC,GAAG,YAC/CV,EAAKQ,QAAQ,aAAaC,KAAK,sBAAsBJ,QAAQG,QAAQ,MAAMC,KAAK,oBAAoBP,GAAQ,IAC9GF,EAAKQ,QAAQ,aAAaC,KAAK,sBAAsBJ,QAAQG,QAAQ,MAAMC,KAAK,oBAAoBP,GAAQS,QAC5GX,EAAKQ,QAAQ,aAAaC,KAAK,sBAAsBJ,QAAQO,KAAK,WAAW,KAE7EZ,EAAKQ,QAAQ,aAAaC,KAAK,sBAAsBJ,QAAQO,KAAK,WAAW,GAC7EZ,EAAKW,SAGNf,iBAAmB,QAMtB,SAASiB,gCACRnB,OAAO,yBAAyBC,GAAG,QAAS,WAC3CmB,QAAQC,IAAI,uCACZ,IAAIf,EAAON,OAAOO,MACde,EAAO,CACVd,OAAQ,uBACRe,WAAYjB,EAAKkB,KAAK,cACtBC,GAAInB,EAAKoB,SAASF,KAAK,OACvBG,KAAMrB,EAAKoB,SAASF,KAAK,gBAEtBI,EAAS,CACZC,SAAUC,gCACVC,QAASzB,EAAKoB,SAASjB,SAAS,yBAEjC,IAAIP,iBAAiB,CACpB,IAAI8B,EAAe5B,UAAU,WAAWE,EAAKkB,KAAK,gBAAkBpB,UAAU6B,gBAC3E9B,QAAQ6B,IACVE,qBAAqBZ,EAAMM,EAAQtB,EAAKQ,QAAQ,OAE/CZ,kBACFgC,qBAAqBZ,EAAMM,EAAQtB,EAAKQ,QAAQ,SAMnD,SAASgB,gCAAgCK,EAAQb,EAAMM,EAAQQ,GAG9D,GAFGD,EAAOE,OAAWD,EAAIE,IAAI,CAACC,WAAYJ,EAAOI,WAAYF,MAAOF,EAAOE,QACxEF,EAAOK,OAAWJ,EAAII,KAAKL,EAAOK,MAAOC,WAAW,WAAWL,EAAIM,QAAQ,MAAQ,OACnFP,EAAOQ,UAAU,CACnB,IAAIC,EAAIR,EAAII,OACZJ,EAAII,KAAKL,EAAOQ,WAChBF,WAAW,WACVL,EAAII,KAAKI,GAAKN,IAAI,CAACC,WAAY,YAAYxB,KAAK,iDAAiDO,EAAKC,YAAYsB,UACjH,KAEA3C,kBACFA,iBAAiBe,QAInB,SAAS6B,+BACR,IAAIxB,KAAO,CAACd,OAAQ,uBAChBoB,OAAS,CAACC,SAAUkB,+BAAgCC,SAAS,GACjEhD,OAAO,2BAA2BC,GAAG,QAAS,WAC7CD,OAAOO,MAAMO,QAAQ,aAAaC,KAAK,2BAA2BS,KAAK,WAAY,cAEpFxB,OAAO,uBAAuBC,GAAG,QAAS,WACzC,IAAIK,KAAON,OAAOO,MACd6B,IAAM9B,KAAKQ,QAAQ,aACvBQ,KAAK2B,KAAO3C,KAAKG,SAAS,8BAA8ByC,MACxD5B,KAAK6B,KAAOC,KAAK,QAAQhB,IAAIZ,KAAK,OAClCI,OAAOG,QAAUzB,KAAKG,SAAS,yBAC/ByB,qBAAqBZ,KAAMM,OAAQQ,OAEpCpC,OAAO,yBAAyBC,GAAG,QAAS,WAC3C,IAAIK,KAAON,OAAOO,MACd6B,IAAM9B,KAAKQ,QAAQ,aACvBQ,KAAK2B,KAAK3C,KAAKQ,QAAQ,4BAA4BU,KAAK,aACxDF,KAAK6B,KAAKC,KAAK,QAAQhB,IAAIZ,KAAK,OAChCI,OAAOG,QAAUzB,KAAKG,SAAS,yBAC/ByB,qBAAqBZ,KAAMM,OAAQQ,OAEpCpC,OAAO,yBAAyBC,GAAG,QAAS,WAC3C,IAAIK,KAAON,OAAOO,MACd6B,IAAM9B,KAAKQ,QAAQ,aACvBQ,KAAK2B,KAAK3C,KAAKQ,QAAQ,4BAA4BU,KAAK,aACxDF,KAAK6B,KAAKC,KAAK,QAAQhB,IAAIZ,KAAK,OAChCI,OAAOG,QAAUzB,KAAKG,SAAS,yBAC/ByB,qBAAqBZ,KAAMM,OAAQQ,OAEpCpC,OAAO,wBAAwBC,GAAG,QAAS,WAC1C,IAAIK,KAAON,OAAOO,MACd6B,IAAM9B,KAAKQ,QAAQ,aACvBQ,KAAK2B,KAAK3C,KAAKQ,QAAQ,4BAA4BU,KAAK,aACxDF,KAAK6B,KAAKC,KAAK,QAAQhB,IAAIZ,KAAK,OAChCI,OAAOG,QAAUzB,KAAKG,SAAS,yBAC/ByB,qBAAqBZ,KAAMM,OAAQQ,OAEpCpC,OAAO,0BAA0BC,GAAG,QAAS,WAC5C,IAAIK,KAAON,OAAOO,MACd6B,IAAM9B,KAAKQ,QAAQ,aACvBQ,KAAK2B,KAAK,EACV3B,KAAK6B,KAAKC,KAAK,QAAQhB,IAAIZ,KAAK,OAChCI,OAAOG,QAAUzB,KAAKG,SAAS,yBAC/ByB,qBAAqBZ,KAAMM,OAAQQ,OAIrC,SAASiB,2BAA2BjB,EAAKkB,GACpClB,EAAMpC,OAAOoC,GACjBhB,QAAQC,IAAIe,EAAIV,SAASF,KAAK,QAC9B,IAAIF,EAAO,CAACd,OAAQ,kBAAmB8C,MAAOA,EAAOC,KAAM,OAAQC,OAAQpB,EAAIV,SAASF,KAAK,QAE7FU,qBAAqBZ,EADR,CAACO,SAAUkB,+BAAgCC,SAAS,GAC9BZ,EAAItB,QAAQ,cAIhD,SAASiC,+BAA+BZ,EAAQb,EAAMM,EAAQQ,GAE7DpC,OAAOoC,GACLI,KAAKL,GACLpB,KAAK,2BAA2B0C,WAAW,YAC7C1D,iCACAoB,gCACA2B,+BACAY,yBACAC,oBAID,SAASD,yBAER,IAAI9B,OAAS,CAACC,SAAU+B,yBAA0BZ,SAAS,GAC3DhD,OAAO,wBAAwBC,GAAG,QAAS,WAC1C,IAAIK,KAAON,OAAOO,MACd6B,IAAM9B,KAAKQ,QAAQ,aACnBQ,KAAO,CACVd,OAAQ,gBACRqD,SAAUvD,KAAKkB,KAAK,MACpBsC,MAAOxD,KAAKkB,KAAK,kBACjB2B,KAAMC,KAAK,QAAQhB,IAAIZ,KAAK,QAE7BU,qBAAqBZ,KAAMM,OAAQQ,OAKrC,SAASwB,yBAAyBzB,EAAQb,EAAMM,EAAQQ,GACvDpC,OAAOoC,GAAKI,KAAKL,GACjBpC,iCACAoB,gCACA2B,+BACAY,yBAhKDxD,iBAAmB,KAmKnBF,OAAO+D,UAAUC,MAAM,WAGtBjE,iCACAoB,gCACA2B,+BACAY","file":"spbc-table.min.js","sourcesContent":["spbc_bulk_action = null;\r\n\r\n// TABLE BULK ACTIONS\r\nfunction spbc_tbl__bulk_actions__listen(){\r\n\tjQuery('.tbl-bulk_actions--apply').on('click', function(){\r\n\t\t\r\n\t\tif(!spbc_bulk_action && !confirm(spbcTable.warning_bulk))\r\n\t\t\treturn;\r\n\t\t\r\n\t\tvar self = spbc_bulk_action || jQuery(this);\r\n\t\tspbc_bulk_action = self;\r\n\t\tvar action = self.siblings('select').children()[self.siblings('select').first()[0].selectedIndex].value;\r\n\t\tif(self.parents('.tbl-root').find('.cb-select').is(':checked')){\r\n\t\t\tif(self.parents('.tbl-root').find('.cb-select:checked').first().parents('tr').find('.tbl-row_action--'+action)[0]){\r\n\t\t\t\tself.parents('.tbl-root').find('.cb-select:checked').first().parents('tr').find('.tbl-row_action--'+action).click();\r\n\t\t\t\tself.parents('.tbl-root').find('.cb-select:checked').first().prop('checked', false);\r\n\t\t\t}else{\r\n\t\t\t\tself.parents('.tbl-root').find('.cb-select:checked').first().prop('checked', false);\r\n\t\t\t\tself.click();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tspbc_bulk_action = null;\r\n\t\t}\r\n\t});\r\n}\t\r\n\r\n// TABLE ROW ACTIONS\r\nfunction spbc_tbl__row_actions__listen(){\r\n\tjQuery('.tbl-row_action--ajax').on('click', function(){\r\n\t\tconsole.log('spbc_tbl__row_actions__listen click');\r\n\t\tvar self = jQuery(this);\r\n\t\tvar data = {\r\n\t\t\taction: 'spbc_tbl-action--row',\r\n\t\t\tadd_action: self.attr('row-action'),\r\n\t\t\tid: self.parent().attr('uid'),\r\n\t\t\tcols: self.parent().attr('cols_amount'),\r\n\t\t};\r\n\t\tvar params = {\r\n\t\t\tcallback: spbc_tbl__row_actions__callback,\r\n\t\t\tspinner: self.parent().siblings('.tbl-preloader--tiny'),\r\n\t\t};\r\n\t\tif(!spbc_bulk_action){\r\n\t\t\tvar confirmation = spbcTable['warning_'+self.attr('row-action')] || spbcTable.warning_default;\r\n\t\t\tif(confirm(confirmation))\r\n\t\t\t\tspbc_sendAJAXRequest(data, params, self.parents('tr'));\r\n\t\t}\r\n\t\tif(spbc_bulk_action){\r\n\t\t\tspbc_sendAJAXRequest(data, params, self.parents('tr'));\r\n\t\t}\r\n\t});\r\n}\r\n\r\n\t// Callback for TABLE ROW ACTIONS\r\nfunction spbc_tbl__row_actions__callback(result, data, params, obj){\r\n\tif(result.color)    {obj.css({background: result.background, color: result.color});}\r\n\tif(result.html)     {obj.html(result.html); setTimeout(function(){obj.fadeOut(300);}, 1500);}\r\n\tif(result.temp_html){\r\n\t\tvar tmp=obj.html(); \r\n\t\tobj.html(result.temp_html);\r\n\t\tsetTimeout(function(){\r\n\t\t\tobj.html(tmp).css({background: 'inherit'}).find('.column-primary .row-actions .tbl-row_action--'+data.add_action).remove();\r\n\t\t},5000);\r\n\t}\r\n\tif(spbc_bulk_action)\r\n\t\tspbc_bulk_action.click();\r\n}\r\n\r\n// TABLE PAGINATION ACTIONS\r\nfunction spbc_tbl__pagination__listen(){\r\n\tvar data = {action: 'spbc_tbl-pagination',};\r\n\tvar params = {callback: spbc_tbl__pagination__callback, notJson: true,};\r\n\tjQuery('.tbl-pagination--button').on('click', function(){\r\n\t\tjQuery(this).parents('.tbl-root').find('.tbl-pagination--button').attr('disabled', 'disabled');\r\n\t});\r\n\tjQuery('.tbl-pagination--go').on('click', function(){\r\n\t\tvar self = jQuery(this);\r\n\t\tvar obj = self.parents('.tbl-root');\r\n\t\tdata.page = self.siblings('.tbl-pagination--curr_page').val();\r\n\t\tdata.args = eval('args_'+obj.attr('id'));\r\n\t\tparams.spinner = self.siblings('.tbl-preloader--small');\r\n\t\tspbc_sendAJAXRequest(data, params, obj);\r\n\t});\r\n\tjQuery('.tbl-pagination--prev').on('click', function(){\r\n\t\tvar self = jQuery(this);\r\n\t\tvar obj = self.parents('.tbl-root');\r\n\t\tdata.page=self.parents('.tbl-pagination--wrapper').attr('prev_page');\r\n\t\tdata.args=eval('args_'+obj.attr('id'));\r\n\t\tparams.spinner = self.siblings('.tbl-preloader--small');\r\n\t\tspbc_sendAJAXRequest(data, params, obj);\r\n\t});\r\n\tjQuery('.tbl-pagination--next').on('click', function(){\r\n\t\tvar self = jQuery(this);\r\n\t\tvar obj = self.parents('.tbl-root');\r\n\t\tdata.page=self.parents('.tbl-pagination--wrapper').attr('next_page');\r\n\t\tdata.args=eval('args_'+obj.attr('id'));\r\n\t\tparams.spinner = self.siblings('.tbl-preloader--small');\r\n\t\tspbc_sendAJAXRequest(data, params, obj);\r\n\t});\r\n\tjQuery('.tbl-pagination--end').on('click', function(){\r\n\t\tvar self = jQuery(this);\r\n\t\tvar obj = self.parents('.tbl-root');\r\n\t\tdata.page=self.parents('.tbl-pagination--wrapper').attr('last_page');\r\n\t\tdata.args=eval('args_'+obj.attr('id'));\r\n\t\tparams.spinner = self.siblings('.tbl-preloader--small');\r\n\t\tspbc_sendAJAXRequest(data, params, obj);\r\n\t});\r\n\tjQuery('.tbl-pagination--start').on('click', function(){\r\n\t\tvar self = jQuery(this);\r\n\t\tvar obj = self.parents('.tbl-root');\r\n\t\tdata.page=1;\r\n\t\tdata.args=eval('args_'+obj.attr('id'));\r\n\t\tparams.spinner = self.siblings('.tbl-preloader--small');\r\n\t\tspbc_sendAJAXRequest(data, params, obj);\r\n\t});\r\n}\r\n\r\nfunction spbc_scanner__switch_table(obj, table){\r\n\tvar obj = jQuery(obj);\r\n\tconsole.log(obj.parent().attr('uid'));\r\n\tvar data = {action: 'spbc_tbl-switch', table: table, test: 'test', domain: obj.parent().attr('uid'),};\r\n\tvar params = {callback: spbc_tbl__pagination__callback, notJson: true,};\r\n\tspbc_sendAJAXRequest(data, params, obj.parents('.tbl-root'));\r\n}\r\n\r\n\t// Callback for TABLE PAGINATION ACTIONS\r\nfunction spbc_tbl__pagination__callback(result, data, params, obj){\r\n\t\r\n\tjQuery(obj)\r\n\t\t.html(result)\r\n\t\t.find('.tbl-pagination--button').removeAttr('disabled');\r\n\tspbc_tbl__bulk_actions__listen();\r\n\tspbc_tbl__row_actions__listen();\r\n\tspbc_tbl__pagination__listen();\r\n\tspbc_tbl__sort__listen();\r\n\tspbcStartShowHide();\r\n}\r\n\r\n// TABLE SORT ACTIONS\r\nfunction spbc_tbl__sort__listen(){\r\n\t\r\n\tvar params = {callback: spbc_tbl__sort__callback, notJson: true,};\r\n\tjQuery('.tbl-column-sortable').on('click', function(){\r\n\t\tvar self = jQuery(this);\r\n\t\tvar obj = self.parents('.tbl-root');\r\n\t\tvar data = {\r\n\t\t\taction: 'spbc_tbl-sort',\r\n\t\t\torder_by: self.attr('id'),\r\n\t\t\torder: self.attr('sort_direction'),\r\n\t\t\targs: eval('args_'+obj.attr('id')),\r\n\t\t};\r\n\t\tspbc_sendAJAXRequest(data, params, obj);\r\n\t});\r\n}\r\n\r\n\t// Callback for TABLE SORT ACTIONS\r\nfunction spbc_tbl__sort__callback(result, data, params, obj){\r\n\tjQuery(obj).html(result);\r\n\tspbc_tbl__bulk_actions__listen();\r\n\tspbc_tbl__row_actions__listen();\r\n\tspbc_tbl__pagination__listen();\r\n\tspbc_tbl__sort__listen();\r\n}\r\n\r\njQuery(document).ready(function(){\r\n\t\r\n\t// Table. Row actions handler\r\n\tspbc_tbl__bulk_actions__listen();\r\n\tspbc_tbl__row_actions__listen();\r\n\tspbc_tbl__pagination__listen();\r\n\tspbc_tbl__sort__listen();\r\n});"]}