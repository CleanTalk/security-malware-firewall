{"version":3,"file":"spbc-table.min.js","sources":["spbc-table.js"],"sourcesContent":["let spbcBulkAction = null;\r\n\r\n\r\n/**\r\n * Reloads scanner accordion and set all the listeners\r\n * @param {string|null} interactControlTab ajaxResult If is set, will use this var as interactivity data.\r\n * @param {string|null} updateText\r\n */\r\nfunction spbcReloadAccordion(interactControlTab = null, updateText = '') {\r\n    spbcSendAJAXRequest(\r\n        {action: 'spbc_scanner_tab__reload_accordion'},\r\n        {\r\n            notJson: true,\r\n            callback: function(result, data, params, obj) {\r\n                jQuery(obj).accordion('destroy');\r\n                jQuery(obj).html(result);\r\n                jQuery(obj).accordion({\r\n                    header: 'h3',\r\n                    heightStyle: 'content',\r\n                    collapsible: true,\r\n                    active: false,\r\n                });\r\n                spbcTblBulkActionsListen();\r\n                spbcTblRowActionsListen();\r\n                spbcTblPaginationListen();\r\n                spbcTblSortListen();\r\n                spbcStartShowHide();\r\n                if (interactControlTab !== null && updateText !== null) {\r\n                    interactScannerTab(interactControlTab, updateText);\r\n                }\r\n            },\r\n        },\r\n        jQuery('#spbc_scan_accordion'),\r\n    );\r\n}\r\n\r\n/**\r\n * Open refreshed tab after scanner reload.\r\n * @param {string} controlTab\r\n * @param {string} updateText\r\n */\r\nfunction interactScannerTab(controlTab, updateText) {\r\n    let refreshControlTabSelector;\r\n    let headerSelector;\r\n    let headerUpdateStatus;\r\n\r\n    if (\r\n        typeof(controlTab) !== 'string' ||\r\n        controlTab === '' ||\r\n        typeof(updateText) !== 'string' ||\r\n        updateText === ''\r\n    ) {\r\n        return;\r\n    }\r\n\r\n    // init refresh controlled tabs\r\n    refreshControlTabSelector = jQuery('#spbc_scan_accordion div[refresh_control_tab=\"' + controlTab + '\"]')[0];\r\n\r\n    // init header to click\r\n    headerSelector = 'h3[aria-controls=spbc_scan_accordion_tab_' + controlTab + ']';\r\n    headerSelector = jQuery(headerSelector)[0];\r\n\r\n    if (\r\n        typeof(refreshControlTabSelector) === 'undefined' ||\r\n        typeof(headerSelector) === 'undefined'\r\n    ) {\r\n        return;\r\n    }\r\n\r\n    // show  updated caption\r\n    jQuery('<div class=\"spbc_accordion_header_caption__update_status\"></div>')\r\n        .appendTo(headerSelector);\r\n    headerUpdateStatus = jQuery('.spbc_accordion_header_caption__update_status');\r\n    jQuery('<div class=\"spbc_accordion_header_caption__updated\">' + updateText + '</div>')\r\n        .appendTo(headerUpdateStatus);\r\n\r\n    // do click to open tab\r\n    headerSelector.click();\r\n\r\n    // highlight header\r\n    refreshControlTabSelector.setAttribute(\r\n        'class',\r\n        'ui-accordion-header ui-corner-top ui-state-default ui-accordion-icons ui-accordion-header-active',\r\n    );\r\n\r\n    // hide all actions on partial reload\r\n    jQuery('.row-actions').hide();\r\n}\r\n\r\n/**\r\n * Table bulk actions\r\n */\r\nfunction spbcTblBulkActionsListen() {\r\n    jQuery('.tbl-bulk_actions-all--apply')\r\n        .off('click')\r\n        .on('click', function() {\r\n            // @ToDo perhaps spbcScanner.active is not defined anywhere.\r\n            //  check this and implement `active` status in the right place\r\n            if ( spbcScanner.active ) {\r\n                alert(spbcTableLocalize.scannerIsActive);\r\n                return;\r\n            }\r\n\r\n            let self = jQuery(this);\r\n            let allowedBulkActions = [\r\n                'approve',\r\n                'disapprove',\r\n                'send',\r\n                'check_analysis_status',\r\n                'approve_page',\r\n                'disapprove_page',\r\n                'cure',\r\n                'delete_from_analysis_log',\r\n            ];\r\n            let action = self.siblings('select').children()[self.siblings('select').first()[0].selectedIndex].value;\r\n\r\n            if ( allowedBulkActions.indexOf( action ) !== -1 ) {\r\n                if (!confirm(spbcTable.warning_bulk)) {\r\n                    return;\r\n                }\r\n\r\n                let data = {\r\n                    action: 'spbc_tbl-action--bulk',\r\n                    add_action: action,\r\n                    status: self.parents('.tbl-root').attr('type'),\r\n                };\r\n\r\n                if (action === 'cure') {\r\n                    const selectedItems = self.closest('#spbc_tbl__scanner_cure_log').find('.cb-select');\r\n                    let selectedIds = [];\r\n\r\n                    selectedItems.each(function(index, element) {\r\n                        const elementId = jQuery(element).val();\r\n                        selectedIds.push(elementId);\r\n                    });\r\n                    data.selectedIds = selectedIds;\r\n                }\r\n\r\n                if (action === 'delete_from_analysis_log') {\r\n                    const selectedItems = self.closest('#spbc_tbl__scanner_analysis_log').find('.cb-select');\r\n                    let fileIds = [];\r\n\r\n                    selectedItems.each(function(index, element) {\r\n                        const elementId = jQuery(element).val();\r\n                        fileIds.push(elementId);\r\n                    });\r\n                    data.file_ids = fileIds;\r\n                }\r\n\r\n                let params = {\r\n                    button: this,\r\n                    spinner: self.children('.tbl-preloader--small'),\r\n                    callback: function(out) {\r\n                        spbcReloadAccordion();\r\n                        if ( action === 'check_analysis_status' && typeof out !== 'undefined') {\r\n                            let html = '<p> Analysis status updated.' +\r\n                                ' Total: ' + out.counters.total +\r\n                                ', updated: ' + out.counters.updated +\r\n                                ', skipped: ' + out.counters.skipped +\r\n                                ', failed: ' + out.counters.failed +\r\n                                ', queued: ' + out.counters.queued +\r\n                                '</p>';\r\n                            spbcModal.open().put( html );\r\n                        }\r\n                        if ( action === 'send' && typeof out !== 'undefined') {\r\n                            let html = '<p> Files have been sent: ' +\r\n                                out.files_sent_counter +\r\n                                '</p>';\r\n                            spbcModal.open().put(html);\r\n                        }\r\n                    },\r\n                    errorOutput: function( errorText, comment ) {\r\n                        if ( comment ) {\r\n                            errorText = errorText + '<br>Additional information:<br>' + comment;\r\n                        }\r\n                        spbcModal.open().putError( errorText );\r\n                    },\r\n                    timeout: 60000,\r\n                };\r\n\r\n                spbcSendAJAXRequest(data, params);\r\n            } else {\r\n                alert('This action is not supported for all files yet =(');\r\n            }\r\n        });\r\n\r\n    jQuery('.tbl-bulk_actions--apply')\r\n        .off('click')\r\n        .on('click', function(e) {\r\n            if (!spbcBulkAction && !confirm(spbcTable.warning_bulk)) {\r\n                return;\r\n            }\r\n\r\n            let self = spbcBulkAction || jQuery(this);\r\n            spbcBulkAction = self;\r\n            let action = self.siblings('select').children()[self.siblings('select').first()[0].selectedIndex].value;\r\n\r\n            if (action === 'cure') {\r\n                spbcScannerCureSelected(jQuery(this));\r\n                return;\r\n            }\r\n\r\n            if (action === 'delete_from_analysis_log') {\r\n                spbcScannerAnalysisLogDeleteFromLog(jQuery(this));\r\n                return;\r\n            }\r\n\r\n            if (action === 'allow' || action === 'ban') {\r\n                let sendAction = action === 'ban' ? 'deny' : action;\r\n                let items = self.parents('.tbl-root').find('.cb-select:checked');\r\n                if (items) {\r\n                    self.children('.tbl-preloader--small').show();\r\n                    items.each(function() {\r\n                        let ip = jQuery(this).parents('tr').find('.tbl-row_action--'+action).data('ip');\r\n                        spbcSecLogsFilterIp(ip, sendAction, true);\r\n                        jQuery(this).prop('checked', false);\r\n                    });\r\n                }\r\n                self.children('.tbl-preloader--small').hide();\r\n                let msg = action === 'allow' ? 'Allowed' : 'Banned';\r\n                let html = '<p> Success. Selected IPs have been ' +\r\n                    msg +\r\n                    '. Changes will be applied within 10 minutes.' +\r\n                    '</p>';\r\n                spbcModal.open().put( html );\r\n                setTimeout(spbcReloadAccordion, 1900);\r\n\r\n                return;\r\n            }\r\n\r\n            if ( action !== '-1' && self.parents('.tbl-root').find('.cb-select').is(':checked') ) {\r\n                self.children('.tbl-preloader--small').show();\r\n                // eslint-disable-next-line max-len\r\n                if (self.parents('.tbl-root').find('.cb-select:checked').first().parents('tr').find('.tbl-row_action--'+action)[0]) {\r\n                    self\r\n                        .parents('.tbl-root')\r\n                        .find('.cb-select:checked')\r\n                        .first()\r\n                        .parents('tr')\r\n                        .find('.tbl-row_action--'+action)\r\n                        .click();\r\n                    self.parents('.tbl-root').find('.cb-select:checked').first().prop('checked', false);\r\n                } else {\r\n                    self.parents('.tbl-root').find('.cb-select:checked').first().prop('checked', false);\r\n                    self.click();\r\n                }\r\n            } else {\r\n                self.children('.tbl-preloader--small').hide();\r\n                spbcBulkAction = null;\r\n                if ( action === 'check_analysis_status' || action === 'disapprove' ) {\r\n                    let html = '<p> All available files are updated.' + '</p>';\r\n                    spbcModal.open().put( html );\r\n                }\r\n                if ( action === 'send') {\r\n                    let html = '<p> All available files are sent.' + '</p>';\r\n                    spbcModal.open().put( html );\r\n                }\r\n                setTimeout(spbcReloadAccordion, 1900);\r\n            }\r\n        });\r\n}\r\n\r\n/**\r\n * Cure selected files\r\n * @param {obj} current\r\n */\r\nfunction spbcScannerCureSelected(current) {\r\n    const selectedItems = current.closest('#spbc_tbl__scanner_cure_log').find('.cb-select:checked');\r\n    let selectedIds = [];\r\n\r\n    if (selectedItems.length === 0) {\r\n        alert('Please, select elements.');\r\n    }\r\n\r\n    selectedItems.each(function(index, element) {\r\n        const elementId = jQuery(element).val();\r\n        selectedIds.push(elementId);\r\n    });\r\n\r\n    const data = {\r\n        action: 'spbc_cure_selected',\r\n        security: spbcSettings.ajax_nonce,\r\n        selectedIds: selectedIds,\r\n    };\r\n    jQuery.ajax({\r\n        type: 'POST',\r\n        url: spbcSettings.ajaxurl,\r\n        data: data,\r\n        beforeSend: function() {\r\n            current\r\n                .closest('#spbc_tbl__scanner_cure_log')\r\n                .find('.tbl-button---white_blue .tbl-preloader--in_button')\r\n                .show();\r\n        },\r\n        success: function(result) {\r\n            current\r\n                .closest('#spbc_tbl__scanner_cure_log')\r\n                .find('.tbl-button---white_blue .tbl-preloader--in_button')\r\n                .hide();\r\n            if (result.success) {\r\n                spbcModal.open().put(result.data);\r\n                document.addEventListener('spbcModalClosed', function( e ) {\r\n                    document.location.reload();\r\n                });\r\n            } else {\r\n                spbcModal.open().putError(result.data);\r\n            }\r\n        },\r\n    });\r\n}\r\n\r\n/**\r\n * Table row actions\r\n */\r\nfunction spbcTblRowActionsListen() {\r\n    jQuery('.tbl-row_action--ajax')\r\n        .off('click')\r\n        .on('click', function() {\r\n            if ( spbcScanner.active ) {\r\n                alert(spbcTableLocalize.scannerIsActive);\r\n                return;\r\n            }\r\n            let self = jQuery(this);\r\n            let data = {\r\n                action: 'spbc_tbl-action--row',\r\n                add_action: self.attr('row-action'),\r\n                id: self.parents('.row-actions').attr('uid'),\r\n                cols: self.parents('.row-actions').attr('cols_amount'),\r\n                page_url: self.parent().attr('uid'),\r\n                page_id: self.parent().attr('page_id'),\r\n            };\r\n            let params = {\r\n                callback: spbcTblRowActionsCallback,\r\n                errorOutput: function(msg) {\r\n                    spbcModal.open().putError( msg );\r\n                },\r\n                spinner: self.parent().siblings('.tbl-preloader--tiny'),\r\n            };\r\n            if (!spbcBulkAction) {\r\n                let fileName = self.parent().parent()[0].firstChild.innerHTML;\r\n                let confirmationHeader = spbcTable['warning_h_'+self.attr('row-action')] || spbcTable.warning_default;\r\n                let confirmationText = spbcTable['warning_t_'+self.attr('row-action')] || '';\r\n                // Without confirm\r\n                if (\r\n                    data.add_action === 'copy_file_info' ||\r\n                    data.add_action === 'check_analysis_status'\r\n                ) {\r\n                    spbcSendAJAXRequest(data, params, self.parents('tr'));\r\n\r\n                // With confirm\r\n                } else {\r\n                    spbcModal.open().confirm(confirmationHeader, confirmationText, fileName, (confirmed) => {\r\n                        if (confirmed) {\r\n                            spbcSendAJAXRequest(data, params, self.parents('tr'));\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (spbcBulkAction) {\r\n                spbcSendAJAXRequest(data, params, self.parents('tr'));\r\n            }\r\n        });\r\n}\r\n\r\n/**\r\n * Callback for table row actions\r\n *\r\n * @param {obj|string} result\r\n * @param {obj} data\r\n * @param {obj} params\r\n * @param {obj} obj\r\n */\r\nfunction spbcTblRowActionsCallback(result, data, params, obj) {\r\n    if (result.color) {\r\n        obj.css({background: result.background, color: result.color});\r\n    }\r\n    if (result.html) {\r\n        obj.parent().parent().parent().prepend(result.html);\r\n        setTimeout(function() {\r\n            obj.fadeOut(300);\r\n        }, 1500);\r\n        if ( ! spbcBulkAction) {\r\n            setTimeout(spbcReloadAccordion, 1900);\r\n        }\r\n    }\r\n\r\n    if (\r\n        data.add_action === 'copy_file_info'\r\n    ) {\r\n        if (result.success === true && result.data.file_info) {\r\n            window.\r\n                prompt('Copy the file info below and send it to support@cleantalk.org: ', result.data.file_info);\r\n        } else {\r\n            let errorText = (typeof result.data.error !== 'undefined') ?\r\n                result.data.error :\r\n                'Unknown copy_file_info error';\r\n            spbcModal.open().putError( errorText );\r\n        }\r\n    }\r\n\r\n    if (result.temp_html) {\r\n        let tmp=obj.html();\r\n        obj.html(result.temp_html);\r\n        if (result.updated_template !== undefined) {\r\n            let updatedType = result.updated_template_type;\r\n            let template = result.updated_template;\r\n            let rowsInTemplate = jQuery(template).find('.wp-list-table tbody tr');\r\n            let countRowInTemplate = rowsInTemplate.length;\r\n            let targetTab = jQuery('[aria-controls=\"spbc_scan_accordion_tab_' + updatedType + '\"]');\r\n\r\n            if (targetTab.length > 0) {\r\n                let table = jQuery('#spbc_tbl__scanner_' + updatedType);\r\n                // Count files in header\r\n                jQuery('.spbc_bad_type_count.' + updatedType + '_counter').text(countRowInTemplate);\r\n                // Count rows in table\r\n                let countExistingRows = table.find('.wp-list-table tbody tr').length;\r\n                table.remove();\r\n                jQuery('#spbc_scan_accordion_tab_' + updatedType).append(template);\r\n                // Marked new rows\r\n                jQuery(jQuery('#spbc_scan_accordion_tab_' + updatedType)\r\n                    .find('.wp-list-table tbody tr'))\r\n                    .each(function(index, element) {\r\n                        if (++index > countExistingRows) {\r\n                            jQuery(element).css('outline', '1px solid green');\r\n                        }\r\n                    });\r\n                targetTab.click();\r\n            } else {\r\n                if (updatedType === 'analysis_log') {\r\n                    // eslint-disable-next-line max-len\r\n                    let tabHeaderTemplate = '<h3 class=\"ui-accordion-header ui-corner-top ui-state-default ui-accordion-icons ui-accordion-header-collapsed ui-corner-all\" role=\"tab\" id=\"ui-id-2\" aria-controls=\"spbc_scan_accordion_tab_analysis_log\" aria-selected=\"false\" aria-expanded=\"false\" tabindex=\"-1\"><span class=\"ui-accordion-header-icon ui-icon ui-icon-triangle-1-e\"></span><a href=\"#\">Analysis Log (<span class=\"spbc_bad_type_count analysis_log_counter\">' + countRowInTemplate + '</span>)</a></h3>';\r\n                    // eslint-disable-next-line max-len\r\n                    let tabBodyTemplate = '<div id=\"spbc_scan_accordion_tab_analysis_log\" class=\"ui-accordion-content ui-corner-bottom ui-helper-reset ui-widget-content\" aria-labelledby=\"ui-id-2\" role=\"tabpanel\" aria-hidden=\"true\" style=\"display: none;\"><p class=\"spbc_hint\">Files sent for analysis.</p><div id=\"spbc_tbl__scanner_analysis_log\" type=\"analysis_log\" class=\"tbl-root\">' +\r\n                        template +\r\n                        '</div>';\r\n                    jQuery('#spbc_scan_accordion_tab_critical').after(tabHeaderTemplate + tabBodyTemplate);\r\n                    targetTab.click();\r\n                }\r\n            }\r\n        }\r\n        setTimeout(function() {\r\n            obj\r\n                .html(tmp)\r\n                .css({background: 'inherit'})\r\n                .find('.column-primary .row-actions .tbl-row_action--' + data.add_action)\r\n                .remove();\r\n            spbcTblBulkActionsListen();\r\n            spbcTblRowActionsListen();\r\n            spbcStartShowHide();\r\n        }, 5000);\r\n    }\r\n    if (spbcBulkAction) {\r\n        spbcBulkAction.click();\r\n    }\r\n}\r\n\r\n/**\r\n * Table pagination actions\r\n */\r\nfunction spbcTblPaginationListen() {\r\n    let data = {action: 'spbc_tbl-pagination'};\r\n    let params = {callback: spbcTblPaginationCallback, notJson: true};\r\n    jQuery('.tbl-pagination--button').on('click', function() {\r\n        jQuery(this).parents('.tbl-root').find('.tbl-pagination--button').attr('disabled', 'disabled');\r\n    });\r\n    jQuery('.tbl-pagination--go').on('click', function() {\r\n        let self = jQuery(this);\r\n        let obj = self.parents('.tbl-root');\r\n        data.page = self.siblings('.tbl-pagination--curr_page').val();\r\n        data.type = obj.attr('type');\r\n        params.spinner = self.siblings('.tbl-preloader--small');\r\n        spbcSendAJAXRequest(data, params, obj);\r\n    });\r\n    jQuery('.tbl-pagination--prev').on('click', function() {\r\n        let self = jQuery(this);\r\n        let obj = self.parents('.tbl-root');\r\n        data.page = self.parents('.tbl-pagination--wrapper').attr('prev_page');\r\n        data.type = obj.attr('type');\r\n        params.spinner = self.siblings('.tbl-preloader--small');\r\n        spbcSendAJAXRequest(data, params, obj);\r\n    });\r\n    jQuery('.tbl-pagination--next').on('click', function() {\r\n        let self = jQuery(this);\r\n        let obj = self.parents('.tbl-root');\r\n        data.page = self.parents('.tbl-pagination--wrapper').attr('next_page');\r\n        data.type = obj.attr('type');\r\n        params.spinner = self.siblings('.tbl-preloader--small');\r\n        spbcSendAJAXRequest(data, params, obj);\r\n    });\r\n    jQuery('.tbl-pagination--end').on('click', function() {\r\n        let self = jQuery(this);\r\n        let obj = self.parents('.tbl-root');\r\n        data.page = self.parents('.tbl-pagination--wrapper').attr('last_page');\r\n        data.type = obj.attr('type');\r\n        params.spinner = self.siblings('.tbl-preloader--small');\r\n        spbcSendAJAXRequest(data, params, obj);\r\n    });\r\n    jQuery('.tbl-pagination--start').on('click', function() {\r\n        let self = jQuery(this);\r\n        let obj = self.parents('.tbl-root');\r\n        data.page = 1;\r\n        data.type = obj.attr('type');\r\n        params.spinner = self.siblings('.tbl-preloader--small');\r\n        spbcSendAJAXRequest(data, params, obj);\r\n    });\r\n}\r\n\r\n/**\r\n * Callback for Table pagination actions\r\n *\r\n * @param {obj|string} result\r\n * @param {obj} data\r\n * @param {obj} params\r\n * @param {obj} obj\r\n */\r\nfunction spbcTblPaginationCallback(result, data, params, obj) {\r\n    jQuery(obj)\r\n        .html(result)\r\n        .find('.tbl-pagination--button').removeAttr('disabled');\r\n    spbcTblBulkActionsListen();\r\n    spbcTblRowActionsListen();\r\n    spbcTblPaginationListen();\r\n    spbcTblSortListen();\r\n    spbcStartShowHide();\r\n}\r\n\r\n/**\r\n * Table sort actions\r\n */\r\nfunction spbcTblSortListen() {\r\n    let params = {callback: spbcTblSortCallback, notJson: true};\r\n    jQuery('.tbl-column-sortable').on('click', function(e) {\r\n        if (e.target.classList.contains('tbl-sorting_indicator')) {\r\n            let self = jQuery(this);\r\n            let obj = self.parents('.tbl-root');\r\n            let domain = obj.attr('type') == 'links'? jQuery('#spbc_tbl__scanner__outbound_links b').html(): '';\r\n            let data = {\r\n                action: 'spbc_tbl-sort',\r\n                order_by: self.attr('id'),\r\n                order: self.attr('sort_direction'),\r\n                type: obj.attr('type'),\r\n                domain: domain,\r\n            };\r\n            spbcSendAJAXRequest(data, params, obj);\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * Callback for Table sort actions\r\n *\r\n * @param {obj|string} result\r\n * @param {obj} data\r\n * @param {obj} params\r\n * @param {obj} obj\r\n */\r\nfunction spbcTblSortCallback(result, data, params, obj) {\r\n    jQuery(obj).html(result);\r\n    spbcTblBulkActionsListen();\r\n    spbcTblRowActionsListen();\r\n    spbcTblPaginationListen();\r\n    spbcTblSortListen();\r\n}\r\n\r\njQuery(document).ready(function() {\r\n    // Table. Row actions handler\r\n    spbcTblBulkActionsListen();\r\n    spbcTblRowActionsListen();\r\n    spbcTblPaginationListen();\r\n    spbcTblSortListen();\r\n    spbcUpdateEstimatedTime();\r\n});\r\n\r\n/**\r\n * Switching table handler\r\n * Using by inline php code\r\n *\r\n * @param {obj} obj\r\n * @param {obj} table\r\n *\r\n */\r\nfunction spbcScannerSwitchTable(obj, table) {/* eslint-disable-line no-unused-vars */\r\n    let _obj = jQuery(obj);\r\n    let domain = _obj.parents('.row-actions').attr('uid');\r\n    let data = {action: 'spbc_tbl-switch', type: table, domain: domain};\r\n    let params = {callback: spbcTblPaginationCallback, notJson: true};\r\n    spbcSendAJAXRequest(data, params, _obj.parents('.tbl-root'));\r\n}\r\n\r\n/**\r\n * Open/close table rows handler\r\n * Using by inline php code\r\n *\r\n * @param {string} blockId\r\n * @param {string} columnKey\r\n */\r\nfunction spbcShowHideRows(blockId, columnKey) {/* eslint-disable-line no-unused-vars */\r\n    let className = '.' + columnKey + '_block_' + blockId;\r\n    let block = jQuery(className);\r\n    if (block.hasClass('mob_table_active')) {\r\n        block.removeClass('mob_table_active');\r\n    } else {\r\n        block.addClass('mob_table_active');\r\n    }\r\n}\r\n\r\n/**\r\n * Update estimated time\r\n */\r\nfunction spbcUpdateEstimatedTime() {\r\n    spbcUpdateTables();\r\n    setInterval(() => {\r\n        spbcUpdateTables();\r\n    }, 60000);\r\n}\r\n\r\n/**\r\n * Update tables\r\n * @param {obj} tab\r\n * @param {obj} params\r\n */\r\nfunction spbcUpdateTables(tab, params) {\r\n    // todo params is always not provided!\r\n    let tabName = 'scanner';\r\n    let data = {\r\n        action: 'spbc_settings__draw_elements',\r\n        tab_name: tabName,\r\n        security: spbcSettings.ajax_nonce,\r\n    };\r\n    let currentParams = {\r\n        callback: spbcViewUpdateEstimatedTime,\r\n        notJson: true,\r\n        additional: params || null,\r\n    };\r\n    spbcSendAJAXRequest( data, currentParams, tab );\r\n}\r\n\r\n/**\r\n * Update estimated time\r\n * @param {string} result\r\n */\r\nfunction spbcViewUpdateEstimatedTime(result) {\r\n    // todo the function unsafely trust the result, needs to validate\r\n    const parser = new DOMParser();\r\n    const newTables = parser.parseFromString(result, 'text/html');\r\n    // todo validate if selector is valid\r\n    const newAnalysisRows = newTables.querySelectorAll('#spbc_tbl__scanner_analysis_log tbody tr');\r\n    // todo validate if selector is valid\r\n    const currentAnalysisRows = document.querySelectorAll('#spbc_tbl__scanner_analysis_log tbody tr');\r\n    // todo what this was for?\r\n    let newLastUpdateTime = newTables.querySelector('#spbc_last_update_time');\r\n    if (newLastUpdateTime) {\r\n        newLastUpdateTime = newLastUpdateTime.innerText;\r\n    }\r\n\r\n    currentAnalysisRows.forEach((currentRow) => {\r\n        if (currentRow.querySelector('.pscan_estimated_execution_time').innerText === 'Done') {\r\n            return;\r\n        }\r\n\r\n        let status = '';\r\n        let time = '';\r\n        let comment = '';\r\n        let text = '';\r\n        newAnalysisRows.forEach((newRow) => {\r\n            currentAnalysisRows.forEach((currentRow) => {\r\n                // validate selector result\r\n                if (currentRow.querySelector('.spbcFullText') !== null) {\r\n                    text = currentRow.querySelector('.spbcFullText').innerText;\r\n                }\r\n                if (newRow.querySelector('.spbcFullText').innerText === text) {\r\n                    // todo all the selectors data is not protected against null values!\r\n                    status = newRow.querySelector('.pscan_status').innerHTML;\r\n                    currentRow.querySelector('.pscan_status').innerHTML = status;\r\n                    time = newRow.querySelector('.pscan_estimated_execution_time').innerHTML;\r\n                    currentRow.querySelector('.pscan_estimated_execution_time').innerHTML = time;\r\n                    comment = newRow.querySelector('.analysis_comment').innerHTML;\r\n                    currentRow.querySelector('.analysis_comment').innerHTML = comment;\r\n                }\r\n            });\r\n        });\r\n    });\r\n\r\n    spbcUpdatePscanCloudAnalysisInfo();\r\n}\r\n\r\n/**\r\n * Update psacn cloud analysis info\r\n */\r\nfunction spbcUpdatePscanCloudAnalysisInfo() {\r\n    let data = {\r\n        action: 'spbc_analysyis_files_stats__get_html',\r\n        sub_action: 'give_me_html',\r\n        security: spbcSettings.ajax_nonce,\r\n    };\r\n\r\n    let params = {\r\n        callback: spbcViweUpdateAnalysisInfo,\r\n        notJson: true,\r\n    };\r\n\r\n    spbcSendAJAXRequest(data, params);\r\n}\r\n\r\n/**\r\n * Update analysis info\r\n * @param {string} result\r\n */\r\nfunction spbcViweUpdateAnalysisInfo(result) {\r\n    let info = document.getElementById('spbc_analysis_files_stats');\r\n\r\n    if (info) {\r\n        info.innerHTML = result;\r\n    }\r\n}\r\n"],"names":["let","spbcBulkAction","spbcReloadAccordion","interactControlTab","updateText","spbcSendAJAXRequest","action","notJson","callback","result","data","params","obj","jQuery","accordion","html","header","heightStyle","collapsible","active","spbcTblBulkActionsListen","spbcTblRowActionsListen","spbcTblPaginationListen","spbcTblSortListen","spbcStartShowHide","interactScannerTab","controlTab","refreshControlTabSelector","headerUpdateStatus","headerSelector","appendTo","click","setAttribute","hide","off","on","spbcScanner","alert","spbcTableLocalize","scannerIsActive","self","this","siblings","children","first","selectedIndex","value","indexOf","confirm","spbcTable","warning_bulk","add_action","status","parents","attr","selectedItems","closest","find","selectedIds","each","index","element","elementId","val","push","fileIds","file_ids","button","spinner","out","counters","total","updated","skipped","failed","queued","spbcModal","open","put","files_sent_counter","errorOutput","errorText","comment","putError","timeout","e","spbcScannerCureSelected","spbcScannerAnalysisLogDeleteFromLog","sendAction","items","msg","show","ip","spbcSecLogsFilterIp","prop","setTimeout","is","current","length","security","spbcSettings","ajax_nonce","ajax","type","url","ajaxurl","beforeSend","success","document","addEventListener","location","reload","id","cols","page_url","parent","page_id","spbcTblRowActionsCallback","fileName","confirmationHeader","confirmationText","firstChild","innerHTML","warning_default","confirmed","color","css","background","prepend","fadeOut","file_info","window","prompt","error","temp_html","tmp","undefined","updated_template","updatedType","updated_template_type","template","countRowInTemplate","targetTab","table","text","countExistingRows","remove","append","tabHeaderTemplate","tabBodyTemplate","after","spbcTblPaginationCallback","page","removeAttr","spbcTblSortCallback","domain","target","classList","contains","order_by","order","spbcScannerSwitchTable","_obj","spbcShowHideRows","blockId","columnKey","block","hasClass","removeClass","addClass","spbcUpdateEstimatedTime","spbcUpdateTables","setInterval","tab","tab_name","spbcViewUpdateEstimatedTime","additional","newTables","DOMParser","parseFromString","newAnalysisRows","querySelectorAll","currentAnalysisRows","newLastUpdateTime","querySelector","innerText","forEach","currentRow","time","newRow","spbcUpdatePscanCloudAnalysisInfo","sub_action","spbcViweUpdateAnalysisInfo","info","getElementById","ready"],"mappings":"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"}