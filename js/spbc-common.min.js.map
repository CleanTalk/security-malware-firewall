{"version":3,"file":"spbc-common.min.js","sources":["spbc-common.js"],"sourcesContent":["/**\r\n * Timestamp\r\n *\r\n * @return {number}\r\n */\r\nfunction spbcTimestamp() {/* eslint-disable-line no-unused-vars */\r\n    return Math.floor(+new Date() / 1000);\r\n}\r\n\r\n/**\r\n * Hightlights element\r\n *\r\n * @param {number|string} id\r\n * @param {number} times\r\n */\r\nfunction spbcHighlightElement(id, times) {/* eslint-disable-line no-unused-vars */\r\n    times = times-1 || 0;\r\n    jQuery('html, body').animate({scrollTop: jQuery(jQuery('#'+id)).offset().top - 100}, 'slow');\r\n    jQuery('#'+id).addClass('spbc_highlighted');\r\n    jQuery('#'+id).animate({outlineColor: 'rgba(255, 0, 0, 1.0)'}, 400, 'linear', function() {\r\n        jQuery('#'+id).animate({outlineColor: 'rgba(255, 0, 0, 0.0)'}, 400, 'linear', function() {\r\n            if (times>0) {\r\n                spbcHighlightElement(id, times);\r\n            } else {\r\n                jQuery('#'+id).removeClass('spbc_highlighted');\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n/**\r\n * Send AJAX Request\r\n *\r\n * @param {obj} data\r\n * @param {obj} params\r\n * @param {obj} obj\r\n */\r\nfunction spbcSendAJAXRequest(data, params, obj) {/* eslint-disable-line no-unused-vars */\r\n    let dataType = params.notJson ? 'text' : 'json';\r\n\r\n    // Default params\r\n    let button = params.button || null;\r\n    let spinner = params.spinner || null;\r\n    let progressbar = params.progressbar || null;\r\n    let callback = params.callback || null;\r\n    let notJson = params.notJson || null;\r\n    let timeout = params.timeout || 15000;\r\n    obj = obj || null;\r\n    let context = params.context || this;\r\n\r\n    // Button and spinner\r\n    if (button) {\r\n        button.setAttribute('disabled', 'disabled'); button.style.cursor = 'not-allowed';\r\n    }\r\n    if (spinner) {\r\n        if (Array.isArray(spinner)) {\r\n            spinner.forEach(function(el) {\r\n                jQuery(el).css('display', 'inline');\r\n            });\r\n        } else {\r\n            jQuery(spinner).css('display', 'inline');\r\n        }\r\n    }\r\n\r\n    // Adding security code\r\n    data.security = spbcSettings.ajax_nonce;\r\n    data.no_cache = Math.random();\r\n\r\n    // Using passed successCallback() or default\r\n    let success = params.success || function(result) {\r\n        if (button) {\r\n            button.removeAttribute('disabled');\r\n            button.style.cursor = 'pointer';\r\n        }\r\n\r\n        if (spinner) {\r\n            if (Array.isArray(spinner)) {\r\n                spinner.forEach(function(el) {\r\n                    jQuery(el).css('display', 'none');\r\n                });\r\n            } else {\r\n                jQuery(spinner).css('display', 'none');\r\n            }\r\n        }\r\n\r\n        if (!notJson && typeof result !== 'object') {\r\n            result = JSON.parse(result);\r\n        }\r\n\r\n        if (result.error) {\r\n            setTimeout(function() {\r\n                if (progressbar) progressbar.fadeOut('slow');\r\n            }, 1000);\r\n            let errorComment = typeof result.error_comment !== 'undefined' ? result.error_comment : null;\r\n            errorOutput( result.error, errorComment );\r\n        } else if (callback) {\r\n            callback(result, data, params, obj);\r\n        }\r\n    };\r\n\r\n    // Using passed successCallback() or default\r\n    let error = params.error || function(jqXHR, textStatus, errorThrown) {\r\n        if (button) {\r\n            button.removeAttribute('disabled');\r\n            button.style.cursor = 'pointer';\r\n        }\r\n        if (spinner) {\r\n            if (Array.isArray(spinner)) {\r\n                spinner.forEach(function(el) {\r\n                    jQuery(el).css('display', 'none');\r\n                });\r\n            } else {\r\n                jQuery(spinner).css('display', 'none');\r\n            }\r\n        }\r\n\r\n        console.log( '%c APBCT_AJAX_ERROR', 'color: red;' );\r\n        console.log( textStatus );\r\n        console.log( errorThrown );\r\n        console.log( jqXHR );\r\n\r\n        errorOutput( textStatus );\r\n    };\r\n\r\n    var errorOutput = params.errorOutput || function( msg ) {};/* eslint-disable-line no-var */\r\n\r\n    jQuery.ajax({\r\n        context: context,\r\n        type: 'POST',\r\n        url: spbcSettings.ajaxurl,\r\n        data: data,\r\n        dataType: dataType,\r\n        success: success,\r\n        error: error,\r\n        timeout: timeout,\r\n    });\r\n}\r\n"],"names":["spbcTimestamp","Math","floor","Date","spbcHighlightElement","id","times","jQuery","animate","scrollTop","offset","top","addClass","outlineColor","removeClass","spbcSendAJAXRequest","data","params","obj","let","dataType","notJson","button","spinner","progressbar","callback","timeout","context","this","success","setAttribute","style","cursor","Array","isArray","forEach","el","css","security","spbcSettings","ajax_nonce","no_cache","random","result","errorComment","removeAttribute","JSON","parse","error","setTimeout","fadeOut","error_comment","errorOutput","msg","ajax","type","url","ajaxurl","jqXHR","textStatus","errorThrown","console","log"],"mappings":"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"}