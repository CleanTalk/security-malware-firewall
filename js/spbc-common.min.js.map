{"version":3,"file":"spbc-common.min.js","sources":["spbc-common.js"],"sourcesContent":["function spbc_timestamp(){\r\n\treturn Math.floor(+new Date() / 1000);\r\n}\r\n\r\n// Hightlights element\r\nfunction spbcHighlightElement(id, times){\r\n\ttimes = times-1 || 0;\r\n\tjQuery(\"html, body\").animate({ scrollTop: jQuery(jQuery('#'+id)).offset().top - 100 }, \"slow\");\r\n\tjQuery('#'+id).addClass('spbc_highlighted');\r\n\tjQuery('#'+id).animate({outlineColor: \"rgba(255, 0, 0, 1.0)\" }, 400, 'linear', function(){\r\n\t\tjQuery('#'+id).animate({outlineColor: \"rgba(255, 0, 0, 0.0)\" }, 400, 'linear', function(){\r\n\t\t\tif(times>0){\r\n\t\t\t\tspbcHighlightElement(id, times);\r\n\t\t\t}else{\r\n\t\t\t\tjQuery('#'+id).removeClass('spbc_highlighted');\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\nfunction spbc_sendAJAXRequest(data, params, obj){\r\n\r\n\tvar dataType    = params.notJson ? 'text' : 'json';\r\n\r\n\t// Default params\r\n\tvar button      = params.button      || null;\r\n\tvar spinner     = params.spinner     || null;\r\n\tvar progressbar = params.progressbar || null;\r\n\tvar callback    = params.callback    || null;\r\n\tvar notJson     = params.notJson     || null;\r\n\tvar timeout     = params.timeout     || 15000;\r\n\tvar obj         = obj                || null;\r\n\tvar context     = params.context     || this;\r\n\r\n\t// Button and spinner\r\n\tif(button)  {button.setAttribute('disabled', 'disabled'); button.style.cursor = 'not-allowed'; }\r\n\tif(spinner) jQuery(spinner).css('display', 'inline');\r\n\r\n\t// Adding security code\r\n\tdata.security = spbcSettings.ajax_nonce;\r\n\tdata.no_cache = Math.random();\r\n\r\n\t// Using passed successCallback() or default\r\n\tvar success = params.success || function(result){\r\n\t\tif(button){\r\n\t\t\tbutton.removeAttribute('disabled');\r\n\t\t\tbutton.style.cursor = 'pointer';\r\n\t\t}\r\n\r\n\t\tif(spinner) {\r\n\t\t\tjQuery(spinner).css('display', 'none');\r\n\t\t}\r\n\r\n\t\tif(!notJson && typeof result !== 'object'){\r\n\t\t\tresult = JSON.parse(result);\r\n\t\t}\r\n\r\n\t\tif(result.error){\r\n\t\t\tsetTimeout(function(){ if(progressbar) progressbar.fadeOut('slow'); }, 1000);\r\n\t\t\tlet error_comment = typeof result.error_comment !== 'undefined' ? result.error_comment : null;\r\n\t\t\terrorOutput( result.error, error_comment );\r\n\t\t}else if(callback){\r\n\t\t\t\tcallback(result, data, params, obj);\r\n\t\t}\r\n\t};\r\n\r\n\t// Using passed successCallback() or default\r\n\tvar error = params.error || function(jqXHR, textStatus, errorThrown){\r\n\t\tif(button){\r\n\t\t\tbutton.removeAttribute('disabled');\r\n\t\t\tbutton.style.cursor = 'pointer';\r\n\t\t}\r\n\t\tif(spinner){\r\n\t\t\tjQuery(spinner).css('display', 'none');\r\n\t\t}\r\n\r\n\t\tconsole.log( '%c APBCT_AJAX_ERROR', 'color: red;' );\r\n\t\tconsole.log( textStatus );\r\n\t\tconsole.log( errorThrown );\r\n\t\tconsole.log( jqXHR );\r\n\r\n\t\terrorOutput( textStatus );\r\n\t};\r\n\r\n\tvar errorOutput = params.errorOutput || function( msg ){};\r\n\r\n\tjQuery.ajax({\r\n\t\tcontext:  context,\r\n\t\ttype:     \"POST\",\r\n\t\turl:      spbcSettings.ajaxurl,\r\n\t\tdata:     data,\r\n\t\tdataType: dataType,\r\n\t\tsuccess:  success,\r\n\t\terror:    error,\r\n\t\ttimeout:  timeout,\r\n\t});\r\n}"],"names":["spbc_timestamp","Math","floor","Date","spbcHighlightElement","id","times","jQuery","animate","scrollTop","offset","top","addClass","outlineColor","removeClass","spbc_sendAJAXRequest","data","params","obj","dataType","notJson","button","spinner","progressbar","callback","timeout","context","this","success","setAttribute","style","cursor","css","security","spbcSettings","ajax_nonce","no_cache","random","result","error_comment","removeAttribute","JSON","parse","error","setTimeout","fadeOut","errorOutput","jqXHR","textStatus","errorThrown","console","log","msg","ajax","type","url","ajaxurl"],"mappings":"AAAA,SAASA,iBACR,OAAOC,KAAKC,MAAM,CAAC,IAAIC,KAAS,GAAI,CACrC,CAGA,SAASC,qBAAqBC,EAAIC,GACjCA,EAAQA,EAAM,GAAK,EACnBC,OAAO,YAAY,EAAEC,QAAQ,CAAEC,UAAWF,OAAOA,OAAO,IAAIF,CAAE,CAAC,EAAEK,OAAO,EAAEC,IAAM,GAAI,EAAG,MAAM,EAC7FJ,OAAO,IAAIF,CAAE,EAAEO,SAAS,kBAAkB,EAC1CL,OAAO,IAAIF,CAAE,EAAEG,QAAQ,CAACK,aAAc,sBAAuB,EAAG,IAAK,SAAU,WAC9EN,OAAO,IAAIF,CAAE,EAAEG,QAAQ,CAACK,aAAc,sBAAuB,EAAG,IAAK,SAAU,WACrE,EAANP,EACFF,qBAAqBC,EAAIC,CAAK,EAE9BC,OAAO,IAAIF,CAAE,EAAES,YAAY,kBAAkB,CAE/C,CAAC,CACF,CAAC,CACF,CAEA,SAASC,qBAAqBC,EAAMC,EAAQC,GAE3C,IAAIC,EAAcF,EAAOG,QAAU,OAAS,OAGxCC,EAAcJ,EAAOI,QAAe,KACpCC,EAAcL,EAAOK,SAAe,KACpCC,EAAcN,EAAOM,aAAe,KACpCC,EAAcP,EAAOO,UAAe,KACpCJ,EAAcH,EAAOG,SAAe,KACpCK,EAAcR,EAAOQ,SAAe,KACpCP,EAAcA,GAAsB,KACpCQ,EAAcT,EAAOS,SAAeC,KAWpCC,GARDP,IAAUA,EAAOQ,aAAa,WAAY,UAAU,EAAGR,EAAOS,MAAMC,OAAS,eAC7ET,GAASf,OAAOe,CAAO,EAAEU,IAAI,UAAW,QAAQ,EAGnDhB,EAAKiB,SAAWC,aAAaC,WAC7BnB,EAAKoB,SAAWnC,KAAKoC,OAAO,EAGdpB,EAAOW,SAAW,SAASU,GAcxC,IAEKC,EAfFlB,IACFA,EAAOmB,gBAAgB,UAAU,EACjCnB,EAAOS,MAAMC,OAAS,WAGpBT,GACFf,OAAOe,CAAO,EAAEU,IAAI,UAAW,MAAM,GAIrCM,EADGlB,GAA6B,UAAlB,OAAOkB,EAInBA,EAHOG,KAAKC,MAAMJ,CAAM,GAGjBK,OACTC,WAAW,WAAerB,GAAaA,EAAYsB,QAAQ,MAAM,CAAG,EAAG,GAAI,EACvEN,EAAgD,KAAA,IAAzBD,EAAOC,cAAgCD,EAAOC,cAAgB,KACzFO,EAAaR,EAAOK,MAAOJ,CAAc,GACjCf,GACPA,EAASc,EAAQtB,EAAMC,EAAQC,CAAG,CAErC,GAGIyB,EAAQ1B,EAAO0B,OAAS,SAASI,EAAOC,EAAYC,GACpD5B,IACFA,EAAOmB,gBAAgB,UAAU,EACjCnB,EAAOS,MAAMC,OAAS,WAEpBT,GACFf,OAAOe,CAAO,EAAEU,IAAI,UAAW,MAAM,EAGtCkB,QAAQC,IAAK,sBAAuB,aAAc,EAClDD,QAAQC,IAAKH,CAAW,EACxBE,QAAQC,IAAKF,CAAY,EACzBC,QAAQC,IAAKJ,CAAM,EAEnBD,EAAaE,CAAW,CACzB,EAEIF,EAAc7B,EAAO6B,aAAe,SAAUM,KAElD7C,OAAO8C,KAAK,CACX3B,QAAUA,EACV4B,KAAU,OACVC,IAAUrB,aAAasB,QACvBxC,KAAUA,EACVG,SAAUA,EACVS,QAAUA,EACVe,MAAUA,EACVlB,QAAUA,CACX,CAAC,CACF"}