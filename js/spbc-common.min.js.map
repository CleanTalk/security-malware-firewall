{"version":3,"file":"spbc-common.min.js","sources":["spbc-common.js"],"sourcesContent":["function spbc_timestamp(){\n\treturn Math.floor(+new Date() / 1000);\n}\n\n// Hightlights element\nfunction spbcHighlightElement(id, times){\n\ttimes = times-1 || 0;\n\tjQuery(\"html, body\").animate({ scrollTop: jQuery(jQuery('#'+id)).offset().top - 100 }, \"slow\");\n\tjQuery('#'+id).addClass('spbc_highlighted');\n\tjQuery('#'+id).animate({outlineColor: \"rgba(255, 0, 0, 1.0)\" }, 400, 'linear', function(){\n\t\tjQuery('#'+id).animate({outlineColor: \"rgba(255, 0, 0, 0.0)\" }, 400, 'linear', function(){\n\t\t\tif(times>0){\n\t\t\t\tspbcHighlightElement(id, times);\n\t\t\t}else{\n\t\t\t\tjQuery('#'+id).removeClass('spbc_highlighted');\n\t\t\t}\n\t\t});\n\t});\n}\n\nfunction spbc_sendAJAXRequest(data, params, obj){\n\n\tvar dataType    = params.notJson ? 'text' : 'json';\n\n\t// Default params\n\tvar button      = params.button      || null;\n\tvar spinner     = params.spinner     || null;\n\tvar progressbar = params.progressbar || null;\n\tvar callback    = params.callback    || null;\n\tvar notJson     = params.notJson     || null;\n\tvar timeout     = params.timeout     || 15000;\n\tvar obj         = obj                || null;\n\tvar context     = params.context     || this;\n\n\t// Button and spinner\n\tif(button)  {button.setAttribute('disabled', 'disabled'); button.style.cursor = 'not-allowed'; }\n\tif(spinner) jQuery(spinner).css('display', 'inline');\n\n\t// Adding security code\n\tdata.security = spbcSettings.ajax_nonce;\n\tdata.no_cache = Math.random();\n\n\t// Using passed successCallback() or default\n\tvar success = params.success || function(result){\n\t\tif(button){\n\t\t\tbutton.removeAttribute('disabled');\n\t\t\tbutton.style.cursor = 'pointer';\n\t\t}\n\n\t\tif(spinner) {\n\t\t\tjQuery(spinner).css('display', 'none');\n\t\t}\n\n\t\tif(!notJson && typeof result !== 'object'){\n\t\t\tresult = JSON.parse(result);\n\t\t}\n\n\t\tif(result.error){\n\t\t\tsetTimeout(function(){ if(progressbar) progressbar.fadeOut('slow'); }, 1000);\n\t\t\tlet error_comment = typeof result.error_comment !== 'undefined' ? result.error_comment : null;\n\t\t\terrorOutput( result.error, error_comment );\n\t\t}else if(callback){\n\t\t\t\tcallback(result, data, params, obj);\n\t\t}\n\t};\n\n\t// Using passed successCallback() or default\n\tvar error = params.error || function(jqXHR, textStatus, errorThrown){\n\t\tif(button){\n\t\t\tbutton.removeAttribute('disabled');\n\t\t\tbutton.style.cursor = 'pointer';\n\t\t}\n\t\tif(spinner){\n\t\t\tjQuery(spinner).css('display', 'none');\n\t\t}\n\n\t\tconsole.log( '%c APBCT_AJAX_ERROR', 'color: red;' );\n\t\tconsole.log( textStatus );\n\t\tconsole.log( errorThrown );\n\t\tconsole.log( jqXHR );\n\n\t\terrorOutput( textStatus );\n\t};\n\n\tvar errorOutput = params.errorOutput || function( msg ){};\n\n\tjQuery.ajax({\n\t\tcontext:  context,\n\t\ttype:     \"POST\",\n\t\turl:      spbcSettings.ajaxurl,\n\t\tdata:     data,\n\t\tdataType: dataType,\n\t\tsuccess:  success,\n\t\terror:    error,\n\t\ttimeout:  timeout,\n\t});\n}"],"names":["spbc_timestamp","Math","floor","Date","spbcHighlightElement","id","times","jQuery","animate","scrollTop","offset","top","addClass","outlineColor","removeClass","spbc_sendAJAXRequest","data","params","obj","dataType","notJson","button","spinner","progressbar","callback","timeout","context","this","success","setAttribute","style","cursor","css","security","spbcSettings","ajax_nonce","no_cache","random","result","error_comment","removeAttribute","JSON","parse","error","setTimeout","fadeOut","errorOutput","jqXHR","textStatus","errorThrown","console","log","msg","ajax","type","url","ajaxurl"],"mappings":"AAAA,SAASA,iBACR,OAAOC,KAAKC,OAAO,IAAIC,KAAS,KAIjC,SAASC,qBAAqBC,EAAIC,GACjCA,EAAQA,EAAM,GAAK,EACnBC,OAAO,cAAcC,QAAQ,CAAEC,UAAWF,OAAOA,OAAO,IAAIF,IAAKK,SAASC,IAAM,KAAO,QACvFJ,OAAO,IAAIF,GAAIO,SAAS,oBACxBL,OAAO,IAAIF,GAAIG,QAAQ,CAACK,aAAc,wBAA0B,IAAK,SAAU,WAC9EN,OAAO,IAAIF,GAAIG,QAAQ,CAACK,aAAc,wBAA0B,IAAK,SAAU,WACrE,EAANP,EACFF,qBAAqBC,EAAIC,GAEzBC,OAAO,IAAIF,GAAIS,YAAY,wBAM/B,SAASC,qBAAqBC,EAAMC,EAAQC,GAE3C,IAAIC,EAAcF,EAAOG,QAAU,OAAS,OAGxCC,EAAcJ,EAAOI,QAAe,KACpCC,EAAcL,EAAOK,SAAe,KACpCC,EAAcN,EAAOM,aAAe,KACpCC,EAAcP,EAAOO,UAAe,KACpCJ,EAAcH,EAAOG,SAAe,KACpCK,EAAcR,EAAOQ,SAAe,KACpCP,EAAcA,GAAsB,KACpCQ,EAAcT,EAAOS,SAAeC,KAWpCC,GARDP,IAAUA,EAAOQ,aAAa,WAAY,YAAaR,EAAOS,MAAMC,OAAS,eAC7ET,GAASf,OAAOe,GAASU,IAAI,UAAW,UAG3ChB,EAAKiB,SAAWC,aAAaC,WAC7BnB,EAAKoB,SAAWnC,KAAKoC,SAGPpB,EAAOW,SAAW,SAASU,GAcxC,IAEKC,EAfFlB,IACFA,EAAOmB,gBAAgB,YACvBnB,EAAOS,MAAMC,OAAS,WAGpBT,GACFf,OAAOe,GAASU,IAAI,UAAW,SAI/BM,EADGlB,GAA6B,iBAAXkB,EAInBA,EAHOG,KAAKC,MAAMJ,IAGXK,OACTC,WAAW,WAAerB,GAAaA,EAAYsB,QAAQ,SAAY,KACnEN,OAAgD,IAAzBD,EAAOC,cAAgCD,EAAOC,cAAgB,KACzFO,EAAaR,EAAOK,MAAOJ,IACnBf,GACPA,EAASc,EAAQtB,EAAMC,EAAQC,KAK9ByB,EAAQ1B,EAAO0B,OAAS,SAASI,EAAOC,EAAYC,GACpD5B,IACFA,EAAOmB,gBAAgB,YACvBnB,EAAOS,MAAMC,OAAS,WAEpBT,GACFf,OAAOe,GAASU,IAAI,UAAW,QAGhCkB,QAAQC,IAAK,sBAAuB,eACpCD,QAAQC,IAAKH,GACbE,QAAQC,IAAKF,GACbC,QAAQC,IAAKJ,GAEbD,EAAaE,IAGVF,EAAc7B,EAAO6B,aAAe,SAAUM,KAElD7C,OAAO8C,KAAK,CACX3B,QAAUA,EACV4B,KAAU,OACVC,IAAUrB,aAAasB,QACvBxC,KAAUA,EACVG,SAAUA,EACVS,QAAUA,EACVe,MAAUA,EACVlB,QAAUA"}