{"version":3,"file":"spbc-common.min.js","sources":["spbc-common.js"],"sourcesContent":["/**\n * Timestamp\n *\n * @return {number}\n */\nfunction spbcTimestamp() {/* eslint-disable-line no-unused-vars */\n    return Math.floor(+new Date() / 1000);\n}\n\n/**\n * Hightlights element\n *\n * @param {number|string} id\n * @param {number} times\n */\nfunction spbcHighlightElement(id, times) {/* eslint-disable-line no-unused-vars */\n    times = times-1 || 0;\n    jQuery('html, body').animate({scrollTop: jQuery(jQuery('#'+id)).offset().top - 100}, 'slow');\n    jQuery('#'+id).addClass('spbc_highlighted');\n    jQuery('#'+id).animate({outlineColor: 'rgba(255, 0, 0, 1.0)'}, 400, 'linear', function() {\n        jQuery('#'+id).animate({outlineColor: 'rgba(255, 0, 0, 0.0)'}, 400, 'linear', function() {\n            if (times>0) {\n                spbcHighlightElement(id, times);\n            } else {\n                jQuery('#'+id).removeClass('spbc_highlighted');\n            }\n        });\n    });\n}\n\n/**\n * Send AJAX Request\n *\n * @param {obj} data\n * @param {obj} params\n * @param {obj} obj\n */\nfunction spbcSendAJAXRequest(data, params, obj) {/* eslint-disable-line no-unused-vars */\n    let dataType = params.notJson ? 'text' : 'json';\n\n    // Default params\n    let button = params.button || null;\n    let spinner = params.spinner || null;\n    let progressbar = params.progressbar || null;\n    let callback = params.callback || null;\n    let notJson = params.notJson || null;\n    let timeout = params.timeout || 15000;\n    obj = obj || null;\n    let context = params.context || this;\n\n    // Button and spinner\n    if (button) {\n        button.setAttribute('disabled', 'disabled'); button.style.cursor = 'not-allowed';\n    }\n    if (spinner) {\n        if (Array.isArray(spinner)) {\n            spinner.forEach(function(el) {\n                jQuery(el).css('display', 'inline');\n            });\n        } else {\n            jQuery(spinner).css('display', 'inline');\n        }\n    }\n\n    // Adding security code\n    data.security = spbcSettings.ajax_nonce;\n    data.no_cache = Math.random();\n\n    // Using passed successCallback() or default\n    let success = params.success || function(result) {\n        if (button) {\n            button.removeAttribute('disabled');\n            button.style.cursor = 'pointer';\n        }\n\n        if (spinner) {\n            if (Array.isArray(spinner)) {\n                spinner.forEach(function(el) {\n                    jQuery(el).css('display', 'none');\n                });\n            } else {\n                jQuery(spinner).css('display', 'none');\n            }\n        }\n\n        if (!notJson && typeof result !== 'object') {\n            result = JSON.parse(result);\n        }\n\n        if (result.error) {\n            setTimeout(function() {\n                if (progressbar) progressbar.fadeOut('slow');\n            }, 1000);\n            let errorComment = typeof result.error_comment !== 'undefined' ? result.error_comment : null;\n            const hideSupportLink = typeof result.hide_support_link !== 'undefined';\n            errorOutput( result.error, errorComment, hideSupportLink );\n            jQuery('.tbl-preloader--in_button').css('display', 'none');\n        } else if (callback) {\n            callback(result, data, params, obj);\n        }\n    };\n\n    // Using passed successCallback() or default\n    let error = params.error || function(jqXHR, textStatus, errorThrown) {\n        if (button) {\n            button.removeAttribute('disabled');\n            button.style.cursor = 'pointer';\n        }\n        if (spinner) {\n            if (Array.isArray(spinner)) {\n                spinner.forEach(function(el) {\n                    jQuery(el).css('display', 'none');\n                });\n            } else {\n                jQuery(spinner).css('display', 'none');\n            }\n        }\n\n        console.log( '%c APBCT_AJAX_ERROR', 'color: red;' );\n        console.log( textStatus );\n        console.log( errorThrown );\n        console.log( jqXHR );\n\n        errorOutput( textStatus );\n    };\n\n    var errorOutput = params.errorOutput || function( msg ) {};/* eslint-disable-line no-var */\n\n    jQuery.ajax({\n        context: context,\n        type: 'POST',\n        url: spbcSettings.ajaxurl,\n        data: data,\n        dataType: dataType,\n        success: success,\n        error: error,\n        timeout: timeout,\n    });\n}\n"],"names":["spbcTimestamp","Math","floor","Date","spbcHighlightElement","id","times","jQuery","animate","scrollTop","offset","top","addClass","outlineColor","removeClass","spbcSendAJAXRequest","data","params","obj","let","dataType","notJson","button","spinner","progressbar","callback","timeout","context","this","success","setAttribute","style","cursor","Array","isArray","forEach","el","css","security","spbcSettings","ajax_nonce","no_cache","random","result","errorComment","hideSupportLink","removeAttribute","JSON","parse","error","setTimeout","fadeOut","error_comment","hide_support_link","errorOutput","msg","ajax","type","url","ajaxurl","jqXHR","textStatus","errorThrown","console","log"],"mappings":"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"}