{"version":3,"sources":["spbc-common.js"],"names":["spbc_timestamp","Math","floor","Date","spbcHighlightElement","id","times","jQuery","addClass","animate","outlineColor","removeClass","spbc_sendAJAXRequest","data","params","obj","button","spinner","progressbar","callback","notJson","timeout","setAttribute","style","cursor","css","security","spbcSettings","ajax_nonce","ajax","type","url","ajaxurl","success","result","removeAttribute","JSON","parse","error","setTimeout","fadeOut","alert","jqXHR","textStatus","errorThrown","console","log"],"mappings":"AAAA,SAASA,iBACR,OAAOC,KAAKC,OAAO,IAAIC,KAAS,KAIjC,SAASC,qBAAqBC,EAAIC,GACjCA,EAAQA,EAAM,GAAK,EACnBC,OAAO,IAAIF,GAAIG,SAAS,oBACxBD,OAAO,IAAIF,GAAII,QAAQ,CAACC,aAAc,wBAA0B,IAAK,SAAU,WAC9EH,OAAO,IAAIF,GAAII,QAAQ,CAACC,aAAc,wBAA0B,IAAK,SAAU,WACrE,EAANJ,EACFF,qBAAqBC,EAAIC,GAEzBC,OAAO,IAAIF,GAAIM,YAAY,wBAM/B,SAASC,qBAAqBC,EAAMC,EAAQC,GAG3C,IAAIC,EAAcF,EAAOE,QAAe,KACpCC,EAAcH,EAAOG,SAAe,KACpCC,EAAcJ,EAAOI,aAAe,KACpCC,EAAcL,EAAOK,UAAe,KACpCC,EAAcN,EAAOM,SAAe,KACpCC,EAAcP,EAAOO,SAAe,KACpCN,EAAcA,GAAsB,KAGrCC,IAAUA,EAAOM,aAAa,WAAY,YAAaN,EAAOO,MAAMC,OAAS,eAC7EP,GAASV,OAAOU,GAASQ,IAAI,UAAW,UAG3CZ,EAAKa,SAAWC,aAAaC,WAE7BrB,OAAOsB,KAAK,CACXC,KAAM,OACNC,IAAKJ,aAAaK,QAClBnB,KAAMA,EACNoB,QAAS,SAASC,GACdlB,IAAUA,EAAOmB,gBAAgB,YAAanB,EAAOO,MAAMC,OAAS,WACpEP,GAAUV,OAAOU,GAASQ,IAAI,UAAW,QACxCL,IAASc,EAASE,KAAKC,MAAMH,IAC9BA,EAAOI,OACTC,WAAW,WAAerB,GAAaA,EAAYsB,QAAQ,SAAY,KACvEC,MAAM,mBAAqBP,EAAOI,OAAS,YAExCnB,GACFA,EAASe,EAAQrB,EAAMC,EAAQC,IAGlCuB,MAAO,SAASI,EAAOC,EAAYC,GAC/B5B,IAAUA,EAAOmB,gBAAgB,YAAanB,EAAOO,MAAMC,OAAS,WACpEP,GAASV,OAAOU,GAASQ,IAAI,UAAW,QAC3CoB,QAAQC,IAAI,mBACZD,QAAQC,IAAIJ,GACZG,QAAQC,IAAIH,GACZE,QAAQC,IAAIF,GACTA,GACFH,MAAMG,IAERvB,QAASA","file":"spbc-common.min.js","sourcesContent":["function spbc_timestamp(){\n\treturn Math.floor(+new Date() / 1000);\n}\n\n// Hightlights element\nfunction spbcHighlightElement(id, times){\n\ttimes = times-1 || 0;\n\tjQuery('#'+id).addClass('spbc_highlighted');\n\tjQuery('#'+id).animate({outlineColor: \"rgba(255, 0, 0, 1.0)\" }, 400, 'linear', function(){\n\t\tjQuery('#'+id).animate({outlineColor: \"rgba(255, 0, 0, 0.0)\" }, 400, 'linear', function(){\n\t\t\tif(times>0){\n\t\t\t\tspbcHighlightElement(id, times);\n\t\t\t}else{\n\t\t\t\tjQuery('#'+id).removeClass('spbc_highlighted');\n\t\t\t}\n\t\t});\n\t});\n}\n\nfunction spbc_sendAJAXRequest(data, params, obj){\n\t\n\t// Default params\n\tvar button      = params.button      || null;\n\tvar spinner     = params.spinner     || null;\n\tvar progressbar = params.progressbar || null;\n\tvar callback    = params.callback    || null;\n\tvar notJson     = params.notJson     || null;\n\tvar timeout     = params.timeout     || 15000;\n\tvar obj         = obj                || null;\n\t\n\t// Button and spinner\n\tif(button)  {button.setAttribute('disabled', 'disabled'); button.style.cursor = 'not-allowed'; }\n\tif(spinner) jQuery(spinner).css('display', 'inline');\n\t\n\t// Adding security code\n\tdata.security = spbcSettings.ajax_nonce;\n\t\n\tjQuery.ajax({\n\t\ttype: \"POST\",\n\t\turl: spbcSettings.ajaxurl,\n\t\tdata: data,\n\t\tsuccess: function(result){\n\t\t\tif(button){  button.removeAttribute('disabled'); button.style.cursor = 'pointer'; }\n\t\t\tif(spinner)  jQuery(spinner).css('display', 'none');\n\t\t\tif(!notJson) result = JSON.parse(result);\n\t\t\tif(result.error){\n\t\t\t\tsetTimeout(function(){ if(progressbar) progressbar.fadeOut('slow'); }, 1000);\n\t\t\t\talert('Error happens: ' + (result.error || 'Unkown'));\n\t\t\t}else{\n\t\t\t\tif(callback)\n\t\t\t\t\tcallback(result, data, params, obj);\n\t\t\t}\n\t\t},\n\t\terror: function(jqXHR, textStatus, errorThrown){\n\t\t\tif(button){  button.removeAttribute('disabled'); button.style.cursor = 'pointer'; }\n\t\t\tif(spinner) jQuery(spinner).css('display', 'none');\n\t\t\tconsole.log('SPBC_AJAX_ERROR');\n\t\t\tconsole.log(jqXHR);\n\t\t\tconsole.log(textStatus);\n\t\t\tconsole.log(errorThrown);\n\t\t\tif(errorThrown)\n\t\t\t\talert(errorThrown);\n\t\t},\n\t\ttimeout: timeout,\n\t});\n}"]}