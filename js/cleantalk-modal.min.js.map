{"version":3,"file":"cleantalk-modal.min.js","sources":["cleantalk-modal.js"],"sourcesContent":["/* Cleantalk Modal object */\nspbcModal = {\n\n    // Flags\n    loaded: false,\n    loading: false,\n    opened: false,\n    opening: false,\n\n    // Methods\n    load: function( action ) {\n        if( ! this.loaded ) {\n            this.loading = true;\n            callback = function( result, data, params, obj ) {\n                spbcModal.loading = false;\n                spbcModal.loaded = result;\n                document.dispatchEvent(\n                    new CustomEvent( \"spbcModalContentLoaded\", {\n                        bubbles: true,\n                    } )\n                );\n            };\n            if( typeof spbc_sendAJAXRequest === \"function\" ) {\n                spbc_sendAJAXRequest( { 'action' : action }, { 'callback': callback, 'notJson': true } );\n            }\n\n        }\n    },\n\n    open: function () {\n        /* Cleantalk Modal CSS start */\n        var renderCss = function () {\n            var cssStr = '';\n            for ( key in this.styles ) {\n                cssStr += key + ':' + this.styles[key] + ';';\n            }\n            return cssStr;\n        };\n        var overlayCss = {\n            styles: {\n                \"z-index\": \"9999\",\n                \"position\": \"fixed\",\n                \"top\": \"0\",\n                \"left\": \"0\",\n                \"width\": \"100%\",\n                \"height\": \"100%\",\n                \"background\": \"rgba(0,0,0,0.5)\",\n                \"display\": \"flex\",\n                \"justify-content\" : \"center\",\n                \"align-items\" : \"center\",\n            },\n            toString: renderCss\n        };\n        var innerCss = {\n            styles: {\n                \"position\" : \"relative\",\n                \"padding\" : \"30px\",\n                \"background\" : \"#FFF\",\n                \"border\" : \"1px solid rgba(0,0,0,0.75)\",\n                \"border-radius\" : \"4px\",\n                \"box-shadow\" : \"7px 7px 5px 0px rgba(50,50,50,0.75)\",\n            },\n            toString: renderCss\n        };\n        var closeCss = {\n            styles: {\n                \"position\" : \"absolute\",\n                \"background\" : \"#FFF\",\n                \"width\" : \"20px\",\n                \"height\" : \"20px\",\n                \"border\" : \"2px solid rgba(0,0,0,0.75)\",\n                \"border-radius\" : \"15px\",\n                \"cursor\" : \"pointer\",\n                \"top\" : \"-8px\",\n                \"right\" : \"-8px\",\n            },\n            toString: renderCss\n        };\n        var closeCssBefore = {\n            styles: {\n                \"content\" : \"\\\"\\\"\",\n                \"display\" : \"block\",\n                \"position\" : \"absolute\",\n                \"background\" : \"#000\",\n                \"border-radius\" : \"1px\",\n                \"width\" : \"2px\",\n                \"height\" : \"16px\",\n                \"top\" : \"2px\",\n                \"left\" : \"9px\",\n                \"transform\" : \"rotate(45deg)\",\n            },\n            toString: renderCss\n        };\n        var closeCssAfter = {\n            styles: {\n                \"content\" : \"\\\"\\\"\",\n                \"display\" : \"block\",\n                \"position\" : \"absolute\",\n                \"background\" : \"#000\",\n                \"border-radius\" : \"1px\",\n                \"width\" : \"2px\",\n                \"height\" : \"16px\",\n                \"top\" : \"2px\",\n                \"left\" : \"9px\",\n                \"transform\" : \"rotate(-45deg)\",\n            },\n            toString: renderCss\n        };\n        var bodyCss = {\n            styles: {\n                \"overflow\" : \"hidden\",\n            },\n            toString: renderCss\n        };\n        var spbcModalStyle = document.createElement( 'style' );\n        spbcModalStyle.setAttribute( 'id', 'spbc-modal-styles' );\n        spbcModalStyle.innerHTML = 'body.spbc-modal-opened{' + bodyCss + '}';\n        spbcModalStyle.innerHTML += '#spbc-modal-overlay{' + overlayCss + '}';\n        spbcModalStyle.innerHTML += '#spbc-modal-close{' + closeCss + '}';\n        spbcModalStyle.innerHTML += '#spbc-modal-close:before{' + closeCssBefore + '}';\n        spbcModalStyle.innerHTML += '#spbc-modal-close:after{' + closeCssAfter + '}';\n        document.body.append( spbcModalStyle );\n        /* Cleantalk Modal CSS end */\n\n        var overlay = document.createElement( 'div' );\n        overlay.setAttribute( 'id', 'spbc-modal-overlay' );\n        document.body.append( overlay );\n\n        document.body.classList.add( 'spbc-modal-opened' );\n\n        var inner = document.createElement( 'div' );\n        inner.setAttribute( 'id', 'spbc-modal-inner' );\n        inner.setAttribute( 'style', innerCss );\n        overlay.append( inner );\n\n        var close = document.createElement( 'div' );\n        close.setAttribute( 'id', 'spbc-modal-close' );\n        inner.append( close );\n\n        var content = document.createElement( 'div' );\n        if ( this.loaded ) {\n            content.innerHTML = this.loaded;\n        } else {\n            content.innerHTML = 'Loading...';\n            // @ToDo Here is hardcoded parameter. Have to get this from a 'data-' attribute.\n            this.load( 'spbc_get_options_template' );\n        }\n        content.setAttribute( 'id', 'spbc-modal-content' );\n        inner.append( content );\n\n        this.opened = true;\n    },\n\n    close: function () {\n        document.body.classList.remove( 'spbc-modal-opened' );\n        document.getElementById( 'spbc-modal-overlay' ).remove();\n        document.getElementById( 'spbc-modal-styles' ).remove();\n        document.dispatchEvent(\n            new CustomEvent( \"spbcModalClosed\", {\n                bubbles: true,\n            } )\n        );\n    }\n\n};\n\n/* Cleantalk Modal helpers */\ndocument.addEventListener('click',function( e ){\n    if( e.target && e.target.id === 'spbc-modal-overlay' || e.target.id === 'spbc-modal-close' ){\n        spbcModal.close();\n    }\n});\ndocument.addEventListener(\"spbcModalContentLoaded\", function( e ) {\n    if( spbcModal.opened && spbcModal.loaded ) {\n        document.getElementById( 'spbc-modal-content' ).innerHTML = spbcModal.loaded;\n    }\n});"],"names":["spbcModal","loaded","loading","opened","opening","load","action","this","callback","result","data","params","obj","document","dispatchEvent","CustomEvent","bubbles","spbc_sendAJAXRequest","notJson","open","renderCss","cssStr","key","styles","overlayCss","z-index","position","top","left","width","height","background","display","justify-content","align-items","toString","innerCss","padding","border","border-radius","box-shadow","closeCss","cursor","right","closeCssBefore","content","transform","closeCssAfter","bodyCss","overflow","spbcModalStyle","createElement","setAttribute","innerHTML","body","append","overlay","classList","add","inner","close","remove","getElementById","addEventListener","e","target","id"],"mappings":"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"}