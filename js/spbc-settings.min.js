function spbc_switchTab(e,t){var s=e.classList[1].replace("spbc_tab_nav-","");if(jQuery(".spbc_tab_nav").removeClass("spbc_tab_nav--active"),jQuery(".spbc_tab").removeClass("spbc_tab--active"),jQuery(e).addClass("spbc_tab_nav--active"),jQuery(".spbc_tab-"+s).addClass("spbc_tab--active"),jQuery(e).data("loaded")){if(t&&t.action)switch(t.action){case"highlight":spbcHighlightElement(t.target,t.times);break;case"click":setTimeout(function(){jQuery("#"+t.additional.target).click()},500)}}else{var c={action:"spbc_settings__draw_elements",tab_name:s,security:spbcSettings.ajax_nonce};t={callback:spbc_draw_settings_callback,notJson:!0,additional:t||null};spbc_sendAJAXRequest(c,t,e)}}function spbc_draw_settings_callback(e,t,s,c){jQuery(c).data("loaded",!0),jQuery(".spbc_tab-"+t.tab_name).replaceWith(e);var n=jQuery(".spbc_tab-"+t.tab_name);if(n.addClass("spbc_tab--active"),s.additional)switch(s.additional.action){case"highlight":spbcHighlightElement(s.additional.target,s.additional.times);break;case"click":setTimeout(function(){jQuery("#"+s.additional.target).click()},500)}jQuery(n).on("click",".spbc_hint-send_"+t.tab_name,function(){jQuery(".spbc_hint-send_"+t.tab_name).hide(),spbc_sendAJAXRequest({action:"spbc_send_"+t.tab_name,tab_name:t.tab_name},{callback:spbc_send_logs_callback})})}function spbc_send_logs_callback(e,t,s,c){jQuery(".spbc_tab_nav-"+t.tab_name).data("loaded",!1),spbc_switchTab(document.getElementsByClassName("spbc_tab_nav-"+t.tab_name)[0])}function spbcSettingsDependencies(e,o){"string"==typeof e&&(tmp=[],tmp.push(e),e=tmp),o=void 0===o?null:+o,e.forEach(function(e,t,s){function c(){a.setAttribute("disabled","disabled")}function n(){a.removeAttribute("disabled")}var a=document.getElementById("spbc_setting_"+e);(null!==o?1===o?n:c:null===a.getAttribute("disabled")?c:n)()})}function spbc_settings__show_description(e,t){var n=function(e){void 0!==e&&(0!=jQuery(e.target).parent(".spbc_long_desc").length&&!jQuery(e.target).hasClass("spbc_long_desc__cancel")||jQuery(e.target).hasClass("spbc_long_description__show"))||(jQuery(".spbc_long_desc").remove(),jQuery(document).off("click",n))};n(),e.after("<div id='spbc_long_desc__"+t+"' class='spbc_long_desc'></div>");var s=jQuery("#spbc_long_desc__"+t);s.append("<i class='icon-spin1 animate-spin'></i>").append("<div class='spbc_long_desc__angle'></div>").css({top:e.position().top-5,left:e.position().left+25}),spbc_sendAJAXRequest({action:"spbc_settings__get_description",setting_id:t},{spinner:s.children("img"),callback:function(e,t,s,c){c.empty().append("<div class='spbc_long_desc__angle'></div>").append("<i class='spbc_long_desc__cancel icon-cancel'></i>").append("<h3 class='spbc_long_desc__title'>"+e.title+"</h3>").append("<p>"+e.desc+"</p>"),jQuery(document).on("click",n)}},s)}function spbcStartShowHide(){jQuery(".spbcShortText").on("mouseover",function(){jQuery(this).next().show()}),jQuery(".spbcFullText").on("mouseout",function(){jQuery(this).hide()})}function spbctGenerateConfirmationCode(){var e={},t={success:!1};return e.security=spbcSettings.ajax_nonce,e.action="spbc_generate_confirmation_code",e.email_to_send_confirmation_code_to=jQuery("select[name=website_emails]").val(),jQuery.ajax({type:"POST",async:!1,url:spbcSettings.ajaxurl,data:e,success:function(e){e.success?t.success=!0:t.text=e.data}}),t}function spbctCheckConfirmationCode(e){var t=e,s={};s.security=spbcSettings.ajax_nonce,s.action="spbc_check_confirmation_code",s.code=jQuery("#confirmation-code input").val(),jQuery.ajax({type:"POST",async:!1,url:spbcSettings.ajaxurl,data:s,success:function(e){jQuery("#confirmation-code").dialog("close"),e.success?(jQuery("[name *= 2fa__enable]").attr("checked",""),t.checked=!0,jQuery("#spbc_setting_2fa__roles").removeAttr("disabled"),jQuery("#spbc_setting_2fa__roles > option:first").attr("selected","selected")):alert("Code verification failed!")}})}function spbc_banner_check(){var n=setInterval(function(){spbc_sendAJAXRequest({action:"spbc_settings__check_renew_banner"},{callback:function(e,t,s,c){e.close_renew_banner&&(jQuery("#spbc_renew_notice").length&&jQuery("#spbc_renew_notice").hide("slow"),jQuery("#spbc_trial_notice").length&&jQuery("#spbc_trial_notice").hide("slow"),clearInterval(n))}})},6e4)}String.prototype.printf=function(){var e=this;for(var t in arguments){var s=e.substring(0,e.indexOf("%s",0)),c=e.substring(e.indexOf("%s",0)+2,e.length);e=s+arguments[t]+c}return e},jQuery(document).ready(function(){jQuery("#spbc_gdpr_open_modal").on("click",function(){jQuery("#gdpr_dialog").dialog({modal:!0,show:!0,position:{my:"center",at:"center",of:window},width:+jQuery("#wpbody").width()/100*70,height:"auto",title:"GDPR compliance",draggable:!1,resizable:!1,closeText:"Close"})}),jQuery(document).on("click","[name*=fa__enable]:not([value=0])",function(e){e.preventDefault();var t=spbctGenerateConfirmationCode();t.success?(jQuery("#confirmation-code input").val(""),jQuery("#confirmation-code").dialog({modal:!0,title:"Confirmation code",buttons:{Cancel:function(){jQuery(this).dialog("close")},Ok:function(){spbctCheckConfirmationCode(e.target)}},draggable:!1,resizable:!1})):alert(t.text)}),(jQuery("#spbc_renew_notice").length||jQuery("#spbc_trial_notice").length)&&spbc_banner_check(),jQuery("#spbc_button__sync").on("click",function(){spbc_sendAJAXRequest({action:"spbc_sync"},{timeout:25e3,button:document.getElementById("spbc_button__sync"),spinner:jQuery("#spbc_button__sync .spbc_preloader_button"),callback:function(e,t,s,c){jQuery("#spbc_button__sync .spbc_success").show(300),setTimeout(function(){jQuery("#spbc_button__sync .spbc_success").hide(300)},2e3),e.reload&&document.location.reload()}})}),spbcSettings.key_changed&&jQuery("#spbc_button__sync").click(),jQuery(document).on("click","#spbc_setting_get_key_auto",function(){spbc_sendAJAXRequest({action:"spbc_get_key_auto"},{timeout:25e3,button:document.getElementById("spbc_setting_get_key_auto"),spinner:jQuery("#spbc_setting_get_key_auto .spbc_preloader_button"),callback:function(e,t,s,c){jQuery("#spbc_setting_get_key_auto .spbc_success").show(300),setTimeout(function(){jQuery("#spbc_setting_get_key_auto .spbc_success").hide(300)},2e3),e.reload&&document.location.reload(),e.getTemplates&&(cleantalkModal.loaded=e.getTemplates,cleantalkModal.open(),document.addEventListener("cleantalkModalClosed",function(e){document.location.reload()}))}})}),jQuery(document).on("click","#spbc_settings_templates_import_button",function(){jQuery("#spbc-ajax-result").remove();var e=jQuery("option:selected",jQuery("#spbc_settings_templates_import"));if(jQuery("#spbc_settings_templates_import_name").css("border-color","inherit"),void 0!==e.data("id")){var t={template_id:e.data("id"),template_name:e.data("name"),settings:e.data("settings")},n=this;spbc_sendAJAXRequest({action:"settings_templates_import",data:t},{timeout:25e3,button:n,spinner:jQuery("#spbc_settings_templates_import_button .spbc_preloader_button"),notJson:!0,callback:function(e,t,s,c){e.success?(jQuery("<p id='spbc-ajax-result' class='success'>"+e.data+"</p>").insertAfter(jQuery(n)),jQuery("#spbc_settings_templates_import_button .spbc_success").show(300),setTimeout(function(){jQuery("#spbc_settings_templates_import_button .spbc_success").hide(300)},2e3),document.addEventListener("cleantalkModalClosed",function(e){document.location.reload()}),setTimeout(function(){cleantalkModal.close()},2e3)):jQuery("<p id='spbc-ajax-result' class='error'>"+e.data+"</p>").insertAfter(jQuery(n))}})}else console.log('Attribute "data-id" not set for the option.')}),jQuery(document).on("click","#spbc_settings_templates_export_button",function(){jQuery("#spbc-ajax-result").remove();var e=jQuery("option:selected",jQuery("#spbc_settings_templates_export")),t=jQuery("#spbc_settings_templates_export_name");if(t.css("border-color","inherit"),void 0!==e.data("id")){if("new_template"===e.data("id")){var s=t.val();if(""===s)return void t.css("border-color","red");var c={template_name:s}}else c={template_id:e.data("id")};var n=this;spbc_sendAJAXRequest({action:"settings_templates_export",data:c},{timeout:25e3,button:n,spinner:jQuery("#spbc_settings_templates_export_button .spbc_preloader_button"),notJson:!0,callback:function(e,t,s,c){e.success?(jQuery("<p id='spbc-ajax-result' class='success'>"+e.data+"</p>").insertAfter(jQuery(n)),jQuery("#spbc_settings_templates_export_button .spbc_success").show(300),setTimeout(function(){jQuery("#spbc_settings_templates_export_button .spbc_success").hide(300)},2e3),document.addEventListener("cleantalkModalClosed",function(e){document.location.reload()}),setTimeout(function(){cleantalkModal.close()},2e3)):jQuery("<p id='spbc-ajax-result' class='error'>"+e.data+"</p>").insertAfter(jQuery(n))}})}else console.log('Attribute "data-id" not set for the option.')}),jQuery(document).on("click","#spbc_settings_templates_reset_button",function(){var n=this;spbc_sendAJAXRequest({action:"settings_templates_reset"},{timeout:25e3,button:n,spinner:jQuery("#spbc_settings_templates_reset_button .spbc_preloader_button"),notJson:!0,callback:function(e,t,s,c){e.success?(jQuery("<p id='spbc-ajax-result' class='success'>"+e.data+"</p>").insertAfter(jQuery(n)),jQuery("#spbc_settings_templates_reset_button .spbc_success").show(300),setTimeout(function(){jQuery("#spbc_settings_templates_reset_button .spbc_success").hide(300)},2e3),document.addEventListener("cleantalkModalClosed",function(e){document.location.reload()}),setTimeout(function(){cleantalkModal.close()},2e3)):jQuery("<p id='spbc-ajax-result' class='error'>"+e.data+"</p>").insertAfter(jQuery(n))}})}),jQuery(document).on("change","#spbc_settings_templates_export",function(){"new_template"===jQuery("option:selected",this).data("id")?jQuery(this).parent().parent().find("#spbc_settings_templates_export_name").show():jQuery(this).parent().parent().find("#spbc_settings_templates_export_name").hide()}),jQuery(".spbc_tab_nav-summary").data("loaded",!0),jQuery(".spbc_tabs_nav_wrapper").on("click",".spbc_tab_nav",function(e){spbc_switchTab(e.currentTarget)});var e={target:location.search.match(/spbc_target=(\S*?)(&|$)/)?location.search.match(/spbc_target=(\S*?)(&|$)/)[1]:null,action:location.search.match(/spbc_action=(\S*?)(&|$)/)?location.search.match(/spbc_action=(\S*?)(&|$)/)[1]:null,times:location.search.match(/spbc_times=(\S*?)(&|$)/)?location.search.match(/spbc_times=(\S*?)(&|$)/)[1]:3};e.target=location.search.match(/spbc_highlight=(\S*?)(&|$)/)?location.search.match(/spbc_highlight=(\S*?)(&|$)/)[1]:e.target,e.action=-1!=location.search.search(/spbc_highlight=(\S*?)(&|$)/)?"highlight":e.action;var t=document.getElementsByClassName("spbc_tab_nav-"+(location.search.match(/spbc_tab=(\S*?)(&|$)/)?location.search.match(/spbc_tab=(\S*?)(&|$)/)[1]:""))[0]||null;t||(+spbcSettings.debug?t=document.getElementsByClassName("spbc_tab_nav-debug")[0]:+spbcSettings.wpms&&!+spbcSettings.is_main_site?t=document.getElementsByClassName("spbc_tab_nav-security_log")[0]:+spbcSettings.key_is_ok?t=document.getElementsByClassName("spbc_tab_nav-scanner")[0]:(t=document.getElementsByClassName("spbc_tab_nav-settings_general")[0],e={target:"spbc_key",action:"highlight",times:3})),t&&spbc_switchTab(t,e)});
//# sourceMappingURL=spbc-settings.min.js.map
