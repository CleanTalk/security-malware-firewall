function spbc_reload_accordion(){spbc_sendAJAXRequest({action:"spbc_scanner_tab__reload_accordion"},{notJson:!0,callback:function(t,n,c,e){jQuery(e).accordion("destroy"),jQuery(e).html(t),jQuery(e).accordion({header:"h3",heightStyle:"content",collapsible:!0,active:!1}),spbc_tbl__bulk_actions__listen(),spbc_tbl__row_actions__listen(),spbc_tbl__pagination__listen(),spbc_tbl__sort__listen(),spbcStartShowHide()}},jQuery("#spbc_scan_accordion"))}function spbc_tbl__bulk_actions__listen(){jQuery(".tbl-bulk_actions-all--apply").off("click").on("click",(function(){var t=jQuery(this),n=t.siblings("select").children()[t.siblings("select").first()[0].selectedIndex].value;if(console.log(t),-1!==["approve","disapprove","send","check_analysis_status"].indexOf(n)){if(!confirm(spbcTable.warning_bulk))return;console.log("spbc_tbl__bulk_action_all__listen click");var c={action:"spbc_tbl-action--bulk",add_action:n,status:t.parents(".tbl-root").attr("type")},e={button:this,spinner:t.children(".tbl-preloader--small"),errorOutput:function(t){spbcModal.open().putError(t)},callback:spbc_reload_accordion,errorOutput:function(t,n){n&&(t=t+"<br>Additional information:<br>"+n),spbcModal.open().putError(t)}};spbc_sendAJAXRequest(c,e)}else alert("This action is not supported for all files yet =(")})),jQuery(".tbl-bulk_actions--apply").off("click").on("click",(function(){if(spbc_bulk_action||confirm(spbcTable.warning_bulk)){var t=spbc_bulk_action||jQuery(this);spbc_bulk_action=t;var n=t.siblings("select").children()[t.siblings("select").first()[0].selectedIndex].value;"-1"!==n&&t.parents(".tbl-root").find(".cb-select").is(":checked")?(t.children(".tbl-preloader--small").show(),t.parents(".tbl-root").find(".cb-select:checked").first().parents("tr").find(".tbl-row_action--"+n)[0]?(t.parents(".tbl-root").find(".cb-select:checked").first().parents("tr").find(".tbl-row_action--"+n).click(),t.parents(".tbl-root").find(".cb-select:checked").first().prop("checked",!1)):(t.parents(".tbl-root").find(".cb-select:checked").first().prop("checked",!1),t.click())):(t.children(".tbl-preloader--small").hide(),spbc_bulk_action=null,setTimeout(spbc_reload_accordion,1900))}}))}function spbc_tbl__row_actions__listen(){jQuery(".tbl-row_action--ajax").off("click").on("click",(function(){if(console.log("spbc_tbl__row_actions__listen click"),spbc_scanner.active)alert(spbcTableLocalize.scannerIsActive);else{var t=jQuery(this),n={action:"spbc_tbl-action--row",add_action:t.attr("row-action"),id:t.parents(".row-actions").attr("uid"),cols:t.parents(".row-actions").attr("cols_amount")},c={callback:spbc_tbl__row_actions__callback,errorOutput:function(t){spbcModal.open().putError(t)},spinner:t.parents(".row-actions").children(".tbl-preloader--tiny")};if(!spbc_bulk_action){var e=spbcTable["warning_"+t.attr("row-action")]||spbcTable.warning_default;confirm(e)&&spbc_sendAJAXRequest(n,c,t.parents("tr"))}spbc_bulk_action&&spbc_sendAJAXRequest(n,c,t.parents("tr"))}}))}function spbc_tbl__row_actions__callback(t,n,c,e){if(t.color&&e.css({background:t.background,color:t.color}),t.html&&(e.parent().parent().parent().prepend(t.html),setTimeout((function(){e.fadeOut(300)}),1500),spbc_bulk_action||setTimeout(spbc_reload_accordion,1900)),t.temp_html){var s=e.html();e.html(t.temp_html),setTimeout((function(){e.html(s).css({background:"inherit"}).find(".column-primary .row-actions .tbl-row_action--"+n.add_action).remove(),spbc_tbl__bulk_actions__listen(),spbc_tbl__row_actions__listen(),spbcStartShowHide()}),5e3)}spbc_bulk_action&&spbc_bulk_action.click()}function spbc_tbl__pagination__listen(){var t={action:"spbc_tbl-pagination"},n={callback:spbc_tbl__pagination__callback,notJson:!0};jQuery(".tbl-pagination--button").on("click",(function(){jQuery(this).parents(".tbl-root").find(".tbl-pagination--button").attr("disabled","disabled")})),jQuery(".tbl-pagination--go").on("click",(function(){var c=jQuery(this),e=c.parents(".tbl-root");t.page=c.siblings(".tbl-pagination--curr_page").val(),t.type=e.attr("type"),n.spinner=c.siblings(".tbl-preloader--small"),spbc_sendAJAXRequest(t,n,e)})),jQuery(".tbl-pagination--prev").on("click",(function(){var c=jQuery(this),e=c.parents(".tbl-root");t.page=c.parents(".tbl-pagination--wrapper").attr("prev_page"),t.type=e.attr("type"),n.spinner=c.siblings(".tbl-preloader--small"),spbc_sendAJAXRequest(t,n,e)})),jQuery(".tbl-pagination--next").on("click",(function(){var c=jQuery(this),e=c.parents(".tbl-root");t.page=c.parents(".tbl-pagination--wrapper").attr("next_page"),t.type=e.attr("type"),n.spinner=c.siblings(".tbl-preloader--small"),spbc_sendAJAXRequest(t,n,e)})),jQuery(".tbl-pagination--end").on("click",(function(){var c=jQuery(this),e=c.parents(".tbl-root");t.page=c.parents(".tbl-pagination--wrapper").attr("last_page"),t.type=e.attr("type"),n.spinner=c.siblings(".tbl-preloader--small"),spbc_sendAJAXRequest(t,n,e)})),jQuery(".tbl-pagination--start").on("click",(function(){var c=jQuery(this),e=c.parents(".tbl-root");t.page=1,t.type=e.attr("type"),n.spinner=c.siblings(".tbl-preloader--small"),spbc_sendAJAXRequest(t,n,e)}))}function spbc_scanner__switch_table(t,n){t=jQuery(t);console.log(t.parents(".row-actions").attr("uid"));var c={action:"spbc_tbl-switch",type:n,domain:t.parents(".row-actions").attr("uid")};spbc_sendAJAXRequest(c,{callback:spbc_tbl__pagination__callback,notJson:!0},t.parents(".tbl-root"))}function spbc_tbl__pagination__callback(t,n,c,e){jQuery(e).html(t).find(".tbl-pagination--button").removeAttr("disabled"),spbc_tbl__bulk_actions__listen(),spbc_tbl__row_actions__listen(),spbc_tbl__pagination__listen(),spbc_tbl__sort__listen(),spbcStartShowHide()}function spbc_tbl__sort__listen(){var t={callback:spbc_tbl__sort__callback,notJson:!0};jQuery(".tbl-column-sortable").on("click",(function(){var n=jQuery(this),c=n.parents(".tbl-root"),e={action:"spbc_tbl-sort",order_by:n.attr("id"),order:n.attr("sort_direction"),type:c.attr("type")};spbc_sendAJAXRequest(e,t,c)}))}function spbc_tbl__sort__callback(t,n,c,e){jQuery(e).html(t),spbc_tbl__bulk_actions__listen(),spbc_tbl__row_actions__listen(),spbc_tbl__pagination__listen(),spbc_tbl__sort__listen()}spbc_bulk_action=null,jQuery(document).ready((function(){spbc_tbl__bulk_actions__listen(),spbc_tbl__row_actions__listen(),spbc_tbl__pagination__listen(),spbc_tbl__sort__listen()}));