{"version":3,"file":"spbc-modal.min.js","sources":["spbc-modal.js"],"sourcesContent":["/* Cleantalk Modal object */\r\nspbcModal = {\r\n\r\n    // Flags\r\n    loaded: false,\r\n    loading: false,\r\n    opened: false,\r\n    opening: false,\r\n\r\n    // Methods\r\n    load: function( action ) {\r\n        if( ! this.loaded ) {\r\n            this.loading = true;\r\n            callback = function( result, data, params, obj ) {\r\n                spbcModal.loading = false;\r\n                spbcModal.loaded = result;\r\n                document.dispatchEvent(\r\n                    new CustomEvent( \"spbcModalContentLoaded\", {\r\n                        bubbles: true,\r\n                    } )\r\n                );\r\n            };\r\n            if( typeof spbc_sendAJAXRequest === \"function\" ) {\r\n                spbc_sendAJAXRequest( { 'action' : action }, { 'callback': callback, 'notJson': true } );\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    putError: function( errorText ){\r\n        var html = '<h2>The error occurred</h2>'\r\n            + '<p>' + errorText + '</p>'\r\n            + '<a style=\"text-align: left; margin-top: 40px;\" target=\"_blank\" href=\"https://wordpress.org/support/plugin/security-malware-firewall\">Contact tech support</a>';\r\n        this.put(html);\r\n    },\r\n\r\n    put: function ( html ) {\r\n        spbcModal.loading = false;\r\n        spbcModal.loaded = html;\r\n        document.dispatchEvent(\r\n            new CustomEvent( \"spbcModalContentLoaded\", {\r\n                bubbles: true,\r\n            } )\r\n        );\r\n    },\r\n\r\n    open: function () {\r\n        /* Cleantalk Modal CSS start */\r\n        var renderCss = function () {\r\n            var cssStr = '';\r\n            for ( key in this.styles ) {\r\n                cssStr += key + ':' + this.styles[key] + ';';\r\n            }\r\n            return cssStr;\r\n        };\r\n        var overlayCss = {\r\n            styles: {\r\n                \"z-index\": \"9999\",\r\n                \"position\": \"fixed\",\r\n                \"top\": \"0\",\r\n                \"left\": \"0\",\r\n                \"width\": \"100%\",\r\n                \"height\": \"100%\",\r\n                \"background\": \"rgba(0,0,0,0.5)\",\r\n                \"display\": \"flex\",\r\n                \"justify-content\" : \"center\",\r\n                \"align-items\" : \"center\",\r\n            },\r\n            toString: renderCss\r\n        };\r\n        var innerCss = {\r\n            styles: {\r\n                \"position\" : \"relative\",\r\n                \"padding\" : \"20px\",\r\n                \"max-width\" : \"550px\",\r\n                \"max-height\" : \"500px\",\r\n                \"background\" : \"#FFF\",\r\n                \"border\" : \"1px solid rgba(0,0,0,0.75)\",\r\n                \"border-radius\" : \"4px\",\r\n                \"box-shadow\" : \"7px 7px 5px 0px rgba(50,50,50,0.75)\",\r\n            },\r\n            toString: renderCss\r\n        };\r\n        var closeCss = {\r\n            styles: {\r\n                \"position\" : \"absolute\",\r\n                \"background\" : \"#FFF\",\r\n                \"width\" : \"20px\",\r\n                \"height\" : \"20px\",\r\n                \"border\" : \"2px solid rgba(0,0,0,0.75)\",\r\n                \"border-radius\" : \"15px\",\r\n                \"cursor\" : \"pointer\",\r\n                \"top\" : \"-8px\",\r\n                \"right\" : \"-8px\",\r\n            },\r\n            toString: renderCss\r\n        };\r\n        var closeCssBefore = {\r\n            styles: {\r\n                \"content\" : \"\\\"\\\"\",\r\n                \"display\" : \"block\",\r\n                \"position\" : \"absolute\",\r\n                \"background\" : \"#000\",\r\n                \"border-radius\" : \"1px\",\r\n                \"width\" : \"2px\",\r\n                \"height\" : \"16px\",\r\n                \"top\" : \"2px\",\r\n                \"left\" : \"9px\",\r\n                \"transform\" : \"rotate(45deg)\",\r\n            },\r\n            toString: renderCss\r\n        };\r\n        var closeCssAfter = {\r\n            styles: {\r\n                \"content\" : \"\\\"\\\"\",\r\n                \"display\" : \"block\",\r\n                \"position\" : \"absolute\",\r\n                \"background\" : \"#000\",\r\n                \"border-radius\" : \"1px\",\r\n                \"width\" : \"2px\",\r\n                \"height\" : \"16px\",\r\n                \"top\" : \"2px\",\r\n                \"left\" : \"9px\",\r\n                \"transform\" : \"rotate(-45deg)\",\r\n            },\r\n            toString: renderCss\r\n        };\r\n        var contentCss = {\r\n            styles: {\r\n                \"overflow-y\": \"auto\",\r\n                \"max-height\": \"460px\",\r\n                \"overflow-x\": \"hidden\",\r\n            },\r\n            toString: renderCss\r\n        };\r\n        var bodyCss = {\r\n            styles: {\r\n                \"overflow\" : \"hidden\",\r\n            },\r\n            toString: renderCss\r\n        };\r\n        var spbcModalStyle = document.createElement( 'style' );\r\n        spbcModalStyle.setAttribute( 'id', 'spbc-modal-styles' );\r\n        spbcModalStyle.innerHTML = 'body.spbc-modal-opened{' + bodyCss + '}';\r\n        spbcModalStyle.innerHTML += '#spbc-modal-overlay{' + overlayCss + '}';\r\n        spbcModalStyle.innerHTML += '#spbc-modal-close{' + closeCss + '}';\r\n        spbcModalStyle.innerHTML += '#spbc-modal-close:before{' + closeCssBefore + '}';\r\n        spbcModalStyle.innerHTML += '#spbc-modal-close:after{' + closeCssAfter + '}';\r\n        spbcModalStyle.innerHTML += '#spbc-modal-content{' + contentCss + '}';\r\n        document.body.append( spbcModalStyle );\r\n        /* Cleantalk Modal CSS end */\r\n\r\n        var overlay = document.createElement( 'div' );\r\n        overlay.setAttribute( 'id', 'spbc-modal-overlay' );\r\n        document.body.append( overlay );\r\n\r\n        document.body.classList.add( 'spbc-modal-opened' );\r\n\r\n        var inner = document.createElement( 'div' );\r\n        inner.setAttribute( 'id', 'spbc-modal-inner' );\r\n        inner.setAttribute( 'style', innerCss );\r\n        overlay.append( inner );\r\n\r\n        var close = document.createElement( 'div' );\r\n        close.setAttribute( 'id', 'spbc-modal-close' );\r\n        inner.append( close );\r\n\r\n        var content = document.createElement( 'div' );\r\n        if ( this.loaded ) {\r\n            content.innerHTML = this.loaded;\r\n        } else {\r\n            content.innerHTML = 'Loading...';\r\n        }\r\n        content.setAttribute( 'id', 'spbc-modal-content' );\r\n        inner.append( content );\r\n\r\n        this.opened = true;\r\n\r\n        return this;\r\n    },\r\n\r\n    close: function () {\r\n        spbcModal.loaded = '';\r\n        spbcModal.loading = false;\r\n        document.body.classList.remove( 'spbc-modal-opened' );\r\n        document.getElementById( 'spbc-modal-overlay' ).remove();\r\n        document.getElementById( 'spbc-modal-styles' ).remove();\r\n        document.dispatchEvent(\r\n            new CustomEvent( \"spbcModalClosed\", {\r\n                bubbles: true,\r\n            } )\r\n        );\r\n    }\r\n\r\n};\r\n\r\n/* Cleantalk Modal helpers */\r\ndocument.addEventListener('click',function( e ){\r\n    if( e.target && e.target.id === 'spbc-modal-overlay' || e.target.id === 'spbc-modal-close' ){\r\n        spbcModal.close();\r\n    }\r\n});\r\ndocument.addEventListener(\"spbcModalContentLoaded\", function( e ) {\r\n    if( spbcModal.opened && spbcModal.loaded ) {\r\n        document.getElementById( 'spbc-modal-content' ).innerHTML = spbcModal.loaded;\r\n    }\r\n});"],"names":["spbcModal","loaded","loading","opened","opening","load","action","this","callback","result","data","params","obj","document","dispatchEvent","CustomEvent","bubbles","spbc_sendAJAXRequest","notJson","putError","errorText","put","html","open","renderCss","cssStr","key","styles","overlayCss","z-index","position","top","left","width","height","background","display","justify-content","align-items","toString","innerCss","padding","max-width","max-height","border","border-radius","box-shadow","closeCss","cursor","right","closeCssBefore","content","transform","closeCssAfter","contentCss","overflow-y","overflow-x","bodyCss","overflow","spbcModalStyle","createElement","overlay","setAttribute","innerHTML","body","append","inner","classList","add","close","remove","getElementById","addEventListener","e","target","id"],"mappings":"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"}