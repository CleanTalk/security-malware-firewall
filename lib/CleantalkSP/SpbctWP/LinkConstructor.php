<?php

namespace CleantalkSP\SpbctWP;

class LinkConstructor extends \CleantalkSP\Common\LinkConstructor
{
    //todo search unhadled links via comment //HANLDE LINK

    /**
     * @var string
     */
    public static $utm_campaign = 'spbct_links';

    /**
     * @var array[]
     * @see \Cleantalk\Common\LinkConstructor::$utm_presets
     */
    public static $utm_presets = array(
        /*
         * Settings
         */
//        'settings_top_info' => array(
//            'utm_id' => '',
//            'utm_term' => '',
//            'utm_source' => 'admin_panel',
//            'utm_medium' => 'apbct_options',
//            'utm_content' => 'settings_top_info',
//        ),
//        'anti_crawler_inactive' => array(
//            'utm_id' => '',
//            'utm_term' => '',
//            'utm_source' => 'admin_panel',
//            'utm_medium' => 'apbct_options',
//            'utm_content' => 'anti_crawler_inactive',
//        ),
//        'dashboard_widget_all_data_link' => array(
//            'utm_id' => '',
//            'utm_term' => '',
//            'utm_source' => 'admin_panel',
//            'utm_medium' => 'dashboard_widget',
//            'utm_content' => 'view_all',
//        ),
//        'dashboard_widget_go_to_cp' => array(
//            'utm_id' => '',
//            'utm_term' => '',
//            'utm_source' => 'admin_panel',
//            'utm_medium' => 'dashboard_widget',
//            'utm_content' => 'go_to_cp',
//        ),
//        'help_wl_multisite' => array(
//            'utm_id' => '',
//            'utm_term' => '',
//            'utm_source' => 'admin_panel',
//            'utm_medium' => 'settings',
//            'utm_content' => 'help_wl_multisite',
//        ),
        /*
         * Public pages
         */
//        'public_widget_referal_link' => array(
//            'utm_id' => '',
//            'utm_term' => '',
//            'utm_source' => 'public',
//            'utm_medium' => 'widget',
//            'utm_content' => 'referal_link',
//        ),
//        'public_comments_page_go_to_cp' => array(
//            'utm_id' => '',
//            'utm_term' => '',
//            'utm_source' => 'public',
//            'utm_medium' => 'comments_page',
//            'utm_content' => 'go_to_cp',
//        ),
        /*
         * Emails
         */
        //https://cleantalk.org/my/?cp_mode=antispam&utm_source=newsletter&utm_medium=email&utm_campaign=wp_spam_registration_passed
//        'email_wp_spam_registration_passed' => array(
//            'utm_id' => '',
//            'utm_term' => '',
//            'utm_source' => 'newsletter',
//            'utm_medium' => 'email',
//            'utm_content' => 'wp_spam_registration_passed',
//        ),
        /*
         * Renewal links
         */
        'renew_notice_trial' => array( //site-wide renew banner in the admin dashboard on license ended
            'utm_id' => '',
            'utm_term' => '',
            'utm_source' => 'admin_panel',
            'utm_medium' => 'banner',
            'utm_content' => 'renew_notice_trial',
        ),
        'renew_notice_renew' => array( //site-wide renew banner in the admin dashboard on license is close to end
            'utm_id' => '',
            'utm_term' => '',
            'utm_source' => 'admin_panel',
            'utm_medium' => 'banner',
            'utm_content' => 'renew_notice_renew',
        ),
        'renew_notice_service_restricted' => array( // the link for all security settings tabs if service is restricted
            'utm_id' => '',
            'utm_term' => '',
            'utm_source' => 'admin_panel',
            'utm_medium' => 'settings_tabs_notice',
            'utm_content' => 'renew_notice_service_restricted',
        ),
        'renew_plugins_listing' => array( //the renewal link for the SPBCT on the installed plugins list
            'utm_id' => '',
            'utm_term' => '',
            'utm_source' => 'admin_panel',
            'utm_medium' => 'badge',
            'utm_content' => 'renew_plugins_listing',
        ),
        'renew_admin_bar_cross_link_apbct' => array( //cross-link to renew anti-spam in admin bar if detected so - probably never works
            'utm_id' => '',
            'utm_term' => '',
            'utm_source' => 'admin_panel',
            'utm_medium' => 'admin_bar',
            'utm_content' => 'renew_admin_bar_cross_link_apbct',
        ),
        'renew_admin_bar_spbct' => array( // renew link on the product name in the admin bar
            'utm_id' => '',
            'utm_term' => '',
            'utm_source' => 'admin_panel',
            'utm_medium' => 'admin_bar',
            'utm_content' => 'renew_admin_bar',
        ),
    );

    public static function buildCleanTalkLink($utm_preset, $uri = '', $get_params = array(), $domain = 'https://cleantalk.org')
    {
        return parent::buildCleanTalkLink($utm_preset, $uri, $get_params, $domain);
    }

    public static function buildRenewalLinkATag($user_token, $link_inner_html, $product_id, $utm_preset)
    {
        return parent::buildRenewalLinkATag($user_token, $link_inner_html, $product_id, $utm_preset);
    }
}
