<?php

namespace CleantalkSP\SpbctWP\Scanner\FilesDirectoriesPermissionsModule;

use CleantalkSP\SpbctWP\DB;

/**
 * Class work with table scan_directories
 */
class DirectoriesPermissionsRepository
{
    /**
     * @var DB
     */
    private $db;

    public function __construct()
    {
        $this->db = DB::getInstance();
    }

    /**
     * @param $path string
     * @param $permission integer
     */
    public function add( $path, $permission )
    {
        $this->db->prepare(
            'INSERT INTO ' . SPBC_TBL_SCAN_DIRECTORIES
            . ' (path, permission) VALUES'
            . ' (%s, %d) '
            . 'ON DUPLICATE KEY UPDATE
                    permission = VALUES(`permission`)',
            array($path, $permission)
        )->execute();
    }
}