<?php

namespace CleantalkSP\SpbctWP\Scanner\Frontend;

use CleantalkSP\SpbctWP\Scanner\Frontend\Stages\FindRedirectsStage;

class FrontendScannerDispatcher
{
    const STAGES = array(
        FindRedirectsStage::class
    );

    public function analyzePage(PublicPageModel $page)
    {
        // Регистрирует (дата сканирования и т.д.) - но это может и не надо...
        // потому что это клиент должен решить что передать на сканирование

        // Проводит по всем этапам
        foreach (self::STAGES as $stage) {
            $stageHandler = new $stage();
            $stageHandler->setPage($page);
            $stageHandler->analyse();
            //$this->results[$stage] = $stageHandler->getResult();
        }

        // Выдает результат
    }
}