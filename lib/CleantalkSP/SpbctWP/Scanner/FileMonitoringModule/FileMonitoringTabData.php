<?php

namespace CleantalkSP\SpbctWP\Scanner\FileMonitoringModule;

class FileMonitoringTabData
{
    public static function getDataToAccordion()
    {
        $data_to_accordion = array();

        $files = FileMonitoringRepository::getFilesFromDb();

        if ($files) {
            foreach ($files as $file) {
                $data_to_accordion[] = (object) array(
                    'path' => $file['path'],
                    'path_hash' => $file['path_hash'],
                );
            }
        }

        return $data_to_accordion;
    }

    public static function prepareDataToAccordion($table)
    {
        if ($table->items_count) {
            foreach ($table->rows as $row) {
                $table->items[] = array(
                    'path'        => $row->path,
                    'uid'         => $row->path_hash,
                    'actions'     => $row->actions,
                );
            }
        }

        return $table;
    }
}