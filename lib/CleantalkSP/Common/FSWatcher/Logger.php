<?php

namespace CleantalkSP\Common\FSWatcher;

class Logger
{
    private static function getPath()
    {
        return __DIR__ . DIRECTORY_SEPARATOR . 'logs' . DIRECTORY_SEPARATOR . date('Y-m-d') . '.log';
    }

    public static function log($msg)
    {
        $path = self::getPath();

        $message = '[' . date('H:i:s') . ']' . ' ';

        $message .= debug_backtrace()[1]['class'] 
            . debug_backtrace()[1]['type']
            . debug_backtrace()[1]['function'] 
            . PHP_EOL;

        if (is_string($msg)) {
            $message .= $msg . PHP_EOL;
        }

        if (is_array($msg)) {
            foreach ($msg as $key => $value) {
                $message .= $key . ': ' . $value . PHP_EOL;
            }
        }

        error_log($message, 3, $path);
    }
}